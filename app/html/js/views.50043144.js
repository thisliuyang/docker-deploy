(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["views"],{"095a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[n("avue-form",{attrs:{option:e.option},on:{"tab-click":e.handleTabClick,submit:e.handleSubmit},scopedSlots:e._u([{key:"unitList",fn:function(t){return[n("div",[e.userInfo.unitId?n("div",[n("el-tag",[e._v(e._s(e.userInfo.unitList[0].unit))]),n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:e.handleUnitInfo}},[e._v("查看单位信息")]),e.isUnit?n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:e.handleEditUnitInfo}},[e._v("编辑单位信息")]):e._e(),e.isPersonage?n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:e.handleLeave}},[e._v("申请离开单位")]):e._e()],1):[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleAddUnit(t)}}},[e._v("加入单位")])]],2)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"选择单位",visible:e.unitListIsShow,width:"70%","append-to-body":""},on:{"update:visible":function(t){e.unitListIsShow=t}}},[n("unitTable",{on:{join:e.handleJoinSubmit}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.unitListIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.unitListIsShow=!1}}},[e._v("确 定")])],1)],1),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"单位信息",visible:e.unitInfoIsShow,width:"70%","append-to-body":""},on:{"update:visible":function(t){e.unitInfoIsShow=t}}},[n("avue-form",{ref:"unitForm",attrs:{option:e.unitOption},model:{value:e.unitForm,callback:function(t){e.unitForm=t},expression:"unitForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.unitInfoIsShow=!1}}},[e._v("取 消")]),0==e.unitOption.detail?n("el-button",{attrs:{type:"primary"},on:{click:e.handleEditUnit}},[e._v("确 定")]):e._e()],1)],1)],1)],1)},i=[],a=(n("7f7f"),n("6b54"),n("87b3"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),s=(n("6762"),n("2fdb"),n("c0c7")),o=n("375c"),c=n("8237"),l=n.n(c),u=n("d9a3"),d=n("721e"),h=n("c832"),p=n.n(h),f=n("1e69"),m=n("5766"),g=n("c663"),b=n("cd3f"),v=n.n(b),y=n("8ddc"),w={data:function(){return{index:0,unitListIsShow:!1,unitInfoIsShow:!1,option:{tabs:!0,tabsActive:1,emptyBtn:!1,submitText:"提交修改",group:[{label:"账户信息",prop:"info",display:!0,column:[{label:"账号",span:12,row:!0,prop:"account",display:!0,disabled:!0},{label:"用户名",span:12,row:!0,prop:"realName"},{label:"证件号",span:12,row:!0,prop:"card"},{label:"手机号",span:12,row:!0,prop:"phone"},{label:"邮箱",prop:"email",span:12,row:!0},{label:"单位名称",prop:"unitList",formslot:!0,span:12,row:!0}]},{label:"修改密码",prop:"password",display:!0,column:[{label:"原密码",span:12,row:!0,type:"password",prop:"oldPassword"},{label:"新密码",span:12,row:!0,type:"password",prop:"newPassword"},{label:"确认密码",span:12,row:!0,type:"password",prop:"newPassword1"}]}]},unitOption:v()(g["unitOption"]),form:{},unitForm:{},userInfo:{}}},watch:{userInfo:{handler:function(){var e=this,t=["1123598816738675201","1351365135681191937","1351364770906767361","1351364845053673474","1375342244055232513","1372376795654664194"],n=t.some((function(t){return p()(e,"userInfo.roleId","").includes(t)})),r=this.option.group[1];if(r.display=n,this.isUnit){var i=this.findObject(this.option.group[0].column,"realName"),a=this.findObject(this.option.group[0].column,"card");i.display=!1,a.display=!1}var s=this.findObject(this.option.group[0].column,"unitList");this.$nextTick((function(){p()(e,"userInfo.roleId","").includes("1351364540907913218")?s.display=!0:s.display=!1}))},immediate:!0}},created:function(){this.handleWitch(),this.initData()},components:{unitTable:d["default"]},computed:{isUnit:function(){return p()(this,"userInfo.roleId","").includes("1351364671552094210")},isPersonage:function(){return p()(this,"userInfo.roleId","").includes("1351364540907913218")}},methods:{initData:function(){var e=this;Object(y["getChildList"])(1,1e4,"519").then((function(t){var n=e.findObject(e.unitOption.column,"ownerShip");n.dicData=p()(t,"data.data",[])}))},handleJoinSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["startList"])(1,100,{category:"flow_4"});case 2:if(n=e.sent,r=p()(n,"data.data.records[0].id"),r){e.next=6;break}return e.abrupt("return",this.$alert("没有流程ID","提交失败",{confirmButtonText:"确定",type:"warning",callback:function(){}}));case 6:return i={processDefinitionId:r,unitId:t.id,applyId:this.form.id,isTrue:0},e.next=9,Object(o["applyProcess"])(i);case 9:a=e.sent,s=a.data,s.success?(this.unitListIsShow=!1,this.$alert("请等待单位管理员审核通过","提交成功",{confirmButtonText:"确定",callback:function(){}})):this.$message.error(s.msg||"提交失败");case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleEditUnit:function(){var e=this;this.$refs.unitForm.validate((function(t,n,r){if(t)Object(m["update"])(e.unitForm).then((function(t){var r=p()(t,"data",{}),i=r.code,a=r.msg;200===i?(e.unitInfoIsShow=!1,e.$message({type:"success",message:"操作成功!"})):e.$message({type:"error",message:a}),n()}),(function(e){n(),console.log(e)}));else{var i=Object.keys(r).map((function(e){return p()(r,"[".concat(e,"][0].message"))}));e.$alert(i.toString(),"带 * 号的字段必须填写",{confirmButtonText:"确定",type:"warning",callback:function(){}})}}))},handleSubmit:function(e,t){var n=this;0===this.index?Object(s["updateInfo"])(e).then((function(e){e.data.success?n.$message({type:"success",message:"修改信息成功!"}):n.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()})):Object(s["updatePassword"])(l()(e.oldPassword),l()(e.newPassword),l()(e.newPassword1)).then((function(e){e.data.success?n.$message({type:"success",message:"修改密码成功!"}):n.$message({type:"error",message:e.data.msg}),t()}),(function(e){window.console.log(e),t()}))},handleWitch:function(){var e=this;0===this.index&&Object(s["getUserInfo"])().then((function(t){var n=t.data.data;e.userInfo=n,e.form={id:n.id,account:n.account,name:n.name,realName:n.realName,phone:n.phone,email:n.email,card:n.card},e.unitForm=p()(n,"unitList[0]",{})}))},handleTabClick:function(e){this.index=u["a"].toInt(e.index),this.handleWitch()},handleAddUnit:function(){this.unitOption.detail=!0,this.unitListIsShow=!0},handleUnitInfo:function(){this.unitOption.detail=!0,this.unitInfoIsShow=!0},handleEditUnitInfo:function(){this.unitOption.detail=!1,this.unitInfoIsShow=!0},handleLeave:function(){var e=this;this.$confirm("确定申请离开单位吗？离开单位将没有权限申请该单位合同，无法查看此单位合同信息！",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.handleLeaveSubmit()})).catch((function(){}))},handleLeaveSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["startList"])(1,100,{category:"flow_4"});case 2:if(t=e.sent,n=p()(t,"data.data.records[0].id"),n){e.next=6;break}return e.abrupt("return",this.$alert("没有流程ID","提交失败",{confirmButtonText:"确定",type:"warning",callback:function(){}}));case 6:return r={processDefinitionId:n,unitId:this.userInfo.unitId,applyId:this.userInfo.id,isTrue:1},e.next=9,Object(o["applyProcess"])(r);case 9:i=e.sent,a=i.data,a.success?this.$alert("等待管理员审核！","提交成功",{confirmButtonText:"确定",type:"warning",callback:function(){}}):this.$message.error(a.msg||"提交失败");case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},_=w,C=(n("6ef2"),n("2877")),I=Object(C["a"])(_,r,i,!1,null,null,null);t["default"]=I.exports},"0ed3":function(e,t,n){},"179b":function(e,t,n){},"1c04":function(e,t,n){},"1f31":function(e,t,n){"use strict";n("0ed3")},"21a9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAgree}},[e._v("同意")]),n("el-button",{attrs:{type:"danger"},on:{click:e.handleDisagree}},[e._v("驳回")]),n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("el-form-item",{attrs:{label:"申请人"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.applyName,callback:function(t){e.$set(e.form,"applyName",t)},expression:"form.applyName"}})],1),n("el-form-item",{attrs:{label:"申请时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.applyTime,callback:function(t){e.$set(e.form,"applyTime",t)},expression:"form.applyTime"}})],1),n("el-form-item",{attrs:{label:"证件号"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),n("el-form-item",{attrs:{label:"审批意见"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("批复意见: ["+e._s(t.comment)+"]")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()])],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=n("375c"),s={data:function(){return{taskId:"",businessId:"",processInstanceId:"",src:"",flowList:[],rules:{},form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:"",comment:""}}},created:function(){this.init()},beforeRouteUpdate:function(e,t,n){e.fullPath!==t.fullPath&&(n(),this.init())},methods:{init:function(){var e=this;this.taskId=this.$route.params.taskId,this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["applyDetail"])(this.businessId).then((function(t){var n=t.data;if(n.success){var r=e.$route.query,i=r.card,a=r.phone;e.form=n.data,e.form.card=i,e.form.phone=a}}))},handleAgree:function(){var e=this,t={taskId:this.taskId,processInstanceId:this.processInstanceId,flag:"ok",comment:this.form.comment,applyId:this.form.applyId,unitId:this.form.unitId};Object(a["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/user-check/index"})):e.$message.error(n.msg||"提交失败")}))},handleDisagree:function(){var e=this,t={taskId:this.taskId,processInstanceId:this.processInstanceId,applyId:this.form.applyId,comment:this.form.comment};Object(a["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/user-check/index"})):e.$message.error(n.msg||"提交失败")}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/user-check/index"})}}},o=s,c=n("2877"),l=Object(c["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports},"3c15":function(e,t,n){},"44ab":function(e,t,n){},4885:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:"基本信息"}}),n("el-step",{attrs:{title:"合同信息"}}),e.form&&"1"==e.form["1613704596447_13655"]?n("el-step",{attrs:{title:"免税申请"}}):e._e(),n("el-step",{attrs:{title:"完成"}})],1),n("avue-form",{attrs:{option:e.option},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuForm"},[n("el-button",{attrs:{icon:"el-icon-arrow-left"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n        返回\n      ")])],1)],2)],1)},i=[],a={name:"Contract",components:{},data:function(){return{option:{column:[{type:"radio",label:"申报类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613700776603_63360",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"input",label:"项目名称",span:24,display:!0,prop:"1613703737412_39303",prepend:"",required:!0,rules:[{required:!0,message:"项目名称必须填写"}]},{type:"tree",label:"项目计划来源",span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"1613703818707_5272",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=1362248000388214785",required:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613703973711_46186",dicUrl:"/api/blade-system/dict-biz/dictionary?code=ContractCategory",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"input",label:"成交总金额",span:24,display:!0,prop:"1613704131020_74507",labelTip:"请填写合同成交总金额",labelTipPlacement:"right",append:"元",required:!0,rules:[{required:!0,message:"成交总金额必须填写"}]},{type:"radio",label:"是否为军民两用合同",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613704259081_32629",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"tree",label:"登记站",span:24,display:!0,parent:!1,props:{label:"title",value:"value"},prop:"1613704342325_63255",dicUrl:"/api/blade-system/dept/tree",required:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"radio",label:"是否申请免税",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613704596447_13655",labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择单选框组"}],dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",required:!0}],labelPosition:"right",labelSuffix:"：",labelWidth:140,gutter:0,menuBtn:!0,submitBtn:!0,submitText:"下一步",emptyBtn:!0,emptyText:"清空",menuPosition:"center"},form:{},active:0,isShow:!1}},computed:{},watch:{},methods:{next:function(){this.active++>2&&(this.active=0)},handleSubmit:function(e,t){console.log("form :>> ",e),this.$message.success("3s后关闭"),setTimeout((function(){t()}),3e3)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},s=a,o=(n("ad5e"),n("2877")),c=Object(o["a"])(s,r,i,!1,null,"3efe644d",null);t["default"]=c.exports},"4b9f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("div",{staticClass:"wel"},[n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-platform-eleme",text:"开始菜单1",time:"1",background:"/img/bg/bg3.jpg",color:"#d56259"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-eleme",text:"开始菜单2",time:"2",background:"/img/bg/bg2.jpg",color:"#419ce7"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-delete-solid",text:"开始菜单3",time:"3",color:"#56b69b"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-delete",text:"开始菜单4",time:"4",color:"#d44858"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-tools",text:"开始菜单5",time:"5",color:"#3a1f7e"}}),n("basic-block",{attrs:{width:410,height:e.height,icon:"el-icon-setting",text:"开始菜单6",time:"6",background:"/img/bg/bg1.jpg",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#422829"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-user-solid",text:"开始菜单7",time:"7",color:"#613cbd"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-star-off",text:"开始菜单8",time:"8",color:"#da542e"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-goods",text:"开始菜单9",time:"9",color:"#2e8aef"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-circle-check",text:"开始菜单10",time:"10",color:"#3d17b8"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-platform",text:"开始菜单11",time:"11",color:"#e31462"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-fold",text:"开始菜单12",time:"12",color:"#d9532d"}}),n("basic-block",{attrs:{width:410,height:e.height,icon:"el-icon-s-open",text:"开始菜单13",time:"13",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#b72147"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-flag",text:"开始菜单14",time:"14",color:"#01a100"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-data",text:"开始菜单15",time:"15",color:"#0c56bf"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-grid",text:"开始菜单16",time:"16",color:"#0098a9"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-release",text:"开始菜单17",time:"17",background:"/img/bg/bg2.jpg",color:"#209bdf"}}),n("basic-block",{attrs:{width:e.width,height:e.height,icon:"el-icon-s-home",text:"开始菜单18",time:"18",background:"/img/bg/bg3.jpg",color:"#603bbc"}}),n("basic-block",{attrs:{width:515,height:e.height,icon:"el-icon-s-promotion",text:"开始菜单19",time:"19",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#009bad"}}),n("basic-block",{attrs:{width:515,height:e.height,icon:"el-icon-s-custom",text:"开始菜单20",time:"20",background:"/img/bg/bg4.jpg",dept:"这是一段很长的很长很长很长的描述这是一段很长的很长很长很长的描述",color:"#d74e2a"}})],1)])},i=[],a={data:function(){return{width:200,height:120}}},s=a,o=(n("8117"),n("2877")),c=Object(o["a"])(s,r,i,!1,null,"109a8bfe",null);t["default"]=c.exports},"4e3c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"index-con"},[e.isAdminRole?[n("el-row",[n("el-col",{attrs:{span:24}},[n("third-register")],1)],1),n("div",{staticClass:"wel"},[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"md-card"},[n("div",{staticClass:"md-card__header"},[n("div",{staticClass:"title"},[e._v("公告信息")]),n("div",{staticClass:"btn",on:{click:e.handleMore}},[e._v("\n                更多\n                "),n("i",{staticClass:"el-icon-arrow-right"})])]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],class:["md-card__body",(e.isAdmin||e.isDjc)&&"admin-card"]},e._l(e.data,(function(t){return n("div",{key:t.id,class:["item",e.activeIndex===t.id&&"active"],on:{mouseenter:function(n){e.activeIndex=t.id},click:function(n){return e.handleView(t)}}},[n("div",[n("avue-text-ellipsis",{attrs:{text:t.title,height:50}},[n("small",{attrs:{slot:"more"},slot:"more"},[e._v("...")])])],1),n("div",[e._v(e._s(t.releaseTime))])])})),0)])]),n("el-col",{attrs:{span:12}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"md-card"},[n("div",{staticClass:"md-card__header"},[n("div",{staticClass:"title"},[e._v("常用功能")])]),n("div",{class:["md-card__body",(e.isAdmin||e.isDjc)&&"admin-card"]},[e.isAdmin||e.isDjc?[n("el-row",{staticClass:"handle-list"},[n("el-col",{attrs:{span:24}},[n("div",{staticClass:"handle-item handle-item2"},[n("div",{staticClass:"num"},[e._v("\n                        "+e._s(e.statistics.sumContractCount)+"\n                      ")]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("合同总数量")]),n("div",{staticClass:"md-btn",on:{click:function(t){return e.$router.push({path:"/contract-search/index",query:{}})}}},[e._v("\n                          查询合同\n                        ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index2.png",alt:""}})])])])],1),n("el-row",{staticClass:"handle-list"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item1"},[n("div",{staticClass:"num"},[e._v("\n                        "+e._s(e.statistics.reviewContractCount)+"\n                      ")]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("待审核合同")]),n("div",{staticClass:"md-btn",on:{click:function(t){return e.$router.push({path:"/contract-check/index",query:{}})}}},[e._v("\n                          审核合同\n                        ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index1.png",alt:""}})])])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item1"},[n("div",{staticClass:"num"},[e._v("\n                        "+e._s(e.statistics.reviewContractFreeCount)+"\n                      ")]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("待审核免税")]),n("div",{staticClass:"md-btn",on:{click:function(t){return e.$router.push({path:"/free-check/index",query:{}})}}},[e._v("\n                          审核免税\n                        ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index1.png",alt:""}})])])])],1)]:n("el-row",{staticClass:"handle-list"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item1"},[n("div",{staticClass:"num"},[e._v("\n                      "+e._s(e.statistics.reviewContractCount)+"\n                    ")]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("待审核合同")]),n("div",{staticClass:"md-btn",on:{click:function(t){return e.$router.push({path:"/contract-check/index",query:{}})}}},[e._v("\n                        审核合同\n                      ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index1.png",alt:""}})])])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item2"},[n("div",{staticClass:"num"},[e._v("\n                      "+e._s(e.statistics.sumContractCount)+"\n                    ")]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("合同总数量")]),n("div",{staticClass:"md-btn",on:{click:function(t){return e.$router.push({path:"/contract-search/index",query:{}})}}},[e._v("\n                        查询合同\n                      ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index2.png",alt:""}})])])])],1),e.isAdmin||e.isWhAdmin?n("el-row",{staticClass:"handle-list"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item3"},[n("div",{staticClass:"num"},[e._v(e._s(e.statistics.upLevelRejectCount))]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("审核驳回数量")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index3.png",alt:""}})])])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item4"},[n("div",{staticClass:"num"},[e._v(e._s(e.statistics.upLevelCancelCount))]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("\n                        审核作废数量\n                      ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index4.png",alt:""}})])])])],1):n("el-row",{staticClass:"handle-list"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item3"},[n("div",{staticClass:"num"},[e._v(e._s(e.statistics.upLevelRejectCount))]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("被上级审核驳回数量")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index3.png",alt:""}})])])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"handle-item handle-item4"},[n("div",{staticClass:"num"},[e._v(e._s(e.statistics.upLevelCancelCount))]),n("div",{staticClass:"md-row"},[n("div",{staticClass:"title"},[e._v("\n                        被上级审核作废数量\n                      ")])]),n("div",{staticClass:"icon"},[n("img",{attrs:{src:"/img/index1.png",alt:""}})])])])],1)],2)])])],1),n("div",{staticClass:"md-card"},[n("div",{staticClass:"md-card__header"},[n("div",{staticClass:"title"},[e._v("统计分析")]),n("div",{staticClass:"btn",on:{click:function(t){return e.$router.push({path:"/statistics/index",query:{}})}}},[e._v("\n            更多\n            "),n("i",{staticClass:"el-icon-arrow-right"})])]),n("div",{staticClass:"md-card__body"},[n("el-row",{attrs:{span:24}},[n("el-col",{attrs:{span:24}},[n("basic-container",[n("ve-line",{attrs:{data:e.chartData3,height:"324px",extend:e.chartExtend,settings:e.chartSettings}})],1)],1)],1)],1)])],1)]:n("flowIndex",{attrs:{statistics:e.statistics}})],2)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("96cf"),n("3b8d")),s=(n("6762"),n("2fdb"),n("bd86")),o=n("2f62"),c=n("2905"),l=n("8e09"),u=n("c832"),d=n.n(u);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={name:"Wel",data:function(){return this.chartExtend={series:{smooth:!1}},this.chartSettings={labelMap:{createTime:"日期",jszrCount:"技术转让",jsfwCount:"技术服务",jszxCount:"技术咨询",jskfCount:"技术开发",jsxkCount:"技术许可"}},{activeIndex:"",statistics:{},data:[],chartData3:{columns:["createTime","jszrCount","jsfwCount","jszxCount","jskfCount","jsxkCount"],rows:[]},query:{},loading:!0,selectionList:[]}},created:function(){this.initIndex(),this.getStatistics()},components:{flowIndex:l["default"]},computed:p(p({},Object(o["b"])(["userInfo"])),{},{isAdminRole:function(){var e=this,t=["1123598816738675201","1123598816738675202","1351365135681191937","1351364770906767361","1351364845053673474","1375342244055232513","1372376795654664194"],n=t.some((function(t){return e.userInfo.role_id.includes(t)}));return n},isAdmin:function(){var e=this,t=["1351365135681191937"],n=t.some((function(t){return e.userInfo.role_id.includes(t)}));return n},isDjc:function(){var e=this,t=["1365898811341328385","1351364845053673474"],n=t.some((function(t){return e.userInfo.role_id.includes(t)}));return n},isWhAdmin:function(){var e=this,t=["1365898811341328385"],n=t.some((function(t){return e.userInfo.role_id.includes(t)}));return n}}),methods:{initIndex:function(){var e=this,t=["1365140099748098049","1123598816738675202","1372376795654664194"],n=t.some((function(t){return e.userInfo.role_id.includes(t)}));if(n){this.$router.$avueRouter.closeTag();var r={"1123598816738675202":"/free-query/index","1351364671552094210":"/contract/index","1351364540907913218":"/contract/index","1365140099748098049":"/user-check/index","1372376795654664194":"/free-search/index"};this.$router.push({path:r[this.userInfo.role_id]})}},onLoad:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currentPage:1,pageSize:6},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.descs="release_time",(this.isDjc||this.isAdmin)&&(t.pageSize=10),Object(c["getList"])(t.currentPage,t.pageSize,Object.assign(n,this.query)).then((function(t){e.data=d()(t,"data.data.records")}))},getStatistics:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$http({url:"/api/blade-desk/statistics/info",method:"GET"});case 4:return t=e.sent,n=t.data,this.statistics=d()(n,"data",{}),this.chartData3.rows=this.statistics.contratCountList,e.next=10,this.onLoad();case 10:console.log("statistics :>> ",this.statistics),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),window.console.log(e.t0);case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[0,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}(),handleView:function(e){this.$router.push({path:"/desk/notice/view",query:{id:e.id,type:"view"}})},handleMore:function(){this.$router.push({path:"/desk/notice/index",query:{}})}}},m=f,g=(n("8ffb"),n("2877")),b=Object(g["a"])(m,r,i,!1,null,"8f3e8ecc",null);t["default"]=b.exports},"593c":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.contractForm&&e.contractinfoForm?n("avue-crud",{ref:"crud",attrs:{option:e.freeOption,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.size,i=t.row;return[n("el-button",{attrs:{disabled:![7,11].includes(i.freeStatus),icon:"el-icon-printer",type:"text",size:r},on:{click:function(t){return e.handlePrint(i)}}},[e._v("打印")]),n("el-button",{attrs:{disabled:![7,11].includes(i.freeStatus),icon:"el-icon-download",type:"text",size:r},on:{click:function(t){return e.handleDownload(i)}}},[e._v("下载")]),n("el-button",{attrs:{type:"text",size:r,icon:"el-icon-s-check"},on:{click:function(t){return t.stopPropagation(),e.handleHistory(i)}}},[e._v("审核意见\n      ")])]}}],null,!1,2412706846),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"})],2):e._e(),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("28a5"),n("6762"),n("2fdb"),n("7514"),n("96cf"),n("3b8d")),s=(n("c5f6"),n("ac6a"),n("bd86")),o=n("cfda"),c=n("2f62"),l=n("0e0b"),u=n("21a6"),d=n.n(u),h=n("c832"),p=n.n(h),f=n("1e69"),m=n("483e"),g=n("8ddc"),b=n("4ba7");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={data:function(){return{form:{},contractForm:null,contractinfoForm:null,query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},dicData:[],selectionList:[],freeOption:b["freeOption"],data:[],flowList:[],flowListIsShow:!1,flowListOption:b["flowListOption"]}},props:{},computed:y(y({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractexecution_add,!1),viewBtn:this.vaildData(this.permission.contractexecution_view,!1),delBtn:this.vaildData(this.permission.contractexecution_delete,!1),editBtn:this.vaildData(this.permission.contractexecution_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},type:function(){return this.$route.query.type},contractId:function(){return this.$route.query.contractId},contractDealTotal:function(){var e=this.data.reduce((function(e,t){var n=Number(t["contractDeal"]);return e+=n,e}),0);return e}}),watch:{form:{handler:function(){var e=this,t=["rawmaterialsAmount","experimentCost","travelCost","equipmentAmount","salary","managementFee","depreciationCost","designCost"];this.form.combined=t.reduce((function(t,n){var r=isNaN(e.form[n])?0:e.form[n];return t+=r,t}),0)},deep:!0}},created:function(){this.init(),this.initData()},methods:{initData:function(){var e=this;Object(g["getDictionary"])({code:"free-reason"}).then((function(t){var n=e.findObject(e.flowListOption.column,"reason");n.dicData=p()(t,"data.data",[])}))},init:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,t=this.contractId,e.next=5,this.$http({url:"/api/api/contractlist/detail",method:"get",params:{id:t}});case 5:return n=e.sent,e.next=8,this.$http({url:"/api/api/contractinfo/list",method:"get",params:{contractId:t}});case 8:r=e.sent,Object(g["getChildList"])(1,1e4,"518").then((function(e){i.dicData=p()(e,"data.data",[])})),this.contractForm=p()(n,"data.data"),this.contractinfoForm=p()(r,"data.data.records[0]",{}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),window.console.log(e.t0);case 17:return e.prev=17,this.loading=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[0,14,17,20]])})));function t(){return e.apply(this,arguments)}return t}(),handlePrint:function(e){this.exportPdf(e).then((function(e){var t=new Blob([e],{type:"application/pdf"}),n=window.URL.createObjectURL(t);new l["a"](n)}))},handleDownload:function(e){var t=this;this.exportPdf(e).then((function(e){d()(e,t.contractForm.projectName+".pdf")}))},exportPdf:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=this.$loading({lock:!0,text:"加载中...",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 0.99)"}),e.prev=1,r=this.dicData.find((function(e){return e.dictKey==s.contractForm.contractType})),e.next=5,this.$http({url:"/api/api/contractexecution/exportPdf",method:"GET",responseType:"blob",params:{id:t.id,contractRegistrationNumber:this.contractForm.contractRegistrationNumber,contractType:p()(r,"dictValue"),registrationUnit:this.contractForm.registrationUnit,projectName:this.contractForm.projectName}});case 5:return i=e.sent,a=i.data,e.abrupt("return",a);case 10:e.prev=10,e.t0=e["catch"](1),console.log("error :>> ",e.t0);case 13:return e.prev=13,n.close(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])})));function t(t){return e.apply(this,arguments)}return t}(),handleView:function(e){this.$refs.crud.rowView(e)},rowSave:function(e,t,n){var r=this,i=this.data.reduce((function(e,t){var n=Number(t["contractDeal"]);return e+=n,e}),0);return this.form.contractDeal+i>this.form.turnover?this.$alert("您该合同技术交易额为".concat(this.form.turnover,"，累计申请金额不能超过合同技术交易额！"),"提示",{confirmButtonText:"确定",callback:function(){n()}}):this.form.turnover+this.form.combined!=this.form.totalAmount?this.$alert("技术交易额 + 其中合计 必须等于合同总金额","提示",{confirmButtonText:"确定",callback:function(){n()}}):void this.addContractexecution().then((function(){"add"===r.type&&(r.$router.$avueRouter.closeTag(),r.$router.push("/free/index")),r.onLoad(r.page),t()}),(function(e){n(),window.console.log(e)}))},addContractexecution:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(o["add"])(this.form);case 4:if(t=e.sent,n=t.data,200===n.code){e.next=8;break}return e.abrupt("return",this.$alert(n.msg,"提交失败",{confirmButtonText:"确定",callback:function(){}}));case 8:return e.next=10,Object(f["startList"])(1,100,{category:"flow_5"});case 10:if(r=e.sent,i=p()(r,"data.data.records[0].id"),i){e.next=14;break}return e.abrupt("return",this.$alert("没有流程ID","提交失败",{confirmButtonText:"确定",callback:function(){}}));case 14:return a={processDefinitionId:i,contractId:this.form.contractId,createDept:this.contractForm.kiosk,contractExecutionId:n.data.id},e.next=17,Object(m["freeProcess"])(a);case 17:return s=e.sent,c=p()(s,"data",{}),l=c.code,u=c.msg,200==l?this.$alert("等待审核，审核结果会发送短信到注册手机号","提交成功",{type:"success",confirmButtonText:"确定",callback:function(){}}):this.$alert(u,"提交失败",{confirmButtonText:"确定",callback:function(){}}),console.log("freeData :>> ",s),e.abrupt("return",s);case 24:e.prev=24,e.t0=e["catch"](0),window.console.log(e.t0);case 27:return e.prev=27,this.loading=!1,e.finish(27);case 30:case"end":return e.stop()}}),e,this,[[0,24,27,30]])})));function t(){return e.apply(this,arguments)}return t}(),rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this,r=this.data.reduce((function(e,t){var n=Number(t["contractDeal"]);return e+=n,e}),0);if(r>=this.contractinfoForm.turnover)return this.$alert("您该合同技术交易额为".concat(this.contractinfoForm.turnover,"，已经完成免税申请！"),"无法申请",{confirmButtonText:"确定",callback:function(){}});if(["edit","view"].includes(t))Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data}));else try{this.freeOption.addTitle="免税申请（第".concat(this.page.total+1,"次申请）"),setTimeout((function(){if(n.form.contractId=n.contractForm.id,n.form.totalAmount=n.contractForm.contractTotalAmount,n.form.turnover=n.contractinfoForm.turnover,n.form.handlingCount=n.page.total+1,n.data&&n.data.length){var e=p()(n,"data[0]");n.form.rawmaterialsAmount=e.rawmaterialsAmount,n.form.experimentCost=e.experimentCost,n.form.travelCost=e.travelCost,n.form.equipmentAmount=e.equipmentAmount,n.form.salary=e.salary,n.form.managementFee=e.managementFee,n.form.depreciationCost=e.depreciationCost,n.form.designCost=e.designCost,n.form.turnover=e.turnover}}),500)}catch(i){console.log("error :>> ",i)}e()},beforeClose:function(e){"add"===this.type&&(this.$router.$avueRouter.closeTag(),this.$router.push("/free/index")),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud&&this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query,{contractId:this.contractId})).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear(),"add"===t.type&&t.$refs.crud.rowAdd()}))},handleHistory:function(e){var t=this;Object(o["historyFlowList"])({contractExecutionId:e.id}).then((function(e){var n=p()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))}}},_=w,C=n("2877"),I=Object(C["a"])(_,r,i,!1,null,null,null);t["default"]=I.exports},"5ff5":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAgree}},[e._v("受理")]),n("el-button",{attrs:{type:"warning"},on:{click:e.handleDisagree}},[e._v("返回修改")]),n("el-button",{attrs:{type:"danger"},on:{click:e.handleInvalid}},[e._v("不予受理")]),n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("avue-form",{ref:"form",attrs:{option:e.option},scopedSlots:e._u([{key:"contractInfo",fn:function(t){return[n("div",[n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:function(n){return e.handleContractInfo(t)}}},[e._v("查看合同信息")])],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[e.reasonList&&e.reasonList.length?n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("\n                批复意见: ["+e._s(t.comment.split("###$$$")[0]||"无")+"]\n              ")]):e._e(),e.computedReason(t)?n("p",[e._v("\n                审批意见: ["+e._s(e.computedReason(t))+"]\n              ")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()]):e._e()],1)})),1)],1)],1),e.isDev?n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1):e._e()],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:function(t){e.contractInfoIsShow=!1}}}):e._e()],1)],1)},i=[],a=(n("7514"),n("28a5"),n("738e")),s=n("8ddc"),o=n("c832"),c=n.n(o),l=n("096f"),u={data:function(){return{contractInfoIsShow:!1,contractInfoQuery:{},isDev:!1,taskId:"",businessId:"",processInstanceId:"",src:"",flowList:[],rules:{},form:{flow:{assigneeName:""},reason:"",comment:""},option:{disabled:!1,labelPosition:"right",labelSuffix:"：",labelWidth:190,gutter:0,menuBtn:!0,submitBtn:!1,emptyBtn:!1,emptyText:"清空",menuPosition:"center",column:[{label:"合同信息",prop:"contractInfo",formslot:!0,span:12,row:!0},{type:"select",label:"审批意见",dicUrl:"/api/blade-system/dict-biz/dictionary?code=reason",props:{label:"dictValue",value:"dictKey"},span:24,cascaderItem:[],display:!0,prop:"reason",rules:[{required:!0,message:"请选择审批意见"}]},{type:"textarea",label:"备注",span:24,display:!0,prop:"comment"}]},reasonList:[]}},components:{contractInfo:l["default"]},created:function(){this.init()},beforeRouteUpdate:function(e,t,n){e.fullPath!==t.fullPath&&(n(),this.init())},methods:{init:function(){var e=this;this.taskId=this.$route.params.taskId,this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(s["getDictionary"])({code:"reason"}).then((function(t){e.reasonList=t.data.data})),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["registrationDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleContractInfo:function(){this.contractInfoQuery={contractId:this.form.contractId,type:"admin-edit"},this.contractInfoIsShow=!0},handleAgree:function(){var e=this,t={taskId:this.taskId,processInstanceId:this.processInstanceId,flag:"ok",comment:this.form.comment+"###$$$"+this.form.reason,contractId:this.form.contractId};Object(a["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/contract-check/index"})):e.$message.error(n.msg||"提交失败")}))},handleInvalid:function(){var e=this;this.$refs.form.validate((function(t){if(t){var n={taskId:e.taskId,processInstanceId:e.processInstanceId,flag:"invalid",comment:e.form.comment+"###$$$"+e.form.reason,contractId:e.form.contractId};Object(a["completeTask"])(n).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/contract-check/index"})):e.$message.error(n.msg||"提交失败")}))}else e.$message.warning("请先填写批复意见")}))},handleDisagree:function(){var e=this;this.$refs.form.validate((function(t){if(t){var n={taskId:e.taskId,processInstanceId:e.processInstanceId,flag:"fail",comment:e.form.comment+"###$$$"+e.form.reason,contractId:e.form.contractId};Object(a["completeTask"])(n).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/contract-check/index"})):e.$message.error(n.msg||"提交失败")}))}else e.$message.warning("请先填写批复意见")}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/contract-check/index"})},computedReason:function(e){if(!c()(e,"comment"))return"";var t=e.comment.split("###$$$")[1],n=this.reasonList.find((function(e){return e.dictKey==t}));return c()(n,"dictValue")}}},d=u,h=n("2877"),p=Object(h["a"])(d,r,i,!1,null,null,null);t["default"]=p.exports},"60be":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleContractView(a)}}},[e._v("合同详情")]),n("el-button",{attrs:{icon:"el-icon-edit",size:i,type:r},on:{click:function(t){return e.handleFree(a)}}},[e._v("免税申请")]),n("el-button",{attrs:{size:i,type:r},on:{click:function(t){return e.handleFreeList(a)}}},[e._v("免税记录(打印)")])]}}],null,!1,617284455),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):e._e(),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"申请免税",visible:e.freeInfoIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.freeInfoIsShow=t}}},[n("avue-form",{ref:"freeForm",attrs:{option:e.freeOption},on:{submit:e.handleSubmit},model:{value:e.freeForm,callback:function(t){e.freeForm=t},expression:"freeForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.freeInfoIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提 交")])],1)],1),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"免税申请",visible:e.freeListIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.freeListIsShow=t}}},[e.freeListIsShow?n("freeListTable",{attrs:{"active-free":e.activeFree,"contract-id":e.activeFree.id}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.freeListIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.freeListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),s=(n("ac6a"),n("bd86")),o=n("799f"),c=n("2f62"),l=n("cfda"),u=n("483e"),d=n("1e69"),h=n("c832"),p=n.n(h),f=n("593c"),m=n("fcb7"),g=n("c0c7"),b=n("4ba7");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={data:function(){return{form:{},query:{isFree:1},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:260,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,addBtn:!1,submitBtn:!1,selection:!1,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,searchLabelWidth:100,overHidden:!0,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",minWidth:160,overHidden:!0,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,hide:!0,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],required:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{label:"合同总金额（元）",type:"number",prop:"contractTotalAmount",bind:"contractinfo.contractTotalAmount",precision:2,minWidth:120},{label:"技术交易额(元）",type:"number",precision:2,prop:"turnover",bind:"contractinfo.turnover",minWidth:120},{label:"剩余免税交易额(元)",prop:"surplusExecution",minWidth:130}]},data:[],freeInfoIsShow:!1,freeOption:b["freeOption"],freeForm:{},activeContract:{},freeListIsShow:!1,activeFree:{},userInfo:null}},components:{freeListTable:f["default"]},computed:y(y({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),watch:{freeForm:{handler:function(){var e=this,t=["rawmaterialsAmount","experimentCost","travelCost","equipmentAmount","salary","managementFee","depreciationCost","designCost"];this.freeForm.combined=t.reduce((function(t,n){var r=isNaN(e.freeForm[n])?0:e.freeForm[n];return t+=r,t}),0)},deep:!0}},created:function(){this.initData(),this.getUserInfo()},methods:{getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(g["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){i.userInfo=r})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),initData:function(e){var t=this;Object(m["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),s=t.deepClone(r);a.dicData=s}))},handleAdd:function(){this.$router.push("/contract/add")},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},handleFree:function(e){this.$router.push({path:"/free/free-list",query:{contractId:e.id,type:"add"}})},handleFreeList:function(e){this.$router.push({path:"/free/free-list",query:{contractId:e.id}})},handleSubmit:function(){var e=this;this.$refs.freeForm.validate((function(t){t?e.addContractexecution():(e.addContractexecution(),e.$message.warning("请填写必填项"))}))},addContractexecution:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(l["add"])(this.freeForm);case 4:if(t=e.sent,n=t.data,200===n.code){e.next=8;break}return e.abrupt("return",this.$alert(n.msg,"提交失败",{confirmButtonText:"确定",callback:function(){}}));case 8:return e.next=10,Object(d["startList"])(1,100,{category:"flow_5"});case 10:if(r=e.sent,i=p()(r,"data.data.records[0].id"),i){e.next=14;break}return e.abrupt("return",this.$alert("没有流程ID","提交失败",{confirmButtonText:"确定",callback:function(){}}));case 14:return a={processDefinitionId:i,contractId:this.freeForm.contractId,createDept:this.activeContract.kiosk,contractExecutionId:n.data.id},e.next=17,Object(u["freeProcess"])(a);case 17:s=e.sent,s&&(this.freeInfoIsShow=!1,this.$alert("等待审核，审核结果会发送短信到注册手机号","提交成功",{confirmButtonText:"确定",callback:function(){o.$router.push("/free")}})),e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](0),window.console.log(e.t0);case 24:return e.prev=24,this.loading=!1,e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[0,21,24,27]])})));function t(){return e.apply(this,arguments)}return t}(),handleView:function(e){this.activeFree=e,this.freeListIsShow=!0},handleContractView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail"}})},handleDelete:function(){var e=this;if(0===this.selectionList.length)return this.$message.warning("请选择至少一条数据");this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=y(y(y({},n),this.query),{},{contractStatusList:[10,14],isFree:1}),i=this.userInfo,a=i.roleId,s=i.unitId,c=i.deptId,l=i.id;a.includes("1351364540907913218")&&(r.createUser=l,r.registrationUnitId=s||0),a.includes("1351364671552094210")&&(r.registrationUnitId=s),a.includes("1375342244055232513")&&(r.kiosk=c),a.includes("1351364770906767361")&&(r.kiosk=c),a.includes("1351364845053673474")&&(r.registrationPoint=c);var u=r.applyTime,d=r.createTime;u&&(r.startApplyTime=u[0],r.endApplyTime=u[1],r.applyTime=null),d&&(r.startTime=d[0],r.endTime=d[1],r.createTime=null),r.contractStatusList=[10,14],delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(o["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},_=w,C=n("2877"),I=Object(C["a"])(_,r,i,!1,null,null,null);t["default"]=I.exports},"62e4":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},6486:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[n("el-row",[n("el-col",{attrs:{span:12}},[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1),n("el-col",{attrs:{span:12}},[n("avue-crud",{ref:"crudChild",attrs:{option:e.option,"table-loading":e.loading,data:e.dataChild,page:e.pageChild,permission:e.permissionList,"before-open":e.beforeOpenChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),s=n("7754"),o=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{parentId:0,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]}}},computed:l(l({},Object(o["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoadParent(r.pageParent),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(s["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleRowClick:function(e){this.parentId=e.id,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.page,this.query)},rowSaveChild:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoadChild(r.pageChild),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,r){var i=this;Object(s["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageChild.total=n.total,t.dataChild=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,h=n("2877"),p=Object(h["a"])(d,r,i,!1,null,null,null);t["default"]=p.exports},"6e96":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAgree}},[e._v("同意")]),n("el-button",{attrs:{type:"danger"},on:{click:e.handleDisagree}},[e._v("驳回")]),n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("el-form-item",{attrs:{label:"申请人"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.flow.assigneeName,callback:function(t){e.$set(e.form.flow,"assigneeName",t)},expression:"form.flow.assigneeName"}})],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"结束时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),n("el-form-item",{attrs:{label:"请假理由"}},[n("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),n("el-form-item",{attrs:{label:"批复意见"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}})],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("批复意见: ["+e._s(t.comment)+"]")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()])],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=n("fc8c"),s=n("1e69"),o={data:function(){return{taskId:"",businessId:"",processInstanceId:"",src:"",flowList:[],rules:{},form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:"",comment:""}}},created:function(){this.init()},beforeRouteUpdate:function(e,t,n){e.fullPath!==t.fullPath&&(n(),this.init())},methods:{init:function(){var e=this;this.taskId=this.$route.params.taskId,this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["leaveDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleAgree:function(){var e=this;if(this.form.comment){var t={taskId:this.taskId,processInstanceId:this.processInstanceId,flag:"ok",comment:this.form.comment};Object(s["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(n.msg||"提交失败")}))}else this.$message.warning("请先填写批复意见")},handleDisagree:function(){var e=this;if(this.form.comment){var t={taskId:this.taskId,processInstanceId:this.processInstanceId,comment:this.form.comment};Object(s["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(n.msg||"提交失败")}))}else this.$message.warning("请先填写批复意见")},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},c=o,l=n("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},"6ef2":function(e,t,n){"use strict";n("1c04")},"721e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-plus",size:i,type:r},on:{click:function(t){return e.handleJoin(a)}}},[e._v("申请加入")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),s=n("5766"),o=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",menuWidth:"100",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,refreshBtn:!1,columnBtn:!1,header:!1,column:[{label:"单位名称",prop:"unit",searchSpan:12,search:!0,rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"社会统一信用代码",prop:"orgcode",search:!0,searchSpan:12,searchLabelWidth:130,minWidth:100,rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"所在地区",prop:"areaName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"法人",prop:"legalMan",search:!0,searchSpan:12,rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"地址",prop:"address",rules:[{required:!0,message:"请输入",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(o["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.unit_add,!1),viewBtn:this.vaildData(this.permission.unit_view,!1),delBtn:this.vaildData(this.permission.unit_delete,!1),editBtn:this.vaildData(this.permission.unit_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handleJoin:function(e){this.$emit("join",e)},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(s["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,h=n("2877"),p=Object(h["a"])(d,r,i,!1,null,null,null);t["default"]=p.exports},"7df8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])])]),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("批复意见: ["+e._s(t.comment)+"]")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()])],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=n("483e"),s={data:function(){return{businessId:"",processInstanceId:"",src:"",flowList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:""}}},created:function(){this.init()},methods:{init:function(){var e=this;this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["freeDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},o=s,c=n("2877"),l=Object(c["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports},"7ffa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen,search:e.query},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.query=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"contractStatusSearch",fn:function(t){var r=t.disabled,i=t.size,a=t.dic,s=t.column;return[n("div",[n("avue-select",{attrs:{multiple:"",disabled:r,size:i,placeholder:"请选择内容",type:"tree",dic:a,props:s.props},model:{value:e.query.contractStatus,callback:function(t){e.$set(e.query,"contractStatus",t)},expression:"query.contractStatus"}})],1)]}},{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看")]),n("el-button",{attrs:{icon:"el-icon-edit",disabled:1!=a.contractStatus,size:i,type:r},on:{click:function(t){return e.rowUpdate(a)}}},[e._v("编辑")]),n("el-button",{attrs:{icon:"el-icon-refresh-left",disabled:2!=a.contractStatus,type:r,size:i},on:{click:function(t){return e.handleRecall(a)}}},[e._v("撤回")]),n("el-button",{attrs:{icon:"el-icon-delete",disabled:1!=a.contractStatus,type:r,size:i},on:{click:function(t){return e.rowDel(a)}}},[e._v("删除")])]}}],null,!1,3777307732),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.contractlist_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("批量删除\n      ")]):e._e()],1),n("template",{slot:"menuLeft"},[e.permission.contract_add?n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleAdd(0)}}},[e._v("个人合同登记")]):e._e(),e.permission.contract_unit_add?n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.handleAdd(1)}}},[e._v("单位合同登记")]):e._e(),e.permission.contract_sm_add?n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"warning"},on:{click:function(t){return t.stopPropagation(),e.handleAddClassified(1)}}},[e._v("军民两用合同登记")]):e._e(),e.permission.contract_copy_add?n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(t){return t.stopPropagation(),e.handleCopy(t)}}},[e._v("以此合同为模版再次填写申请表单")]):e._e()],1)],2):e._e()],1)},i=[],a=(n("8e6e"),n("456d"),n("6b54"),n("87b3"),n("28a5"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),s=(n("ac6a"),n("bd86")),o=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("738e"),d=n("c0c7");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(s["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:240,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,addBtn:!1,selection:!0,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"状态",prop:"contractStatus",type:"select",searchslot:!0,multiple:!0,dataType:"string",minWidth:160,overHidden:!0,searchSpan:12,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",overHidden:!0,minWidth:160,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",minWidth:160,overHidden:!0,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"select",label:"合同申请类型",prop:"type",dataType:"string",display:!1,search:!0,minWidth:100,value:"1",dicData:[{label:"个人合同",value:"0"},{label:"单位合同",value:"1"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",search:!0,searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{label:"提交时间",prop:"applyTime",type:"datetime",searchSpan:10,minWidth:150,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"创建时间",prop:"createTime",type:"datetime",searchSpan:10,minWidth:150,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[],userInfo:null}},computed:p(p({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initQuery(),this.initData(),this.getUserInfo()},methods:{getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){s.userInfo=r})),i=r.roleId,i.includes("1375342244055232513")&&(a=this.findObject(this.option.column,"contractCode"),a.hide=!0),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}(),initQuery:function(){var e=this.$route.query;e&&e.contractStatus&&"function"==typeof e.contractStatus.split&&(e.contractStatus=e.contractStatus.split(",")),this.query=e},initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),s=t.deepClone(r);a.dicData=s}))},handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractSubject:e,name:1==e?"单位合同登记":"个人合同登记"}})},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0],t=e.id,n=e.isClassified,r=e.type;this.$router.push({path:"/contract/contract-info",query:{copyId:t,isClassified:n,contractSubject:r,name:1==r?"单位合同登记":"个人合同登记"}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractSubject:e,isClassified:1,name:"军民两用合同登记"}})},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"edit",isClassified:e.isClassified,name:1==e.type?"单位合同登记":"个人合同登记"}})},handleView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail",isClassified:e.isClassified,name:e.projectName}})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleRecall:function(e){var t=this;this.$confirm("确定将合同认定申请撤回?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.registrationRecall(e)}))},registrationRecall:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u["registrationRecall"])(t.id);case 3:n=e.sent,r=n.data,r&&200===r.code?(this.onLoad(this.page),this.$message({type:"success",message:"操作成功!"})):this.$message({type:"error",message:r.msg}),this.onLoad(this.page),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.message.error(e.t0.toString());case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=p(p({},n),this.query),i=this.userInfo,a=i.roleId,s=i.unitId,c=i.deptId,l=i.id;r.createUser=l,a.includes("1351364540907913218")&&(r.createUser=l,r.registrationUnitId=s||0),a.includes("1351364671552094210")&&(r.registrationUnitId=s),a.includes("1375342244055232513")&&(r.kiosk=c),a.includes("1351364770906767361")&&(r.kiosk=c),a.includes("1351364845053673474")&&(r.registrationPoint=c);var u=r.applyTime,d=r.createTime;u&&(r.startApplyTime=u[0],r.endApplyTime=u[1],r.applyTime=null),d&&(r.startTime=d[0],r.endTime=d[1],r.createTime=null),r.contractStatusList=r.contractStatus,delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(o["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},m=f,g=n("2877"),b=Object(g["a"])(m,r,i,!1,null,null,null);t["default"]=b.exports},8117:function(e,t,n){"use strict";n("3c15")},"84eb":function(e,t,n){},"8e09":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flow-containter"},[n("div",{staticClass:"flow-wrap"},[n("div",{staticClass:"flow-box"},[e.isWh?n("img",{attrs:{src:"/img/dataflow-wh.png",alt:""}}):n("img",{attrs:{src:"/img/dataflow.png",alt:""}}),n("div",{staticClass:"flow-dot-0 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract-todo/contract-todo",query:{}})}}},[e._v("\n        "+e._s(e.statistics.reviewContractCount||0)+"\n      ")]),n("div",{staticClass:"flow-dot-1 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract/index",query:{contractStatus:"3,6,9,15"}})}}},[e._v("\n        "+e._s(e.statistics.sumDismissalCount||0)+"\n      ")]),n("div",{staticClass:"flow-dot1 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract/index",query:{contractStatus:"2"}})}}},[e._v("\n        "+e._s(e.statistics.djzReviewContractCount||0)+"\n      ")]),n("div",{staticClass:"flow-dot2 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract/index",query:{contractStatus:"4,13"}})}}},[e._v("\n        "+e._s(e.statistics.djcReviewContractCount||0)+"\n      ")]),e.isWh?e._e():n("div",{staticClass:"flow-dot3 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract/index",query:{contractStatus:"7"}})}}},[e._v("\n        "+e._s(e.statistics.szsReviewContractCount||0)+"\n      ")]),n("div",{staticClass:"search-icon1 link",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/contract-search/index",query:{}})}}},[n("img",{attrs:{src:"/img/fdj.png",alt:""}})]),n("div",{staticClass:"flow-dot4 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/free/index",query:{}})}}},[e._v("\n        "+e._s(e.statistics.djcReviewfreeCount||0)+"\n      ")]),e.isWh?e._e():n("div",{staticClass:"flow-dot5 el-badge__content",class:[e.isWh&&"flow-dot-wh"],on:{click:function(t){return e.$router.push({path:"/free/index",query:{}})}}},[e._v("\n        "+e._s(e.statistics.szsReviewfreeCount||0)+"\n      ")]),n("div",{staticClass:"link-b state-item",on:{click:e.handleContract}},[n("i",{staticClass:"el-icon-circle-plus-outline"})]),n("div",{staticClass:"link-b free-item",on:{click:e.handleFree}},[n("i",{staticClass:"el-icon-circle-plus-outline"})]),n("div",{staticClass:"search-icon2 link",on:{click:function(t){return e.$router.push({path:"/free/index",query:{}})}}},[n("img",{attrs:{src:"/img/fdj.png",alt:""}})])]),n("div",{staticClass:"footer"},[e._m(0),e._m(1),n("div",[e._v("\n        2、\n        "),e.isPersonage?n("el-button",{attrs:{type:"text"},on:{click:e.handleDow}},[e._v("申报用户操作手册")]):e._e(),e.isUnit?n("el-button",{attrs:{type:"text"},on:{click:e.handleDow}},[e._v("申报用户操作手册")]):e._e(),n("el-button",{attrs:{type:"text"},on:{click:function(t){e.tipsVisible=!0}}},[e._v("注意事项")]),n("el-button",{attrs:{type:"text"},on:{click:function(t){e.helpVisible=!0}}},[e._v("办理流程")])],1)])]),n("el-dialog",{attrs:{title:"申请认定登记需要注意的事项：","append-to-body":"",visible:e.tipsVisible},on:{"update:visible":function(t){e.tipsVisible=t}}},[n("div",{staticClass:"title-tips"},[n("p",[e._v("\n        1、请选择正确的行政区划，行政区划选择错误可退出在线业务办理界面重新选择。\n      ")]),n("p",[e._v("\n        2、技术转让、技术许可、技术开发合同金额大于等于500万，技术咨询、技术服务合同金额大于等于1000万的为大额合同。大额和涉外技术合同认定登记选择行政区划时需选择湖北省科技厅。\n      ")]),n("p",[e._v("\n        3、技术转让、技术许可、技术开发合同及技术服务、技术咨询金额大于500万以上,需上传相应的合同凭证。\n      ")]),n("p",[e._v("\n        4、技术合同登记信息通过省级管理员审核通过后，符合免税申请条件的合同可申请免税流程。\n      ")]),n("p")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tipsVisible=!1}}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"办理流程","append-to-body":"",visible:e.helpVisible},on:{"update:visible":function(t){e.helpVisible=t}}},[n("div",{staticClass:"title-tips"},[n("p",[e._v("\n        一、网上提交。点击左侧“技术合同登记”菜单，点击“+个人合同登记”或“+单位合同登记”，填写技术合同登记信息后提交。\n      ")]),n("p",[e._v("\n        二、下载合同信息表。收到省级管理员审核通过短信提醒消息后，可在本系统下载有登记站盖章的技术合同信息表。\n      ")]),n("p",[e._v("\n        三、申请免税。符合免税申请的合同，省级管理员审核通过后，在左侧点击“免税申请”，点击“+免税申请”，填写免税申请表单后提交。\n      ")]),n("p",[e._v("\n        四、打印证明。收到省级管理员审核通过短信提醒消息后，在本系统打印已加盖核定专用章的证明单，黑白或彩色打印均可。\n      ")]),n("p")]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.helpVisible=!1}}},[e._v("确 定")])],1)])],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dztip"},[n("img",{attrs:{src:"/img/dztip.png",alt:"logo"}}),e._v("温馨提示")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"browser"},[e._v("\n        1、建议浏览器：\n\n        "),n("a",{attrs:{href:"https://www.google.cn/intl/zh-CN/chrome/",target:"_blank"}},[n("img",{attrs:{src:"/img/dzgg.png",alt:"logo"}}),e._v("谷歌,\n        ")]),n("a",{attrs:{href:"https://www.firefox.com.cn/download/",target:"_blank"}},[n("img",{attrs:{src:"/img/huohu.jpeg",alt:"logo"}}),e._v("火狐,")]),n("a",{attrs:{href:"https://www.baidu.com/link?url=EJF22X00XFc-KLIJ9_mlW6pc8PGGxyN1om31oQng1TtJpBFp-LrU6jzZ-f7PU9HV&wd=&eqid=c5ba1b1d001044db00000006607fdd18",target:"_blank"}},[n("img",{attrs:{src:"/img/360.png",alt:"logo"}}),e._v("360极速。\n        ")])])}],a=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("bd86")),s=n("c832"),o=n.n(s),c=n("2f62");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={name:"FlowContainter",components:{},data:function(){return{tipsVisible:!1,helpVisible:!1}},props:{statistics:{type:Object,default:function(){}}},computed:u(u({},Object(c["b"])(["userInfo","permission","loginInfo"])),{},{isUnit:function(){return o()(this,"userInfo.role_id","").includes("1351364671552094210")},isPersonage:function(){return o()(this,"userInfo.role_id","").includes("1351364540907913218")},region:function(){var e=this.loginInfo.itemcode||"";e=e.substr(2,6);var t=e.slice(0,4);return t},isWh:function(){return"4201"==this.region}}),watch:{},created:function(){},mounted:function(){},methods:{handleContract:function(){this.$router.push("/contract")},handleFree:function(){this.$router.push("/free")},handleDow:function(){return window.open("/pdfjs/web/viewer.html?file=/doc/申报用户操作手册.pdf","PDF","width:50%;height:50%;top:100;left:100;")}},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},h=d,p=(n("1f31"),n("2877")),f=Object(p["a"])(h,r,i,!1,null,"3afc3a0e",null);t["default"]=f.exports},"8ffb":function(e,t,n){"use strict";n("84eb")},9213:function(e,t,n){"use strict";n("44ab")},ad5e:function(e,t,n){"use strict";n("179b")},c74f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAgree}},[e._v("受理")]),n("el-button",{attrs:{type:"warning"},on:{click:e.handleDisagree}},[e._v("返回修改")]),n("el-button",{attrs:{type:"danger"},on:{click:e.handleInvalid}},[e._v("不予受理")]),n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("avue-form",{ref:"form",attrs:{option:e.option},scopedSlots:e._u([{key:"contractInfo",fn:function(t){return[n("div",[n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:function(n){return e.handleContractInfo(t)}}},[e._v("查看合同信息")]),n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:function(n){return e.handleFreeInfo(t)}}},[e._v("查看免税申请信息")]),n("el-button",{staticClass:"unit-btn",attrs:{type:"text"},on:{click:function(n){return e.handleFreeList(t)}}},[e._v("查看免税记录")])],1)]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[e.reasonList&&e.reasonList.length?n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("\n                批复意见: ["+e._s(t.comment.split("###$$$")[0]||"无")+"]\n              ")]):e._e(),e.computedReason(t)?n("p",[e._v("\n                审批意见: ["+e._s(e.computedReason(t))+"]\n              ")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()]):e._e()],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"免税信息",visible:e.freeInfoIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.freeInfoIsShow=t}}},[n("avue-form",{ref:"freeForm",attrs:{option:e.freeOption},model:{value:e.freeForm,callback:function(t){e.freeForm=t},expression:"freeForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.freeInfoIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("修 改")])],1)],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:function(t){e.contractInfoIsShow=!1}}}):e._e()],1)],1)},i=[],a=(n("7514"),n("28a5"),n("483e")),s=n("8ddc"),o=n("c832"),c=n.n(o),l=n("cfda"),u=n("096f"),d=n("4ba7"),h={data:function(){return{contractInfoIsShow:!1,contractInfoQuery:{},taskId:"",businessId:"",processInstanceId:"",src:"",flowList:[],rules:{},form:{flow:{assigneeName:""},reason:"",comment:""},option:{disabled:!1,labelPosition:"right",labelSuffix:"：",labelWidth:190,gutter:0,menuBtn:!0,submitBtn:!1,emptyBtn:!1,emptyText:"清空",menuPosition:"center",column:[{label:"合同信息",prop:"contractInfo",formslot:!0,span:12,row:!0},{type:"select",label:"审批意见",dicUrl:"/api/blade-system/dict-biz/dictionary?code=free-reason",props:{label:"dictValue",value:"dictKey"},span:24,cascaderItem:[],display:!0,prop:"reason",rules:[{required:!0,message:"请选择审批意见"}]},{type:"textarea",label:"备注",span:24,display:!0,prop:"comment"}]},reasonList:[],freeInfoIsShow:!1,freeOption:d["freeOption"],freeForm:{}}},components:{contractInfo:u["default"]},created:function(){this.init()},beforeRouteUpdate:function(e,t,n){e.fullPath!==t.fullPath&&(n(),this.init())},methods:{init:function(){var e=this;this.taskId=this.$route.params.taskId,this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(s["getDictionary"])({code:"reason"}).then((function(t){e.reasonList=t.data.data})),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["freeDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data,Object(l["getDetail"])(e.form.contractExecutionId).then((function(t){e.freeForm=c()(t,"data.data",{})})))}))},handleContractInfo:function(){this.contractInfoQuery={contractId:this.form.contractId,type:"admin-edit"},this.contractInfoIsShow=!0},handleFreeInfo:function(){var e=this;Object(l["getDetail"])(this.form.contractExecutionId).then((function(t){e.freeForm=c()(t,"data.data",{}),e.freeInfoIsShow=!0}))},handleFreeList:function(){this.$router.push({path:"/free/free-list",query:{contractId:this.form.contractId}})},handleAgree:function(){var e=this,t={taskId:this.taskId,processInstanceId:this.processInstanceId,flag:"ok",comment:this.form.comment+"###$$$"+this.form.reason,contractId:this.form.contractId,contractExecutionId:this.form.contractExecutionId};Object(a["completeTask"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/free-check/index"})):e.$message.error(n.msg||"提交失败")}))},handleInvalid:function(){var e=this;this.$refs.form.validate((function(t){if(t){var n={taskId:e.taskId,processInstanceId:e.processInstanceId,flag:"invalid",comment:e.form.comment+"###$$$"+e.form.reason,contractId:e.form.contractId,contractExecutionId:e.form.contractExecutionId};Object(a["completeTask"])(n).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/free-check/index"})):e.$message.error(n.msg||"提交失败")}))}else e.$message.warning("请先填写批复意见")}))},handleDisagree:function(){var e=this;this.$refs.form.validate((function(t){if(t){var n={taskId:e.taskId,processInstanceId:e.processInstanceId,flag:"fail",comment:e.form.comment+"###$$$"+e.form.reason,contractId:e.form.contractId,contractExecutionId:e.form.contractExecutionId};Object(a["completeTask"])(n).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/free-check/index"})):e.$message.error(n.msg||"提交失败")}))}else e.$message.warning("请先填写批复意见")}))},handleSubmit:function(){this.rowUpdate()},rowUpdate:function(){var e=this;delete this.freeForm.auditTime,delete this.freeForm.auditTimeStr,Object(l["update"])(this.freeForm).then((function(){e.freeInfoIsShow=!1,e.$message({type:"success",message:"操作成功!"})}),(function(e){console.log(e)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/free-check/index"})},computedReason:function(e){if(!c()(e,"comment"))return"";var t=e.comment.split("###$$$")[1],n=this.reasonList.find((function(e){return e.dictKey==t}));return c()(n,"dictValue")}}},p=h,f=n("2877"),m=Object(f["a"])(p,r,i,!1,null,null,null);t["default"]=m.exports},cd3f:function(e,t,n){(function(e,n){var r=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",o="[object Array]",c="[object Boolean]",l="[object Date]",u="[object Error]",d="[object Function]",h="[object GeneratorFunction]",p="[object Map]",f="[object Number]",m="[object Object]",g="[object Promise]",b="[object RegExp]",v="[object Set]",y="[object String]",w="[object Symbol]",_="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",O="[object Float32Array]",j="[object Float64Array]",$="[object Int8Array]",k="[object Int16Array]",x="[object Int32Array]",L="[object Uint8Array]",P="[object Uint8ClampedArray]",T="[object Uint16Array]",S="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,z=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,F={};F[s]=F[o]=F[C]=F[I]=F[c]=F[l]=F[O]=F[j]=F[$]=F[k]=F[x]=F[p]=F[f]=F[m]=F[b]=F[v]=F[y]=F[w]=F[L]=F[P]=F[T]=F[S]=!0,F[u]=F[d]=F[_]=!1;var R="object"==typeof e&&e&&e.Object===Object&&e,A="object"==typeof self&&self&&self.Object===Object&&self,E=R||A||Function("return this")(),U=t&&!t.nodeType&&t,N=U&&"object"==typeof n&&n&&!n.nodeType&&n,W=N&&N.exports===U;function V(e,t){return e.set(t[0],t[1]),e}function M(e,t){return e.add(t),e}function H(e,t){var n=-1,r=e?e.length:0;while(++n<r)if(!1===t(e[n],n,e))break;return e}function K(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function J(e,t,n,r){var i=-1,a=e?e.length:0;r&&a&&(n=e[++i]);while(++i<a)n=t(n,e[i],i,e);return n}function Q(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function G(e,t){return null==e?void 0:e[t]}function Y(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function X(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function Z(e,t){return function(n){return e(t(n))}}function ee(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var te=Array.prototype,ne=Function.prototype,re=Object.prototype,ie=E["__core-js_shared__"],ae=function(){var e=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),se=ne.toString,oe=re.hasOwnProperty,ce=re.toString,le=RegExp("^"+se.call(oe).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ue=W?E.Buffer:void 0,de=E.Symbol,he=E.Uint8Array,pe=Z(Object.getPrototypeOf,Object),fe=Object.create,me=re.propertyIsEnumerable,ge=te.splice,be=Object.getOwnPropertySymbols,ve=ue?ue.isBuffer:void 0,ye=Z(Object.keys,Object),we=$t(E,"DataView"),_e=$t(E,"Map"),Ce=$t(E,"Promise"),Ie=$t(E,"Set"),Oe=$t(E,"WeakMap"),je=$t(Object,"create"),$e=Bt(we),ke=Bt(_e),xe=Bt(Ce),Le=Bt(Ie),Pe=Bt(Oe),Te=de?de.prototype:void 0,Se=Te?Te.valueOf:void 0;function De(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function qe(){this.__data__=je?je(null):{}}function ze(e){return this.has(e)&&delete this.__data__[e]}function Be(e){var t=this.__data__;if(je){var n=t[e];return n===i?void 0:n}return oe.call(t,e)?t[e]:void 0}function Fe(e){var t=this.__data__;return je?void 0!==t[e]:oe.call(t,e)}function Re(e,t){var n=this.__data__;return n[e]=je&&void 0===t?i:t,this}function Ae(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Ee(){this.__data__=[]}function Ue(e){var t=this.__data__,n=at(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():ge.call(t,n,1),!0}function Ne(e){var t=this.__data__,n=at(t,e);return n<0?void 0:t[n][1]}function We(e){return at(this.__data__,e)>-1}function Ve(e,t){var n=this.__data__,r=at(n,e);return r<0?n.push([e,t]):n[r][1]=t,this}function Me(e){var t=-1,n=e?e.length:0;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function He(){this.__data__={hash:new De,map:new(_e||Ae),string:new De}}function Ke(e){return jt(this,e)["delete"](e)}function Je(e){return jt(this,e).get(e)}function Qe(e){return jt(this,e).has(e)}function Ge(e,t){return jt(this,e).set(e,t),this}function Ye(e){this.__data__=new Ae(e)}function Xe(){this.__data__=new Ae}function Ze(e){return this.__data__["delete"](e)}function et(e){return this.__data__.get(e)}function tt(e){return this.__data__.has(e)}function nt(e,t){var n=this.__data__;if(n instanceof Ae){var i=n.__data__;if(!_e||i.length<r-1)return i.push([e,t]),this;n=this.__data__=new Me(i)}return n.set(e,t),this}function rt(e,t){var n=Et(e)||At(e)?Q(e.length,String):[],r=n.length,i=!!r;for(var a in e)!t&&!oe.call(e,a)||i&&("length"==a||St(a,r))||n.push(a);return n}function it(e,t,n){var r=e[t];oe.call(e,t)&&Rt(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function at(e,t){var n=e.length;while(n--)if(Rt(e[n][0],t))return n;return-1}function st(e,t){return e&&Ct(t,Jt(t),e)}function ot(e,t,n,r,i,a,o){var c;if(r&&(c=a?r(e,i,a,o):r(e)),void 0!==c)return c;if(!Ht(e))return e;var l=Et(e);if(l){if(c=Lt(e),!t)return _t(e,c)}else{var u=xt(e),p=u==d||u==h;if(Wt(e))return pt(e,t);if(u==m||u==s||p&&!a){if(Y(e))return a?e:{};if(c=Pt(p?{}:e),!t)return It(e,st(c,e))}else{if(!F[u])return a?e:{};c=Tt(e,u,ot,t)}}o||(o=new Ye);var f=o.get(e);if(f)return f;if(o.set(e,c),!l)var g=n?Ot(e):Jt(e);return H(g||e,(function(i,a){g&&(a=i,i=e[a]),it(c,a,ot(i,t,n,r,a,e,o))})),c}function ct(e){return Ht(e)?fe(e):{}}function lt(e,t,n){var r=t(e);return Et(e)?r:K(r,n(e))}function ut(e){return ce.call(e)}function dt(e){if(!Ht(e)||qt(e))return!1;var t=Vt(e)||Y(e)?le:z;return t.test(Bt(e))}function ht(e){if(!zt(e))return ye(e);var t=[];for(var n in Object(e))oe.call(e,n)&&"constructor"!=n&&t.push(n);return t}function pt(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function ft(e){var t=new e.constructor(e.byteLength);return new he(t).set(new he(e)),t}function mt(e,t){var n=t?ft(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function gt(e,t,n){var r=t?n(X(e),!0):X(e);return J(r,V,new e.constructor)}function bt(e){var t=new e.constructor(e.source,q.exec(e));return t.lastIndex=e.lastIndex,t}function vt(e,t,n){var r=t?n(ee(e),!0):ee(e);return J(r,M,new e.constructor)}function yt(e){return Se?Object(Se.call(e)):{}}function wt(e,t){var n=t?ft(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function _t(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}function Ct(e,t,n,r){n||(n={});var i=-1,a=t.length;while(++i<a){var s=t[i],o=r?r(n[s],e[s],s,n,e):void 0;it(n,s,void 0===o?e[s]:o)}return n}function It(e,t){return Ct(e,kt(e),t)}function Ot(e){return lt(e,Jt,kt)}function jt(e,t){var n=e.__data__;return Dt(t)?n["string"==typeof t?"string":"hash"]:n.map}function $t(e,t){var n=G(e,t);return dt(n)?n:void 0}De.prototype.clear=qe,De.prototype["delete"]=ze,De.prototype.get=Be,De.prototype.has=Fe,De.prototype.set=Re,Ae.prototype.clear=Ee,Ae.prototype["delete"]=Ue,Ae.prototype.get=Ne,Ae.prototype.has=We,Ae.prototype.set=Ve,Me.prototype.clear=He,Me.prototype["delete"]=Ke,Me.prototype.get=Je,Me.prototype.has=Qe,Me.prototype.set=Ge,Ye.prototype.clear=Xe,Ye.prototype["delete"]=Ze,Ye.prototype.get=et,Ye.prototype.has=tt,Ye.prototype.set=nt;var kt=be?Z(be,Object):Qt,xt=ut;function Lt(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&oe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Pt(e){return"function"!=typeof e.constructor||zt(e)?{}:ct(pe(e))}function Tt(e,t,n,r){var i=e.constructor;switch(t){case C:return ft(e);case c:case l:return new i(+e);case I:return mt(e,r);case O:case j:case $:case k:case x:case L:case P:case T:case S:return wt(e,r);case p:return gt(e,r,n);case f:case y:return new i(e);case b:return bt(e);case v:return vt(e,r,n);case w:return yt(e)}}function St(e,t){return t=null==t?a:t,!!t&&("number"==typeof e||B.test(e))&&e>-1&&e%1==0&&e<t}function Dt(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function qt(e){return!!ae&&ae in e}function zt(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||re;return e===n}function Bt(e){if(null!=e){try{return se.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ft(e){return ot(e,!0,!0)}function Rt(e,t){return e===t||e!==e&&t!==t}function At(e){return Nt(e)&&oe.call(e,"callee")&&(!me.call(e,"callee")||ce.call(e)==s)}(we&&xt(new we(new ArrayBuffer(1)))!=I||_e&&xt(new _e)!=p||Ce&&xt(Ce.resolve())!=g||Ie&&xt(new Ie)!=v||Oe&&xt(new Oe)!=_)&&(xt=function(e){var t=ce.call(e),n=t==m?e.constructor:void 0,r=n?Bt(n):void 0;if(r)switch(r){case $e:return I;case ke:return p;case xe:return g;case Le:return v;case Pe:return _}return t});var Et=Array.isArray;function Ut(e){return null!=e&&Mt(e.length)&&!Vt(e)}function Nt(e){return Kt(e)&&Ut(e)}var Wt=ve||Gt;function Vt(e){var t=Ht(e)?ce.call(e):"";return t==d||t==h}function Mt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ht(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Kt(e){return!!e&&"object"==typeof e}function Jt(e){return Ut(e)?rt(e):ht(e)}function Qt(){return[]}function Gt(){return!1}n.exports=Ft}).call(this,n("c8ba"),n("62e4")(e))},d26f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("el-form-item",{attrs:{label:"申请人"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.flow.assigneeName,callback:function(t){e.$set(e.form.flow,"assigneeName",t)},expression:"form.flow.assigneeName"}})],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"结束时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),n("el-form-item",{attrs:{label:"请假理由"}},[n("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("批复意见: ["+e._s(t.comment)+"]")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()])],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=n("fc8c"),s={data:function(){return{businessId:"",processInstanceId:"",src:"",flowList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:""}}},created:function(){this.init()},methods:{init:function(){var e=this;this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["leaveDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},o=s,c=n("2877"),l=Object(c["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports},d3e6:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-steps",{attrs:{active:e.active,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:"基本信息"}}),n("el-step",{attrs:{title:"合同信息"}}),e.form&&"1"==e.form["1613704596447_13655"]?n("el-step",{attrs:{title:"免税申请"}}):e._e(),n("el-step",{attrs:{title:"完成"}})],1),n("avue-form",{attrs:{option:e.option},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuForm"},[n("el-button",{attrs:{icon:"el-icon-arrow-left"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("\n        返回\n      ")])],1)],2)],1)},i=[],a={name:"Contract",components:{},data:function(){return{option:{column:[{type:"radio",label:"申报类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613700776603_63360",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"input",label:"项目名称",span:24,display:!0,prop:"1613703737412_39303",prepend:"",required:!0,rules:[{required:!0,message:"项目名称必须填写"}]},{type:"tree",label:"项目计划来源",span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"1613703818707_5272",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=1362248000388214785",required:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613703973711_46186",dicUrl:"/api/blade-system/dict-biz/dictionary?code=ContractCategory",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"input",label:"成交总金额",span:24,display:!0,prop:"1613704131020_74507",labelTip:"请填写合同成交总金额",labelTipPlacement:"right",append:"元",required:!0,rules:[{required:!0,message:"成交总金额必须填写"}]},{type:"radio",label:"是否为军民两用合同",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613704259081_32629",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"tree",label:"登记站",span:24,display:!0,parent:!1,props:{label:"title",value:"value"},prop:"1613704342325_63255",dicUrl:"/api/blade-system/dept/tree",required:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"radio",label:"是否申请免税",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"1613704596447_13655",labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择单选框组"}],dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",required:!0}],labelPosition:"right",labelSuffix:"：",labelWidth:140,gutter:0,menuBtn:!0,submitBtn:!0,submitText:"下一步",emptyBtn:!0,emptyText:"清空",menuPosition:"center"},form:{},active:0,isShow:!1}},computed:{},watch:{},methods:{next:function(){this.active++>2&&(this.active=0)},handleSubmit:function(e,t){console.log("form :>> ",e),this.$message.success("3s后关闭"),setTimeout((function(){t()}),3e3)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},s=a,o=(n("9213"),n("2877")),c=Object(o["a"])(s,r,i,!1,null,"134286f8",null);t["default"]=c.exports},d9a3:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("28a5"),n("456d"),n("ac6a"),n("c5f6"),n("ee1d");function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=n("85f2"),a=n.n(i);function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),a()(e,r.key,r)}}function o(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}var c=function(){function e(){r(this,e)}return o(e,null,[{key:"notEmpty",value:function(e){return!this.isEmpty(e)}},{key:"isUndefined",value:function(e){return null===e||"undefined"===typeof e}},{key:"isEmpty",value:function(e){return null===e||"undefined"===typeof e||"string"===typeof e&&""===e&&"undefined"!==e}},{key:"toInt",value:function(e,t){if(this.isEmpty(e))return void 0===t?-1:t;var n=parseInt(e,0);return Number.isNaN(n)?void 0===t?-1:t:n}},{key:"toFormData",value:function(e){var t=new FormData;return Object.keys(e).forEach((function(n){t.append(n,Array.isArray(e[n])?e[n].join(","):e[n])})),t}},{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return e?e.format(t):null}},{key:"join",value:function(e){return e?e.join(","):""}},{key:"split",value:function(e){return e?String(e).split(","):""}}]),e}()},dd4b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[n("el-row",[n("el-col",{attrs:{span:24}},[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1),n("basic-container",[n("el-row",[n("el-col",{attrs:{span:24}},[n("avue-crud",{ref:"crudChild",attrs:{option:e.option,"table-loading":e.loading,data:e.dataChild,page:e.pageChild,permission:e.permissionList,"before-open":e.beforeOpenChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n            ")]):e._e()],1)],2)],1)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),s=n("7754"),o=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{parentId:0,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,pageParent:{pageSize:5,pageSizes:[5,10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:5,pageSizes:[5,10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,height:300,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]}}},computed:l(l({},Object(o["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoadParent(r.pageParent),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(s["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleRowClick:function(e){this.parentId=e.id,this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.page,this.query)},rowSaveChild:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoadChild(r.pageChild),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,r){var i=this;Object(s["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageChild.total=n.total,t.dataChild=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,h=n("2877"),p=Object(h["a"])(d,r,i,!1,null,null,null);t["default"]=p.exports},eaa2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-form",{attrs:{option:e.option},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("fc8c");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:function(){return{form:{},option:{group:[{icon:"el-icon-info",label:"请假基础信息",prop:"group1",column:[{label:"审批人员",prop:"taskUser",type:"select",dicUrl:"/api/blade-user/user-list",props:{label:"account",value:"id"},span:24,rules:[{required:!0,message:"请选择审批人员",trigger:"blur"}]},{label:"开始时间",prop:"startTime",type:"datetime",valueFormat:"yyyy-MM-dd HH:mm:ss",rules:[{required:!0,message:"请选择开始时间",trigger:"blur"}]},{label:"结束时间",prop:"endTime",type:"datetime",valueFormat:"yyyy-MM-dd HH:mm:ss",rules:[{required:!0,message:"请选择结束时间",trigger:"blur"}]},{label:"请假理由",prop:"reason",type:"textarea",span:24,rules:[{required:!0,message:"请输入请假理由",trigger:"blur"}]}]}]}}},methods:{handleSubmit:function(){var e=this,t=c({processDefinitionId:this.$route.params.processDefinitionId},this.form);Object(s["leaveProcess"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(n.msg||"提交失败")}))}}},u=l,d=n("2877"),h=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},ef4a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[e.reasonList&&e.reasonList.length?n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("\n                备注: ["+e._s(t.comment.split("###$$$")[0]||"无")+"]\n              ")]):e._e(),e.computedReason(t)?n("p",[e._v("\n                审批意见: ["+e._s(e.computedReason(t))+"]\n              ")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()]):e._e()],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=(n("7514"),n("28a5"),n("738e")),s=n("8ddc"),o=n("c832"),c=n.n(o),l={data:function(){return{businessId:"",processInstanceId:"",src:"",flowList:[],reasonList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:""}}},created:function(){this.init()},methods:{init:function(){var e=this;this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(s["getDictionary"])({code:"reason"}).then((function(t){e.reasonList=t.data.data})),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["registrationDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.go(-1)},computedReason:function(e){if(!c()(e,"comment"))return"";var t=e.comment.split("###$$$")[1],n=this.reasonList.find((function(e){return e.dictKey==t}));return c()(n,"dictValue")}}},u=l,d=n("2877"),h=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},f6b7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-form",{attrs:{option:e.option},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("375c");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:function(){return{form:{},option:{group:[{icon:"el-icon-info",label:"请假基础信息",prop:"group1",column:[{label:"审批人员",prop:"taskUser",type:"select",dicUrl:"/api/blade-user/user-list",props:{label:"account",value:"id"},span:24,rules:[{required:!0,message:"请选择审批人员",trigger:"blur"}]},{label:"单位ID",prop:"reason",type:"textarea",span:24,rules:[{required:!0,message:"请输入请假理由",trigger:"blur"}]}]}]}}},methods:{handleSubmit:function(){var e=this,t=c({processDefinitionId:this.$route.params.processDefinitionId},this.form);Object(s["applyProcess"])(t).then((function(t){var n=t.data;n.success?(e.$message.success(n.msg),e.$router.$avueRouter.closeTag(),e.$router.push({path:"/work/start"})):e.$message.error(n.msg||"提交失败")}))}}},u=l,d=n("2877"),h=Object(d["a"])(u,r,i,!1,null,null,null);t["default"]=h.exports},fc18:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"end"}},[n("el-form-item",[n("el-button",{on:{click:e.handleCancel}},[e._v("关闭")])],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审批信息")])]),n("el-form-item",{attrs:{label:"申请人"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.flow.assigneeName,callback:function(t){e.$set(e.form.flow,"assigneeName",t)},expression:"form.flow.assigneeName"}})],1),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"开始时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1)],1),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"结束时间"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.endTime,callback:function(t){e.$set(e.form,"endTime",t)},expression:"form.endTime"}})],1)],1)],1),n("el-form-item",{attrs:{label:"请假理由"}},[n("el-input",{attrs:{disabled:!0,type:"textarea"},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程信息")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("el-timeline",e._l(e.flowList,(function(t){return n("el-timeline-item",{key:t.id,attrs:{timestamp:t.createTime,placement:"top"}},[n("el-card",{attrs:{shadow:"hover"}},[n("p",[e._v("\n                "+e._s(t.assigneeName)+" 在 ["+e._s(t.createTime)+"] 开始处理\n                ["+e._s(t.historyActivityName)+"] 环节\n              ")]),""!==t.historyActivityDurationTime?n("p",[e._v("\n                任务历时 ["+e._s(t.historyActivityDurationTime)+"]\n              ")]):e._e(),""!==t.comment?n("p",[e._v("批复意见: ["+e._s(t.comment)+"]")]):e._e(),""!==t.endTime?n("p",[e._v("结束时间: ["+e._s(t.endTime)+"]")]):e._e()])],1)})),1)],1)],1),n("el-card",{attrs:{shadow:"hover"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("流程跟踪")])]),n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("img",{attrs:{src:e.src,alt:"design"}})])],1)],1)],1)},i=[],a=n("375c"),s={data:function(){return{businessId:"",processInstanceId:"",src:"",flowList:[],form:{flow:{assigneeName:""},startTime:"",endTime:"",reason:""}}},created:function(){this.init()},methods:{init:function(){var e=this;this.processInstanceId=this.$route.params.processInstanceId,this.businessId=this.$route.params.businessId,this.src="/api/blade-flow/process/diagram-view?processInstanceId=".concat(this.$route.params.processInstanceId),Object(a["historyFlowList"])(this.processInstanceId).then((function(t){var n=t.data;n.success&&(e.flowList=n.data)})),Object(a["applyDetail"])(this.businessId).then((function(t){var n=t.data;n.success&&(e.form=n.data)}))},handleCancel:function(){this.$router.$avueRouter.closeTag(),this.$router.push({path:"/work/start"})}}},o=s,c=n("2877"),l=Object(c["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports}}]);