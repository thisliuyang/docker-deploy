(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d7cf63a","chunk-5438fe5b","chunk-3fac66fd","chunk-0c73f0ed","chunk-2d0e4caf","chunk-2d0df40a"],{"00ad":function(e,t,n){"use strict";n("c17b")},"0413":function(e,t,n){},"069c":function(e,t,n){"use strict";n("de8c")},"0983":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}},{key:"menu",fn:function(t){return[n("el-button",{attrs:{type:"text",icon:"el-icon-check",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleAdd(t.row,t.index)}}},[e._v("新增子项\n      ")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("7754"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{tip:!1,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogWidth:880,column:[{label:"字典编号",prop:"code",search:!0,span:24,rules:[{required:!0,message:"请输入字典编号",trigger:"blur"}]},{label:"字典名称",prop:"dictValue",search:!0,align:"center",rules:[{required:!0,message:"请输入字典名称",trigger:"blur"}]},{label:"上级字典",prop:"parentId",type:"tree",dicData:[],hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级字典",trigger:"click"}]},{label:"字典键值",prop:"dictKey",type:"number",rules:[{required:!0,message:"请输入字典键值",trigger:"blur"}]},{label:"字典排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入字典排序",trigger:"blur"}]},{label:"封存",prop:"isSealed",type:"select",dicData:[{label:"否",value:0},{label:"是",value:1}],slot:!0,rules:[{required:!0,message:"请选择封存",trigger:"blur"}]},{label:"字典备注",prop:"remark",search:!0,hide:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),viewBtn:this.vaildData(this.permission.dict_view,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){var e=this;Object(o["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},methods:{handleAdd:function(e){this.$refs.crud.value.code=e.code,this.$refs.crud.value.parentId=e.id,this.$refs.crud.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code,t.addDisabled=!0),"parentId"===t.prop&&(t.value=e.id,t.addDisabled=!0)})),this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDict"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.$refs.crud.tableForm={},this.$refs.crud.value.code="",this.$refs.crud.value.parentId="",this.$refs.crud.value.addDisabled=!1,this.$refs.crud.option.column.filter((function(e){"code"===e.prop&&(e.value="",e.addDisabled=!1),"parentId"===e.prop&&(e.value="",e.addDisabled=!1)})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"09e0f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",e._g(e._b({attrs:{permission:e.permissionList,page:e.page},on:{"update:page":function(t){e.page=t}},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},"avue-crud",e.bindVal,!1),e.onEvent),[n("template",{slot:"menuLeft"},[e.permission.param_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=window.$crudCommon({data:function(){return{}},computed:{permissionList:function(){return{addBtn:this.vaildData(this.permission.param_add,!1),viewBtn:this.vaildData(this.permission.param_view,!1),delBtn:this.vaildData(this.permission.param_delete,!1),editBtn:this.vaildData(this.permission.param_edit,!1)}}},methods:{}},{name:"system/param"}),o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"0b72":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看")]),n("el-button",{attrs:{icon:"el-icon-download",type:r,size:i},on:{click:function(t){return e.handleDownload(a)}}},[e._v("下载")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!0,searchMenuSpan:6,menuWidth:200,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!0,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"办件编号",prop:"contractCode",minWidth:160,overHidden:!0,search:!0,rules:[]},{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,search:!0,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",search:!0,searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],hide:!0,prop:"isFree",dicData:[{label:"是",value:1},{label:"否",value:0}]},{type:"radio",label:"是否大额合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否大额合同"}],prop:"isLarge",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{type:"radio",label:"是否涉外合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否涉外合同"}],prop:"isOutside",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{label:"状态",prop:"contractStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"创建时间",prop:"createTime",type:"datetime",searchSpan:10,minWidth:150,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[]}},computed:h(h({},Object(c["b"])(["permission","userInfo"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData()},methods:{initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o}))},handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListDowload:function(){var e=this;0!==this.selectionList.length?this.selectionList.forEach((function(t){e.contractDownload(t)})):this.$message.warning("请选择至少一条数据")},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"edit"}})},handleView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail"}})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=this.query.applyTime,i=h(h({},n),{},{descs:"create_time",isClassified:0});r&&(i=h(h({},n),{},{applyTime_datege:r[0],applyTime_datelt:r[1]},this.query),i.applyTime=null),Object(s["getList"])(e.currentPage,e.pageSize,i).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},f=g,m=n("2877"),b=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},"0c09":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.indexitemsgatherdetails_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("6b34"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"采集时间",prop:"gatherTime",rules:[{required:!0,message:"请输入采集时间",trigger:"blur"}]},{label:"采集个数",prop:"gatherCount",rules:[{required:!0,message:"请输入采集个数",trigger:"blur"}]},{label:"采集年份",prop:"gatherYear",rules:[{required:!0,message:"请输入采集年份",trigger:"blur"}]},{label:"是否成功",prop:"status",rules:[{required:!0,message:"请输入备注",trigger:"blur"}]},{label:"采集说明",prop:"remark",rules:[{required:!0,message:"请输入备注",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.indexitemsgatherdetails_add,!1),viewBtn:this.vaildData(this.permission.indexitemsgatherdetails_view,!1),delBtn:this.vaildData(this.permission.indexitemsgatherdetails_delete,!1),editBtn:this.vaildData(this.permission.indexitemsgatherdetails_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"0d4d":function(e,t,n){},"0ed6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(n){return n.stopPropagation(),e.handleWork(t.row)}}},[e._v("审核\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check",disabled:t&&t.row&&1===t.row.contractStatus},on:{click:function(n){return n.stopPropagation(),e.handleHistory(t.row)}}},[e._v("审核意见\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(n){return n.stopPropagation(),e.handleContractDetail(t.row)}}},[e._v("合同详情\n      ")])]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-check",plain:""},on:{click:e.handleCheck}},[e._v("批量审核\n      ")])],1)],2),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:e.handleContractClose}}):e._e()],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"批量审核","append-to-body":"",visible:e.checkIsShow},on:{"update:visible":function(t){e.checkIsShow=t}}},[e.checkIsShow?n("avue-form",{ref:"checkForm",attrs:{option:e.checkOption},model:{value:e.checkForm,callback:function(t){e.checkForm=t},expression:"checkForm"}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.checkIsShow=!1}}},[e._v("关 闭")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleCheckSubmit}},[e._v("确 定")])],1)],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("7514"),n("28a5"),n("6b54"),n("87b3"),n("96cf"),n("3b8d")),o=(n("6762"),n("2fdb"),n("ac6a"),n("bd86")),s=n("2f62"),c=n("1e69"),l=n("7208"),u=n("096f"),d=n("738e"),p=n("c832"),h=n.n(p),g=n("8ddc"),f=n("4ba7");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v={data:function(){return{reasonList:[],contractInfoIsShow:!1,contractInfoQuery:{},form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!0,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:220,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",hide:!0,width:100},{label:"项目名称",prop:"projectName",bind:"contractList.projectName",overHidden:!0,minWidth:200},{label:"合同登记号",bind:"contractList.contractRegistrationNumber",minWidth:160},{label:"办件编号",bind:"contractList.contractCode",prop:"contractCode",minWidth:160,hide:!1,overHidden:!0,search:!1,rules:[]},{type:"radio",label:"申报类型",span:24,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"number",value:2,dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",size:"medium",required:!0,bind:"contractList.declareType",rules:[{required:!0,message:"请选择申报类型"}]},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/dictionary?code=ContractCategory",bind:"contractList.contractType",rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"项目计划来源",searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",bind:"contractList.projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{label:"申请时间",prop:"createTime",width:165}]},data:[],checkIsShow:!1,checkForm:{},checkOption:{disabled:!1,labelPosition:"right",labelSuffix:"：",labelWidth:100,gutter:0,menuBtn:!0,submitBtn:!1,emptyBtn:!1,emptyText:"清空",menuPosition:"center",column:[{type:"radio",label:"审批结果",dicData:[{label:"受理",value:"ok"},{label:"返回修改",value:"fail"},{label:"不予受理",value:"invalid"}],span:24,cascaderItem:[],display:!0,prop:"result",rules:[{required:!0,message:"请选择审批结果"}]},{type:"select",label:"审批意见",dicUrl:"/api/blade-system/dict-biz/dictionary?code=reason",props:{label:"dictValue",value:"dictKey"},span:24,cascaderItem:[],display:!0,prop:"reason",rules:[{required:!1,message:"请选择审批意见"}]},{type:"textarea",label:"备注",span:24,display:!0,prop:"comment"}]},flowList:[],flowListIsShow:!1,flowListOption:f["flowListOption"]}},components:{contractInfo:u["default"]},computed:b(b({},Object(s["b"])(["permission","flowRoutes","userInfo"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),watch:{"checkForm.result":{handler:function(e){var t=this.findObject(this.checkOption.column,"reason");t.rules[0].required="ok"!==e},deep:!0}},methods:{init:function(){var e=this;Object(g["getDictionary"])({code:"reason"}).then((function(t){var n=e.findObject(e.flowListOption.column,"reason");n.dicData=h()(t,"data.data",[]),e.reasonList=t.data.data}));var t=this.userInfo.role_id;if(t.includes("1375342244055232513")){var n=this.findObject(this.option.column,"contractCode");n.hide=!0}},searchReset:function(){this.query={},this.onLoad(this.page)},handleContractClose:function(){this.contractInfoIsShow=!1,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleCheckSubmit:function(){var e=this;this.$refs.checkForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=27;break}e.loading=!0,t.prev=2,i=e.selectionList.map((function(t){return{taskId:t.taskId,processInstanceId:t.processInstanceId,flag:e.checkForm.result,comment:e.checkForm.comment+"###$$$"+e.checkForm.reason,contractId:t.contractId}})),a=0;case 5:if(!(a<i.length)){t.next=11;break}return t.next=8,Object(d["completeTask"])(i[a]);case 8:a++,t.next=5;break;case 11:e.selectionClear(),e.checkIsShow=!1,e.$message.success("审批成功"),e.onLoad(e.page),e.checkForm={},t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),e.message.error(t.t0.toString());case 21:return t.prev=21,e.loading=!1,r(),t.finish(21);case 25:t.next=28;break;case 27:e.$message.warning("请先填写批复意见");case 28:case"end":return t.stop()}}),t,null,[[2,18,21,25]])})));return function(e,n){return t.apply(this,arguments)}}())},handleCheck:function(){if(0===this.selectionList.length)return this.$message.warning("请选择至少一条数据");this.checkIsShow=!0},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleContractDetail:function(e){this.contractInfoQuery={contractId:e.contractId,type:"admin-edit"},this.contractInfoIsShow=!0},handleHistory:function(e){var t=this;Object(d["historyFlowList"])(e.processInstanceId).then((function(e){var n=h()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))},computedReason:function(e){if(!h()(e,"comment"))return"";var t=e.comment.split("###$$$")[1],n=this.reasonList.find((function(e){return e.dictKey==t}));return h()(n,"dictValue")},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=b(b({},this.query),{},{category:"flow_3"});this.loading=!0,Object(c["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}},created:function(){this.init()}},y=v,w=(n("2d0d"),n("2877")),O=Object(w["a"])(y,r,i,!1,null,"41f852ed",null);t["default"]=O.exports},"0f19":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:9}},[n("div",{staticClass:"box"},[n("el-scrollbar",[n("basic-container",[n("avue-tree",{attrs:{option:e.treeOption,data:e.treeData},on:{"node-click":e.nodeClick}})],1)],1)],1)]),n("el-col",{attrs:{span:15}},[n("basic-container",[n("el-button-group",[e.permission.region_add?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addChildren}},[e._v("新增下级")]):e._e(),e.permission.region_delete?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删除")]):e._e(),e.permission.region_import?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-upload2"},on:{click:e.handleImport}},[e._v("导入")]):e._e(),e.permission.region_export?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")]):e._e(),e.permission.region_debug?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-video-play"},on:{click:e.handleDebug}},[e._v("调试")]):e._e()],1)],1),n("basic-container",[n("avue-form",{ref:"form",attrs:{option:e.regionOption},on:{submit:e.handleSubmit},scopedSlots:e._u([{key:"code",fn:function(t){return[n("el-input",{attrs:{placeholder:"请输入 区划子编号"},model:{value:e.regionForm.subCode,callback:function(t){e.$set(e.regionForm,"subCode",t)},expression:"regionForm.subCode"}},[n("template",{slot:"prepend"},[e._v(e._s(e.regionForm.parentCode))])],2)]}}]),model:{value:e.regionForm,callback:function(t){e.regionForm=t},expression:"regionForm"}}),n("el-dialog",{attrs:{title:"行政区划数据导入","append-to-body":"",visible:e.excelBox,width:"555px"},on:{"update:visible":function(t){e.excelBox=t}}},[n("avue-form",{attrs:{option:e.excelOption,"upload-after":e.uploadAfter},model:{value:e.excelForm,callback:function(t){e.excelForm=t},expression:"excelForm"}},[n("template",{slot:"excelTemplate"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleTemplate}},[e._v("\n              点击下载"),n("i",{staticClass:"el-icon-download el-icon--right"})])],1)],2)],1),n("el-dialog",{attrs:{title:"行政区划数据调试","append-to-body":"",visible:e.debugBox,width:"350px"},on:{"update:visible":function(t){e.debugBox=t}}},[n("avue-form",{attrs:{option:e.debugOption},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("7f7f"),n("a481"),n("ac6a"),n("bd86")),o=n("5a04"),s=n("2f62"),c=n("c54a"),l=n("0a5a");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{topCode:"00",treeCode:"",treeParentCode:"",treeData:[],treeOption:{nodeKey:"id",lazy:!0,treeLoad:function(e,t){var n=0===e.level?"00":e.data.id;Object(o["getLazyTree"])(n).then((function(e){t(e.data.data.map((function(e){return d(d({},e),{},{leaf:!e.hasChildren})})))}))},addBtn:!1,menu:!1,size:"small",props:{labelText:"标题",label:"title",value:"value",children:"children"}},regionForm:{},regionOption:{labelWidth:100,column:[{label:"父区划编号",prop:"parentCode",span:24,disabled:!0,rules:[{required:!0,message:"请输入父区划编号",trigger:"blur"}]},{label:"父区划名称",prop:"parentName",span:24,disabled:!0},{label:"区划编号",prop:"code",formslot:!0,span:24,rules:[{required:!0,message:"请输入区划编号",trigger:"blur"}]},{label:"区划子编号",prop:"subCode",display:!1},{label:"区划名称",prop:"name",span:24,rules:[{required:!0,message:"请输入区划名称",trigger:"blur"}]},{label:"区划等级",prop:"regionLevel",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=region",props:{label:"dictValue",value:"dictKey"},dataType:"number",span:24,rules:[{required:!0,message:"请选择区划等级",trigger:"blur"}]},{label:"区划排序",prop:"sort",type:"number",span:24,rules:[{required:!0,message:"请输入区划排序",trigger:"blur"}]},{label:"区划备注",prop:"remark",type:"textarea",minRows:6,span:24}]},excelBox:!1,excelForm:{},excelOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"模板上传",prop:"excelFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 .xls,.xlsx 标准格式文件",action:"/api/blade-system/region/import-region"},{label:"数据覆盖",prop:"isCovered",type:"switch",align:"center",width:80,dicData:[{label:"否",value:0},{label:"是",value:1}],value:0,slot:!0,rules:[{required:!0,message:"请选择是否覆盖",trigger:"blur"}]},{label:"模板下载",prop:"excelTemplate",formslot:!0,span:24}]},debugBox:!1,debugForm:{},debugOption:{labelWidth:50,submitBtn:!1,emptyBtn:!1,column:[{label:"省份",prop:"province",type:"select",props:{label:"name",value:"code"},cascaderItem:["city","district"],dicUrl:"/api/blade-system/region/select",span:24},{label:"地市",prop:"city",type:"select",props:{label:"name",value:"code"},dicFlag:!1,dicUrl:"/api/blade-system/region/select?code={{key}}",span:24},{label:"区县",prop:"district",type:"select",props:{label:"name",value:"code"},dicFlag:!1,dicUrl:"/api/blade-system/region/select?code={{key}}",span:24}]}}},watch:{"regionForm.subCode":function(){this.regionForm.code=this.regionForm.parentCode+this.regionForm.subCode},"excelForm.isCovered":function(){if(""!==this.excelForm.isCovered){var e=this.findObject(this.excelOption.column,"excelFile");e.action="/api/blade-system/region/import-region?isCovered=".concat(this.excelForm.isCovered)}}},computed:d(d({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.region_add,!1),viewBtn:this.vaildData(this.permission.region_view,!1),delBtn:this.vaildData(this.permission.region_delete,!1),editBtn:this.vaildData(this.permission.region_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initTree:function(){var e=this;this.treeData=[],Object(o["getLazyTree"])(this.topCode).then((function(t){e.treeData=t.data.data.map((function(e){return d(d({},e),{},{leaf:!e.hasChildren})}))}))},nodeClick:function(e){var t=this,n=this.findObject(this.regionOption.column,"parentCode");n.disabled=!0,this.treeCode=e.id,this.treeParentCode=e.parentId,Object(o["getDetail"])(this.treeCode).then((function(e){t.regionForm=e.data.data,t.regionForm.subCode=t.regionForm.code.replace(t.regionForm.parentCode,"")}))},addChildren:function(){Object(c["c"])(this.regionForm.code)||Object(c["c"])(this.regionForm.name)?this.$message.warning("请先选择一项区划"):(this.regionForm.parentCode=this.regionForm.code,this.regionForm.parentName=this.regionForm.name,this.regionForm.code="",this.regionForm.subCode="",this.regionForm.name="",this.regionForm.regionLevel=5===this.regionForm.regionLevel?5:this.regionForm.regionLevel+1)},handleSubmit:function(e,t,n){var r=this,i=e.parentCode===this.topCode?"":e.parentCode;e.code=i+e.subCode,Object(o["submit"])(e).then((function(){r.$message({type:"success",message:"操作成功!"}),r.initTree(),r.regionForm.subCode="",r.$refs.form.resetForm(),t()}),(function(e){n(),window.console.log(e)}))},handleDelete:function(){var e=this;Object(c["c"])(this.regionForm.code)?this.$message.warning("请先选择一项区划"):this.$confirm("确定将 [".concat(this.regionForm.name,"] 数据删除?"),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.treeCode)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.initTree(),e.regionForm.subCode="",e.$refs.form.resetForm()}))},uploadAfter:function(e,t,n,r){window.console.log(r),this.excelBox=!1,this.initTree(),t()},handleDebug:function(){this.debugBox=!0},handleImport:function(){this.excelBox=!0},handleExport:function(){var e=this;this.$confirm("是否导出行政区划数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("/api/blade-system/region/export-region?".concat(e.website.tokenHeader,"=").concat(Object(l["a"])()))}))},handleTemplate:function(){window.open("/api/blade-system/region/export-template?".concat(this.website.tokenHeader,"=").concat(Object(l["a"])()))}}},h=p,g=(n("8d2c"),n("2877")),f=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},"11b2":function(e,t,n){"use strict";n("f6d7")},1226:function(e,t,n){"use strict";n("b8dd")},"12ca":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.announcementmanagement_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("5f09"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"公告类型",prop:"announcementType",rules:[{required:!0,message:"请输入公告类型",trigger:"blur"}]},{label:"公告标题",prop:"announcementTitle",rules:[{required:!0,message:"请输入公告标题",trigger:"blur"}]},{label:"公告内容",prop:"announcementText",rules:[{required:!0,message:"请输入公告内容",trigger:"blur"}]},{label:"附件",prop:"accessory",rules:[{required:!0,message:"请输入附件",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.announcementmanagement_add,!1),viewBtn:this.vaildData(this.permission.announcementmanagement_view,!1),delBtn:this.vaildData(this.permission.announcementmanagement_delete,!1),editBtn:this.vaildData(this.permission.announcementmanagement_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"13f7":function(e,t,n){},"14a7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"accountNumber",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.accountNumber>0?r.accountNumber:"不限制"))])]}},{key:"expireTime",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.expireTime?r.expireTime:"不限制"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.tenant_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.userInfo.role_name.includes("administrator")?n("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-setting"},on:{click:e.handleSetting}},[e._v("授权配置\n      ")]):e._e(),e.userInfo.role_name.includes("administrator")?n("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-coin"},on:{click:e.handleDatasource}},[e._v("数据源配置\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"租户授权配置","append-to-body":"",visible:e.box,width:"450px"},on:{"update:visible":function(t){e.box=t}}},[n("avue-form",{attrs:{option:e.settingOption},on:{submit:e.handleSubmit},model:{value:e.settingForm,callback:function(t){e.settingForm=t},expression:"settingForm"}})],1),n("el-dialog",{attrs:{title:"租户数据源配置","append-to-body":"",visible:e.datasourceBox,width:"450px"},on:{"update:visible":function(t){e.datasourceBox=t}}},[n("avue-form",{attrs:{option:e.datasourceOption},on:{submit:e.handleDatasourceSubmit},model:{value:e.datasourceForm,callback:function(t){e.datasourceForm=t},expression:"datasourceForm"}})],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("ccbe"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,box:!1,datasourceBox:!1,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"租户ID",prop:"tenantId",width:100,search:!0,addDisplay:!1,editDisplay:!1,span:24,rules:[{required:!0,message:"请输入租户ID",trigger:"blur"}]},{label:"租户名称",prop:"tenantName",search:!0,width:180,span:24,rules:[{required:!0,message:"请输入参数名称",trigger:"blur"}]},{label:"联系人",prop:"linkman",width:100,search:!0,rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]},{label:"联系电话",prop:"contactNumber",width:150},{label:"联系地址",prop:"address",span:24,minRows:2,type:"textarea",hide:!0},{label:"账号额度",prop:"accountNumber",width:90,slot:!0,addDisplay:!1,editDisplay:!1},{label:"过期时间",prop:"expireTime",width:180,slot:!0,addDisplay:!1,editDisplay:!1},{label:"绑定域名",prop:"domain",span:24},{label:"系统背景",prop:"backgroundUrl",type:"upload",listType:"picture-img",action:"/api/blade-resource/oss/endpoint/put-file",propsHttp:{res:"data",url:"link"},hide:!0,span:24}]},data:[],settingForm:{},settingOption:{column:[{label:"账号额度",prop:"accountNumber",type:"number",span:24},{label:"过期时间",prop:"expireTime",type:"date",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",span:24}]},datasourceForm:{},datasourceOption:{column:[{label:"数据源",prop:"datasourceId",search:!0,span:24,type:"select",dicUrl:"/api/blade-develop/datasource/select",props:{label:"name",value:"id"},rules:[{required:!0,message:"请选择数据源",trigger:"blur"}]}]}}},computed:l(l({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.tenant_add,!1),viewBtn:this.vaildData(this.permission.tenant_view,!1),delBtn:this.vaildData(this.permission.tenant_delete,!1),editBtn:this.vaildData(this.permission.tenant_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},tenantId:function(){return this.selectionList[0].tenantId}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},beforeOpen:function(e,t){var n=this;["view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){var t=e.data.data;t.accountNumber>0||(t.accountNumber="不限制"),t.expireTime||(t.expireTime="不限制"),n.form=t})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleSetting:function(){var e=this;0!==this.selectionList.length?(1===this.selectionList.length?Object(o["getDetail"])(this.selectionList[0].id).then((function(t){var n=t.data.data;e.settingForm.accountNumber=n.accountNumber,e.settingForm.expireTime=n.expireTime})):(this.settingForm.accountNumber=-1,this.settingForm.expireTime=""),this.box=!0):this.$message.warning("请选择至少一条数据")},handleDatasource:function(){var e=this;0!==this.selectionList.length?1===this.selectionList.length?(Object(o["getDetail"])(this.selectionList[0].id).then((function(t){var n=t.data.data;e.datasourceForm.datasourceId=n.datasourceId})),this.datasourceBox=!0):this.$message.warning("只能选择一条数据"):this.$message.warning("请选择至少一条数据")},handleSubmit:function(e,t,n){var r=this;Object(o["setting"])(this.ids,e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"配置成功!"}),t(),r.box=!1}),(function(e){window.console.log(e),n()}))},handleDatasourceSubmit:function(e,t,n){var r=this;Object(o["datasource"])(this.tenantId,e.datasourceId).then((function(){r.$message({type:"success",message:"配置成功!"}),t(),r.datasourceBox=!1}),(function(e){window.console.log(e),n()}))},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"156f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.post_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("74b1"),s=n("2f62"),c=n("1ca4");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",addDisplay:!1,editDisplay:!1,viewDisplay:c["a"].tenantMode,span:24,props:{label:"tenantName",value:"tenantId"},hide:!c["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"岗位类型",prop:"category",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=post_category",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,search:!0,rules:[{required:!0,message:"请选择岗位类型",trigger:"blur"}]},{label:"岗位编号",prop:"postCode",search:!0,rules:[{required:!0,message:"请输入岗位编号",trigger:"blur"}]},{label:"岗位名称",prop:"postName",search:!0,rules:[{required:!0,message:"请输入岗位名称",trigger:"blur"}]},{label:"岗位排序",prop:"sort",type:"number",rules:[{required:!0,message:"请输入岗位排序",trigger:"blur"}]},{label:"岗位描述",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[]}},computed:u(u({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.post_add,!1),viewBtn:this.vaildData(this.permission.post_view,!1),delBtn:this.vaildData(this.permission.post_delete,!1),editBtn:this.vaildData(this.permission.post_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},"1dec":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.indexitemsgather_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("addc"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"指标项类型",prop:"indexItemsType",search:!0,rules:[{required:!0,message:"请输入指标项类型",trigger:"blur"}]},{label:"具体指标项",search:!0,prop:"indexItemsDetails",rules:[{required:!0,message:"请输入具体指标项",trigger:"blur"}]},{label:"数据初始年份",prop:"initialYear",rules:[{required:!0,message:"请输入数据初始年份",trigger:"blur"}]},{label:"原始数据年份",prop:"originalYear",rules:[{required:!0,message:"请输入原始数据年份",trigger:"blur"}]},{label:"清洗数据年份",prop:"rinseYear",rules:[{required:!0,message:"请输入清洗数据年份",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.indexitemsgather_add,!1),viewBtn:this.vaildData(this.permission.indexitemsgather_view,!1),delBtn:this.vaildData(this.permission.indexitemsgather_delete,!1),editBtn:this.vaildData(this.permission.indexitemsgather_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"1efb":function(e,t,n){"use strict";n("68c9")},2004:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("请打开浏览器控制台，然后点击下面的按钮")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:e.handleNewError}},[e._v("触发一个错误\n  ")])],1)},i=[],o={methods:{handleNewError:function(){window.console.log(a)}}},s=o,c=n("2877"),l=Object(c["a"])(s,r,i,!1,null,null,null);t["default"]=l.exports},2257:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-video-play",size:"small"},on:{click:function(n){return e.handleDebug(t.row)}}},[e._v("调试\n      ")]):e._e(),e.permission.sms_enable?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-check",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleEnable(t.row)}}},[e._v("启用\n      ")]):e._e()]}},{key:"status",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.statusName))])]}},{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.sms_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"手机短信发送调试","append-to-body":"",visible:e.box,width:"550px"},on:{"update:visible":function(t){e.box=t}}},[n("avue-form",{attrs:{option:e.debugOption},on:{submit:e.handleSend},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("2499"),s=n("2f62"),c=n("d9a3");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,box:!1,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:300,labelWidth:100,dialogWidth:880,dialogClickModal:!1,column:[{label:"分类",type:"radio",value:1,span:24,width:100,searchLabelWidth:50,row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=sms",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请选择分类",trigger:"blur"}]},{label:"资源编号",prop:"smsCode",span:24,width:200,search:!0,rules:[{required:!0,message:"请输入资源编号",trigger:"blur"}]},{label:"模版ID",prop:"templateId",span:24,width:200,search:!0,rules:[{required:!0,message:"请输入模版ID",trigger:"blur"}]},{label:"accessKey",prop:"accessKey",span:24,overHidden:!0,rules:[{required:!0,message:"请输入accessKey",trigger:"blur"}]},{label:"secretKey",prop:"secretKey",span:24,overHidden:!0,display:!0,hide:!0,rules:[{required:!0,message:"请输入secretKey",trigger:"blur"}]},{label:"regionId",prop:"regionId",span:24,value:"cn-hangzhou",hide:!0,display:!1},{label:"短信签名",prop:"signName",span:24,width:200,rules:[{required:!0,message:"请输入短信签名",trigger:"blur"}]},{label:"是否启用",prop:"status",span:24,width:80,align:"center",slot:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1},{label:"备注",prop:"remark",span:24,hide:!0}]},data:[],debugForm:{code:""},debugOption:{submitText:"发送",column:[{label:"资源编号",prop:"code",disabled:!0,span:24},{label:"发送手机",prop:"phones",span:24},{label:"发送参数",prop:"params",span:24,placeholder:"例: {'code':2333,'title':'通知标题'}"}]}}},watch:{"form.category":function(){var e=c["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"templateId"===t.prop&&(t.label=1===e?"模版内容":"模版ID"),"accessKey"===t.prop&&(t.label=1===e?"apiKey":4===e?"appId":"accessKey"),"secretKey"===t.prop&&(t.display=1!==e,t.label=4===e?"appKey":"secretKey"),"regionId"===t.prop&&(3===e?(t.display=!0,t.value="cn-hangzhou"):t.display=!1)}))}},computed:u(u({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.sms_add,!1),viewBtn:this.vaildData(this.permission.sms_view,!1),delBtn:this.vaildData(this.permission.sms_delete,!1),editBtn:this.vaildData(this.permission.sms_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleEnable:function(e){var t=this;this.$confirm("是否确定启用这条配置?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["enable"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection()})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDebug:function(e){this.box=!0,this.debugForm.code=e.smsCode},handleSend:function(e,t,n){var r=this;Object(o["send"])(e.code,e.phones,e.params).then((function(e){r.$message({type:"success",message:"发送成功!"}),t(),window.console.log(e),r.box=!1}),(function(e){window.console.log(e),n()}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},2287:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.work_send_detail?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDetail(t.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_send_follow?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}},{key:"processIsFinished",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s("finished"===r.processIsFinished?"已完成":"未完成"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"流程进度",prop:"processIsFinished",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:u(u({},Object(o["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},this.query),{},{category:n.category?Object(c["a"])(n.category):null});this.loading=!0,Object(s["sendList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("2611"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},2457:function(e,t,n){"use strict";t["a"]=[{label:"通用图标",list:["iconfont iconicon_roundadd","iconfont iconicon_compile","iconfont iconicon_glass","iconfont iconicon_roundclose","iconfont iconicon_roundreduce","iconfont iconicon_delete","iconfont iconicon_shakehands","iconfont iconicon_task_done","iconfont iconicon_voipphone","iconfont iconicon_safety","iconfont iconicon_work","iconfont iconicon_study","iconfont iconicon_task","iconfont iconicon_subordinate","iconfont iconicon_star","iconfont iconicon_setting","iconfont iconicon_sms","iconfont iconicon_share","iconfont iconicon_secret","iconfont iconicon_scan_namecard","iconfont iconicon_principal","iconfont iconicon_group","iconfont iconicon_send","iconfont iconicon_scan","iconfont iconicon_search","iconfont iconicon_refresh","iconfont iconicon_savememo","iconfont iconicon_QRcode","iconfont iconicon_im_keyboard","iconfont iconicon_redpacket","iconfont iconicon_photo","iconfont iconicon_qq","iconfont iconicon_wechat","iconfont iconicon_phone","iconfont iconicon_namecard","iconfont iconicon_notice","iconfont iconicon_next_arrow","iconfont iconicon_left","iconfont iconicon_more","iconfont iconicon_details","iconfont iconicon_message","iconfont iconicon_mobilephone","iconfont iconicon_im_voice","iconfont iconicon_GPS","iconfont iconicon_ding","iconfont iconicon_exchange","iconfont iconicon_cspace","iconfont iconicon_doc","iconfont iconicon_dispose","iconfont iconicon_discovery","iconfont iconicon_community_line","iconfont iconicon_cloud_history","iconfont iconicon_coinpurse_line","iconfont iconicon_airplay","iconfont iconicon_at","iconfont iconicon_addressbook","iconfont iconicon_boss","iconfont iconicon_addperson","iconfont iconicon_affiliations_li","iconfont iconicon_addmessage","iconfont iconicon_addresslist","iconfont iconicon_add","iconfont icongithub","iconfont icongitee2"]},{label:"系统图标",list:["iconfont icon-zhongyingwen","iconfont icon-caidan","iconfont icon-rizhi1","iconfont icon-zhuti","iconfont icon-suoping","iconfont icon-bug","iconfont icon-qq1","iconfont icon-weixin1","iconfont icon-shouji","iconfont icon-mima","iconfont icon-yonghu","iconfont icon-yanzhengma","iconfont icon-canshu","iconfont icon-dongtai","iconfont icon-iconset0265","iconfont icon-shujuzhanshi2","iconfont icon-tuichuquanping","iconfont icon-rizhi","iconfont icon-cuowutishitubiao","iconfont icon-debug","iconfont icon-iconset0216","iconfont icon-quanxian","iconfont icon-quanxian","iconfont icon-shuaxin","iconfont icon-bofangqi-suoping","iconfont icon-quanping","iconfont icon-navicon","iconfont icon-biaodan","iconfont icon-liuliangyunpingtaitubiao08","iconfont icon-caidanguanli","iconfont icon-cuowu","iconfont icon-wxbgongju","iconfont icon-tuichu","iconfont icon-daohanglanmoshi02","iconfont icon-changyonglogo27","iconfont icon-biaoge","iconfont icon-baidu1","iconfont icon-tubiao","iconfont icon-souhu","iconfont icon-msnui-360","iconfont icon-iframe","iconfont icon-huanyingye","el-icon-share","el-icon-s-check"]}]},"245ab":function(e,t,n){"use strict";n("769e")},2498:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.flow_manager_state?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleState(t.row,t.index)}}},[e._v("变更状态\n      ")]):e._e(),e.permission.flow_manager_image?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("流程图\n      ")]):e._e(),e.permission.flow_manager_remove?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleSlotDelete(t.row,t.index)}}},[e._v("删除\n      ")]):e._e()]}},{key:"tenantId",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(""===r.tenantId?"通用":r.tenantId))])]}},{key:"version",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.version))])]}},{key:"suspensionState",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(1===r.suspensionState?"激活":"挂起"))])]}},{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-radio-group",{attrs:{size:"small"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("通用流程")]),n("el-radio-button",{attrs:{label:"2"}},[e._v("定制流程")])],1)],1)],2),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{attrs:{title:"流程变更","append-to-body":"",visible:e.stateBox,width:"20%"},on:{"update:visible":function(t){e.stateBox=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"流程状态"}},[n("el-select",{attrs:{placeholder:"请选择",value:""},model:{value:e.flowState,callback:function(t){e.flowState=t},expression:"flowState"}},e._l(e.stateOptions,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.stateBox=!1}}},[e._v("关 闭")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleDoState}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("371f"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},mode:"1",selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",stateBox:!1,flowState:"",stateOptions:[{value:"active",label:"激活"},{value:"suspend",label:"挂起"}],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"租户编号",prop:"tenantId",slot:!0,width:120},{label:"流程主键",prop:"id"},{label:"流程标识",prop:"key",search:!0,width:150},{label:"流程名称",prop:"name",width:150},{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,width:100},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"部署时间",prop:"deploymentTime",width:165}]},data:[]}},watch:{mode:function(){this.onLoad(this.page)}},computed:u(u({},Object(o["b"])(["permission"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permission.flow_manager_remove,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},deploymentIds:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.deploymentId)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteDeployment"])(e.deploymentIds)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection(),e.onLoad(e.page)})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleSlotDelete:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteDeployment"])(e.deploymentId)})).then((function(){t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection(),t.onLoad(t.page)})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleState:function(e){this.stateBox=!0,this.selectionId=e.id},handleDoState:function(){var e=this;this.flowState?Object(s["changeState"])({processId:this.selectionId,state:this.flowState}).then((function(t){var n=t.data;n.success?(e.$message({type:"success",message:n.msg}),e.stateBox=!1,e.onLoad(e.page)):e.$message({type:"warn",message:n.msg})})):this.$message({type:"warn",message:"请先选择流程状态!"})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/resource-view?processDefinitionId=".concat(e.id),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},n),{},{category:n.category?Object(c["a"])(n.category):null,mode:this.mode});this.loading=!0,Object(s["managerList"])(e.currentPage,e.pageSize,Object.assign(r,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("5f83"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},"25d8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(n){return n.stopPropagation(),e.handleWork(t.row)}}},[e._v("审核\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(n){return n.stopPropagation(),e.handleFreeDetail(t.row)}}},[e._v("免税详情\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(n){return n.stopPropagation(),e.handleContractDetail(t.row)}}},[e._v("合同详情\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(n){return n.stopPropagation(),e.handleHistory(t.row)}}},[e._v("审核意见\n      ")])]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-check",plain:""},on:{click:e.handleCheck}},[e._v("批量审核\n      ")])],1)],2),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"批量审核","append-to-body":"",visible:e.checkIsShow},on:{"update:visible":function(t){e.checkIsShow=t}}},[e.checkIsShow?n("avue-form",{ref:"checkForm",attrs:{option:e.checkOption},model:{value:e.checkForm,callback:function(t){e.checkForm=t},expression:"checkForm"}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.checkIsShow=!1}}},[e._v("关 闭")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleCheckSubmit}},[e._v("确 定")])],1)],1),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"免税信息",visible:e.freeInfoIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.freeInfoIsShow=t}}},[n("avue-form",{ref:"freeForm",attrs:{option:e.freeOption},model:{value:e.freeForm,callback:function(t){e.freeForm=t},expression:"freeForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.freeInfoIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("修 改")])],1)],1),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:e.handleContractClose}}):e._e()],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("28a5"),n("6b54"),n("87b3"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("2f62"),c=n("1e69"),l=n("7208"),u=n("483e"),d=n("096f"),p=n("cfda"),h=n("738e"),g=n("c832"),f=n.n(g),m=n("4ba7"),b=n("8ddc");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={data:function(){return{isDev:!1,contractInfoIsShow:!1,contractInfoQuery:{},form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!0,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:300,dialogClickModal:!1,column:[{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,bind:"contractList.projectName"},{label:"合同登记号",prop:"contractRegistrationNumber",bind:"contractList.contractRegistrationNumber",minWidth:160,search:!0,rules:[],searchLabelWidth:100},{label:"办件编号",prop:"contractCode",bind:"contractList.contractCode",minWidth:160,overHidden:!0,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"number",value:1,dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",size:"medium",required:!0,bind:"contractList.declareType",rules:[{required:!0,message:"请选择申报类型"}]},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/dictionary?code=ContractCategory",bind:"contractList.contractType",rules:[{required:!0,message:"请选择合同类型"}]},{type:"number",precision:2,minWidth:118,label:"合同总金额（元）",prop:"totalAmount",bind:"contractExecution.totalAmount",labelTip:"合同总金额，单位（元），根据合同申请信息自动填充。",labelTipPlacement:"right",placeholder:"根据合同申请信息自动填充",disabled:!0,display:!1,rules:[{required:!0,message:"请输入合同总金额",trigger:"blur"}]},{type:"number",precision:2,label:"技术交易额(元）",bind:"contractExecution.turnover",minWidth:120,prop:"turnover",disabled:!0,display:!1,placeholder:"根据合同申请信息自动填充",labelTip:"技术交易额，单位（元），根据合同申请信息自动填充。",labelTipPlacement:"right",rules:[{required:!0,message:"请输入技术交易额",trigger:"blur"}]},{type:"number",precision:2,label:"本次实现合同金额",minWidth:120,display:!1,prop:"contractDeal",bind:"contractExecution.contractDeal",rules:[{required:!0,message:"请输入本次实现合同交易额",trigger:"blur"}]},{type:"number",precision:2,minWidth:160,label:"本次实现技术性收入(元）",prop:"technicalIncome",bind:"contractExecution.technicalIncome",display:!1,rules:[{required:!0,message:"请输入本次实现技术性收入",trigger:"blur"}]},{label:"财务负责人",prop:"financialOfficer",minWidth:100,bind:"contractExecution.financialOfficer",display:!1,rules:[{required:!0,message:"请输入财务负责人",trigger:"blur"}]},{label:"单位负责人",prop:"unitOfficer",minWidth:100,bind:"contractExecution.unitOfficer",display:!1,rules:[{required:!0,message:"请输入单位负责人",trigger:"blur"}]}]},data:[],checkIsShow:!1,checkForm:{},checkOption:{disabled:!1,labelPosition:"right",labelSuffix:"：",labelWidth:100,gutter:0,menuBtn:!0,submitBtn:!1,emptyBtn:!1,emptyText:"清空",menuPosition:"center",column:[{type:"radio",label:"审批结果",dicData:[{label:"受理",value:"ok"},{label:"返回修改",value:"fail"},{label:"不予受理",value:"invalid"}],span:24,cascaderItem:[],display:!0,prop:"result",rules:[{required:!0,message:"请选择审批结果"}]},{type:"select",label:"审批意见",dicUrl:"/api/blade-system/dict-biz/dictionary?code=free-reason",props:{label:"dictValue",value:"dictKey"},span:24,cascaderItem:[],display:!0,prop:"reason",rules:[{required:!1,message:"请选择审批意见"}]},{type:"textarea",label:"备注",span:24,display:!0,prop:"comment"}]},freeInfoIsShow:!1,freeOption:m["freeOption"],freeForm:{},flowList:[],flowListIsShow:!1,flowListOption:m["flowListOption"]}},components:{contractInfo:d["default"]},computed:y(y({},Object(s["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),watch:{"checkForm.result":{handler:function(e){var t=this.findObject(this.checkOption.column,"reason");t.rules[0].required="ok"!==e},deep:!0}},methods:{initData:function(){var e=this;Object(b["getDictionary"])({code:"free-reason"}).then((function(t){var n=e.findObject(e.flowListOption.column,"reason");n.dicData=f()(t,"data.data",[]),e.reasonList=t.data.data}))},handleContractClose:function(){this.contractInfoIsShow=!1,this.onLoad(this.page)},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleCheck:function(e){console.log("row :>> ",e),0!==this.selectionList.length?this.checkIsShow=!0:this.$message.warning("请选择至少一条数据")},handleCheckSubmit:function(){var e=this;this.$refs.checkForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=27;break}e.loading=!0,t.prev=2,i=e.selectionList.map((function(t){return{taskId:t.taskId,processInstanceId:t.processInstanceId,flag:e.checkForm.result,comment:e.checkForm.comment+"###$$$"+e.checkForm.reason,contractId:t.contractId,contractExecutionId:t.contractExecutionId}})),a=0;case 5:if(!(a<i.length)){t.next=11;break}return t.next=8,Object(u["completeTask"])(i[a]);case 8:a++,t.next=5;break;case 11:e.selectionClear(),e.checkIsShow=!1,e.$message.success("审批成功"),e.onLoad(e.page),e.checkForm={},t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),e.message.error(t.t0.toString());case 21:return t.prev=21,e.loading=!1,r(),t.finish(21);case 25:t.next=28;break;case 27:e.$message.warning("请先填写批复意见");case 28:case"end":return t.stop()}}),t,null,[[2,18,21,25]])})));return function(e,n){return t.apply(this,arguments)}}())},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleContractDetail:function(e){this.contractInfoQuery={contractId:e.contractId,type:"admin-edit"},this.contractInfoIsShow=!0},handleFreeDetail:function(e){this.freeForm=e.contractExecution,this.freeInfoIsShow=!0},handleSubmit:function(){this.rowUpdate()},rowUpdate:function(){var e=this;delete this.freeForm.auditTime,delete this.freeForm.auditTimeStr,Object(p["update"])(this.freeForm).then((function(){e.freeInfoIsShow=!1,e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"})}),(function(e){console.log(e)}))},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=y(y({},this.query),{},{category:"flow_5"});this.loading=!0,Object(c["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleHistory:function(e){var t=this;Object(h["historyFlowList"])(e.processInstanceId).then((function(e){var n=f()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))}},created:function(){this.initData()}},O=w,j=(n("11b2"),n("2877")),C=Object(j["a"])(O,r,i,!1,null,null,null);t["default"]=C.exports},2611:function(e,t,n){"use strict";n("4f5a")},2762:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e._v("测试页")])},i=[],a={},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"2a06":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,search:e.query,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.query=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"contractTotalAmountSearch",fn:function(t){var r=t.disabled,i=t.size;return[n("div",{staticClass:"contractTotalAmountSearch"},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最小金额",disabled:r,size:i},model:{value:e.query.startContractTotalAmount,callback:function(t){e.$set(e.query,"startContractTotalAmount",t)},expression:"query.startContractTotalAmount"}}),n("span",[e._v("(<)")]),n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最大金额",disabled:r,size:i},model:{value:e.query.endContractTotalAmount,callback:function(t){e.$set(e.query,"endContractTotalAmount",t)},expression:"query.endContractTotalAmount"}})],1)]}},{key:"contractStatusSearch",fn:function(t){var r=t.disabled,i=t.size,a=t.dic,o=t.column;return[n("div",[n("avue-select",{attrs:{multiple:"",disabled:r,size:i,placeholder:"请选择内容",type:"tree",dic:a,props:o.props},model:{value:e.query.contractStatus,callback:function(t){e.$set(e.query,"contractStatus",t)},expression:"query.contractStatus"}})],1)]}},{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看")]),e.permissionList.editBtn?n("el-button",{attrs:{icon:"el-icon-edit",size:i,type:r},on:{click:function(t){return e.rowUpdate(a)}}},[e._v("编辑")]):e._e(),n("el-button",{attrs:{icon:"el-icon-download",disabled:!["10","14"].includes(a.contractStatus),type:r,size:i},on:{click:function(t){return e.handleDownload(a)}}},[e._v("下载")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check",disabled:a&&1==a.contractStatus},on:{click:function(t){return t.stopPropagation(),e.handleHistory(a)}}},[e._v("审核意见\n      ")])]}}],null,!1,3185413287),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permissionList.contractDelBtn?n("el-button",{attrs:{icon:"el-icon-download",size:"small",type:"primary",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleListDowload(t)}}},[e._v("批量下载")]):e._e(),e.permissionList.contractDelBtn?n("el-button",{attrs:{icon:"el-icon-delete",size:"small",type:"danger",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleListBatchVoid(t)}}},[e._v("作废")]):e._e()],1)],2):e._e(),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:e.handleContractClose}}):e._e()],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("28a5"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u),p=n("c0c7"),h=n("096f"),g=n("c832"),f=n.n(g),m=n("4ba7"),b=n("8ddc");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={data:function(){return{contractInfoIsShow:!1,contractInfoQuery:{},userInfo:null,form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!0,searchMenuSpan:6,menuWidth:260,searchLabelWidth:130,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!0,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"状态",prop:"contractStatus",searchSpan:12,type:"select",dataType:"number",minWidth:160,searchslot:!0,multiple:!0,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{type:"select",label:"合同申请类型",prop:"type",dataType:"string",display:!1,search:!0,minWidth:100,value:"1",dicData:[{label:"个人合同",value:"0"},{label:"单位合同",value:"1"}]},{label:"项目名称",prop:"projectName",overHidden:!0,minWidth:160,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,overHidden:!0,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",minWidth:160,overHidden:!0,searchSpan:12,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{label:"合同成交总金额",prop:"contractTotalAmount",bind:"contractinfo.contractTotalAmount",searchslot:!0,search:!0,minWidth:130,searchSpan:12,rules:[{required:!0,message:"请输入合同成交总金额",trigger:"blur"}]},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"input",label:"登记单位",minWidth:100,overHidden:!0,span:12,display:!0,prop:"registrationUnit",required:!0,rules:[{required:!0,message:"登记单位必须填写"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,search:!0,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",search:!0,searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否军民两用合同",search:!0,searchLabelWidth:130,minWidth:120,span:24,display:!0,prop:"isClassified",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}],required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],prop:"isFree",hide:!0,dicData:[{label:"是",value:1},{label:"否",value:0}]},{type:"radio",label:"是否大额合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否大额合同"}],prop:"isLarge",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{type:"radio",label:"是否涉外合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否涉外合同"}],prop:"isOutside",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{label:"税务驳回状态",prop:"rejectStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=reject_status",rules:[{required:!0,message:"请输入驳回状态",trigger:"blur"}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"创建时间",prop:"createTime",type:"datetime",searchSpan:10,minWidth:150,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[],flowList:[],flowListIsShow:!1,flowListOption:m["flowListOption"]}},components:{contractInfo:h["default"]},computed:y(y({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),contractDelBtn:this.vaildData(this.permission.contract_search_delete,!1),editBtn:this.vaildData(this.permission.contract_search_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData(),this.getUserInfo()},methods:{initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o})),Object(b["getDictionary"])({code:"reason"}).then((function(e){var n=t.findObject(t.flowListOption.column,"reason");n.dicData=f()(e,"data.data",[])}))},getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,c,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){l.userInfo=r})),i=r.roleId,i.includes("1375342244055232513")&&(a=this.findObject(this.option.column,"contractCode"),a.hide=!0),o=["1351364540907913218","1351364671552094210"],s=o.some((function(e){return i.includes(e)})),s&&(c=["isClassified","isLarge","isOutside","rejectStatus","isFree"],c.forEach((function(e){var t=l.findObject(l.option.column,e);t.hide=!0}))),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListDowload:function(){var e=this;0!==this.selectionList.length?this.selectionList.forEach((function(t){e.contractDownload(t)})):this.$message.warning("请选择至少一条数据")},handleListBatchVoid:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据作废?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["batchVoid"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.contractInfoQuery={contractId:e.id,type:"admin-edit"},this.contractInfoIsShow=!0},handleView:function(e){this.contractInfoQuery={contractId:e.id,type:"detail"},this.contractInfoIsShow=!0},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=y(y({},n),this.query),i=this.userInfo,a=i.roleId,o=i.unitId,c=i.deptId,l=i.id;a.includes("1351364540907913218")&&(r.createUser=l,r.registrationUnitId=o||0),a.includes("1351364671552094210")&&(r.registrationUnitId=o),a.includes("1375342244055232513")&&(r.kiosk=c),a.includes("1351364770906767361")&&(r.kiosk=c),a.includes("1351364845053673474")&&(r.registrationPoint=c);var u=r.applyTime,d=r.createTime;u&&(r.startApplyTime=u[0],r.endApplyTime=u[1],r.applyTime=null),d&&(r.startTime=d[0],r.endTime=d[1],r.createTime=null),r.contractStatusList=r.contractStatus,delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(s["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleHistory:function(e){var t=this;Object(s["historyFlowList"])({contractId:e.id}).then((function(e){var n=f()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))},handleContractClose:function(){this.contractInfoIsShow=!1,this.onLoad(this.page)}}},O=w,j=(n("58cf"),n("2877")),C=Object(j["a"])(O,r,i,!1,null,null,null);t["default"]=C.exports},"2ba9":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("bd86")),o=n("62ed"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",width:"120",search:!0},{label:"服务host",prop:"serverHost",search:!0},{label:"服务ip",prop:"serverIp",width:"160"},{label:"软件环境",prop:"env",width:"80"},{label:"日志名",prop:"title"},{label:"请求方法",prop:"method",width:"80"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_api_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getApiLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getApiList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"2d0d":function(e,t,n){"use strict";n("13f7")},"37fc":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleDesign(t.row.name)}}},[e._v("设计\n      ")]):e._e(),e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-view",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handlePreview(t.row.name)}}},[e._v("预览\n      ")]):e._e()]}},{key:"name",fn:function(t){var r=t.row;return[n("el-tag",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.handlePreview(r.name)}}},[e._v(e._s(r.name))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")])],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("88ca"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,dialogClickModal:!1,column:[{label:"文件名",prop:"name",search:!0,slot:!0},{label:"创建时间",prop:"createTime"},{label:"更新时间",prop:"updateTime"}]},data:[]}},computed:l(l({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:!1,viewBtn:!1,delBtn:!0,editBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handlePreview:function(e){this.$router.push({path:"/myiframe/urlPath?name=preview-".concat(e,"&src=").concat(this.website.reportUrl,"/preview?_u=blade-").concat(e)})},handleDesign:function(e){this.$router.push({path:"/myiframe/urlPath?name=designer-".concat(e,"&src=").concat(this.website.reportUrl,"/designer?_u=blade-").concat(e)})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"38a29":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen,"upload-before":e.uploadBefore,"upload-preview":e.uploadPreview,"upload-delete":e.uploadDelete},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看")])]}},{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.notice_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("b54a"),n("28a5"),n("ac6a"),n("bd86")),o=n("2905"),s=n("2f62"),c=n("c832"),l=n.n(c);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,dialogWidth:950,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!1,selection:!0,excelBtn:!1,dialogClickModal:!1,column:[{label:"通知标题",prop:"title",span:24,row:!0,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入通知标题",trigger:"blur"}]},{label:"通知类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=notice",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"通知时间",prop:"releaseTimeRange",type:"datetime",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",searchRange:!0,hide:!0,addDisplay:!1,editDisplay:!1,viewDisplay:!1,search:!0,rules:[{required:!0,message:"请输入通知时间",trigger:"blur"}]},{label:"通知日期",prop:"releaseTime",type:"date",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",rules:[{required:!0,message:"请输入通知日期",trigger:"click"}]},{label:"通知内容",prop:"content",component:"AvueUeditor",options:{action:"/api/blade-resource/oss/endpoint/put-file-attach",props:{res:"data",url:"link"}},hide:!0,minRows:6,span:24},{type:"upload",label:"附件",labelTip:"",labelTipPlacement:"right",span:24,display:!0,showFileList:!0,multiple:!0,limit:3,canvasOption:{},props:{label:"originalName",value:"link"},hide:!0,prop:"accessory",loadText:"附件上传中，请稍等",accept:".png,.pdf,.jpg,.gif,.js",propsHttp:{res:"data",name:"originalName",url:"link"},data:{},action:"/api/blade-resource/oss/endpoint/put-file-attach"}]},data:[]}},computed:d(d({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.notice_add,!1),viewBtn:this.vaildData(this.permission.notice_view,!1),delBtn:this.vaildData(this.permission.notice_delete,!1),editBtn:this.vaildData(this.permission.notice_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{uploadBefore:function(e,t){t()},uploadPreview:function(e){var t=e.url,n=t.split(".");if(n=n[n.length-1],"pdf"===n)window.open(t,"_blank");else{var r,i=this.form.accessory.map((function(t,n){return e.url==t.link&&(r=n),{thumbUrl:t.link,url:t.link}}));this.$ImagePreview(i,r)}},uploadDelete:function(e){var t=l()(e,"url");l()(this,"form.accessory")&&(this.form.accessory=this.form.accessory.filter((function(e){return e.link&&e.link!==t})))},rowSave:function(e,t,n){var r=this,i=this.deepClone(e);i.accessory=JSON.stringify(i.accessory),Object(o["add"])(i).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this,a=this.deepClone(e);a.accessory=JSON.stringify(a.accessory),Object(o["update"])(a).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getNotice"])(this.form.id).then((function(e){var t=l()(e,"data.data");t.accessory=JSON.parse(t.accessory),n.form=t})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.query.releaseTimeRange,i=d(d({},n),{},{descs:"release_time"});r&&(i=d(d({},n),{},{releaseTime_datege:r[0],releaseTime_datelt:r[1]},this.query),i.releaseTimeRange=null),this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,i).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleView:function(e){this.$router.push({path:"/desk/notice/view",query:{id:e.id,type:"view"}})}}},h=p,g=n("2877"),f=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},"3a0d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("div",{staticClass:"wrapper"},[n("avue-article",{attrs:{option:e.option,data:e.data}}),n("div",[e.data&&e.data.accessory&&e.data.accessory.length?[n("div",[e._v("附件:")]),e._l(e.data.accessory,(function(t){return n("el-link",{key:t.originalName,attrs:{type:"primary"},on:{click:function(n){return e.hanldeDownload(t)}}},[e._v(e._s(t.originalName))])}))]:e._e()],2)],1)])},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),o=(n("96cf"),n("3b8d")),s=(n("7f7f"),n("2905"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={name:"NoticeDetail",components:{},data:function(){return{data:{},option:{props:{title:"title",meta:"meta",lead:"lead",body:"body"}}}},computed:{id:function(){return this.$route.query.id||null}},watch:{},methods:{hanldeDownload:function(e){return window.open("/pdfjs/web/viewer.html?file="+e.name,"_blank","width:50%;height:50%;top:100;left:100;")},getNotice:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["getNotice"])(this.id);case 3:t=e.sent,n=t.data,r=n.data;try{i=JSON.parse(r.accessory)}catch(a){i=[]}this.data=l(l({},r),{},{body:r.content,meta:r.createTime,accessory:i}),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),window.console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},created:function(){this.getNotice()},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},d=u,p=(n("00ad"),n("2877")),h=Object(p["a"])(d,r,i,!1,null,"5849df54",null);t["default"]=h.exports},"3ab2":function(e,t,n){},"3b9c":function(e,t,n){},"40c0":function(e,t,n){},"41c2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"suspensionState",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(1===r.suspensionState?"激活":"挂起"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程删除","append-to-body":"",visible:e.followBox,width:"20%"},on:{"update:visible":function(t){e.followBox=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"删除理由"}},[n("el-input",{attrs:{placeholder:"请输入删除理由"},model:{value:e.deleteReason,callback:function(t){e.deleteReason=t},expression:"deleteReason"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.followBox=!1}}},[e._v("关 闭")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleDelete}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("371f");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionId:"",processInstanceId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},followBox:!1,deleteReason:"",option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,dialogWidth:900,menuWidth:100,dialogClickModal:!1,column:[{label:"执行id",prop:"executionId",search:!0,width:320},{label:"流程key",prop:"processDefinitionKey",search:!0},{label:"实例id",prop:"processInstanceId",search:!0,width:320},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"发起人",prop:"startUser",width:100},{label:"开始时间",prop:"startTime",width:165}]},data:[]}},computed:l(l({},Object(o["b"])(["permission"])),{},{permissionList:function(){return{delBtn:this.vaildData(this.permission.flow_follow_delete,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowDel:function(e){this.followBox=!0,this.selectionId=e.id,this.processInstanceId=e.processInstanceId},handleDelete:function(){var e=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["deleteProcessInstance"])({deleteReason:e.deleteReason,processInstanceId:e.processInstanceId})})).then((function(){e.onLoad(e.page),e.followBox=!1,e.$message({type:"success",message:"操作成功!"})})).catch((function(){e.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(s["followList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=(n("acda"),n("2877")),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"41cf":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("表格例子")]),n("avue-crud",{attrs:{option:e.option,page:e.page,data:e.data},on:{"update:page":function(t){e.page=t}}})],1)},i=[],a={data:function(){return{page:{total:122},data:[{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"},{username:"smallwei",name:"avue",password:"123456",newpassword:"123456",date:"2019-01-01",textarea:"这是一条很长很长很长很长很长很长很长很长的个性签名"}],option:{column:[{label:"用户名",prop:"username",span:14,row:!0},{label:"姓名",prop:"name",span:14,row:!0},{label:"密码",prop:"password",type:"password",span:14,row:!0},{label:"确认密码",prop:"newpassword",type:"password",hide:!0,span:14,row:!0},{label:"申请日期",prop:"date",type:"date",span:14,row:!0},{label:"个性签名",prop:"textarea",type:"textarea",minRows:8,span:24,overHidden:!0,row:!0}]}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"42b2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleWork(t.row)}}},[e._v("审核\n      ")])]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-check",plain:""},on:{click:e.handleCheck}},[e._v("批量审核\n      ")])],1)],2),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"批量审核","append-to-body":"",visible:e.checkIsShow},on:{"update:visible":function(t){e.checkIsShow=t}}},[e.checkIsShow?n("avue-form",{ref:"checkForm",attrs:{option:e.checkOption},model:{value:e.checkForm,callback:function(t){e.checkForm=t},expression:"checkForm"}}):e._e(),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.checkIsShow=!1}}},[e._v("关 闭")]),n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleCheckSubmit}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6b54"),n("87b3"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("2f62"),c=n("1e69"),l=n("7208"),u=n("375c");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"当前步骤",prop:"taskName"},{label:"申请类型",prop:"isTrue",dicData:[{label:"离开单位",value:"1"},{label:"加入单位",value:"0"}]},{label:"姓名",prop:"realName",bind:"user.realName",overHidden:!0,minWidth:100},{label:"身份证",prop:"card",bind:"user.card",overHidden:!0,minWidth:100},{label:"电话",prop:"phone",bind:"user.phone",overHidden:!0,minWidth:100}]},data:[],checkIsShow:!1,checkForm:{},checkOption:{disabled:!1,labelPosition:"right",labelSuffix:"：",labelWidth:100,gutter:0,menuBtn:!0,submitBtn:!1,emptyBtn:!1,emptyText:"清空",menuPosition:"center",column:[{type:"radio",label:"审批结果",dicData:[{label:"受理",value:"ok"},{label:"返回修改",value:"fail"},{label:"不予受理",value:"invalid"}],span:24,cascaderItem:[],display:!0,prop:"result",rules:[{required:!0,message:"请选择审批结果"}]},{type:"select",label:"审批意见",dicUrl:"/api/blade-system/dict-biz/dictionary?code=reason",props:{label:"dictValue",value:"dictKey"},span:24,cascaderItem:[],display:!0,prop:"reason",rules:[{required:!1,message:"请选择审批意见"}]},{type:"textarea",label:"备注",span:24,display:!0,prop:"comment"}]}}},computed:p(p({},Object(s["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId),query:{card:e.user.card,phone:e.user.phone}})},handleCheck:function(){if(0===this.selectionList.length)return this.$message.warning("请选择至少一条数据");this.checkIsShow=!0},handleCheckSubmit:function(){var e=this;this.$refs.checkForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=27;break}e.loading=!0,t.prev=2,i=e.selectionList.map((function(t){return{taskId:t.taskId,processInstanceId:t.processInstanceId,flag:e.checkForm.result,comment:e.checkForm.comment+"###$$$"+e.checkForm.reason,contractId:t.contractId}})),a=0;case 5:if(!(a<i.length)){t.next=11;break}return t.next=8,Object(u["completeTask"])(i[a]);case 8:a++,t.next=5;break;case 11:e.selectionClear(),e.checkIsShow=!1,e.$message.success("审批成功"),e.onLoad(e.page),e.checkForm={},t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](2),e.message.error(t.t0.toString());case 21:return t.prev=21,e.loading=!1,r(),t.finish(21);case 25:t.next=28;break;case 27:e.$message.warning("请先填写批复意见");case 28:case"end":return t.stop()}}),t,null,[[2,18,21,25]])})));return function(e,n){return t.apply(this,arguments)}}())},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleContractDetail:function(e){console.log("row :>> ",e),this.$router.push({path:"/contract/contract-info",query:{contractId:e.contractId,type:"edit"}})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=p(p({},this.query),{},{category:"flow_4"});this.loading=!0,Object(c["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},g=h,f=(n("eaac"),n("2877")),m=Object(f["a"])(g,r,i,!1,null,null,null);t["default"]=m.exports},"464a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-video-play",size:"small"},on:{click:function(n){return e.handleDebug(t.row)}}},[e._v("调试\n      ")]):e._e(),e.permission.oss_enable?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-check",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleEnable(t.row)}}},[e._v("启用\n      ")]):e._e()]}},{key:"status",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.statusName))])]}},{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.oss_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"对象存储上传调试","append-to-body":"",visible:e.box,width:"550px"},on:{"update:visible":function(t){e.box=t}}},[n("avue-form",{ref:"form",attrs:{option:e.debugOption},on:{submit:e.handleSubmit},model:{value:e.debugForm,callback:function(t){e.debugForm=t},expression:"debugForm"}})],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("368f"),s=n("2f62"),c=n("d9a3");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},query:{},loading:!0,box:!1,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:300,labelWidth:100,dialogWidth:880,dialogClickModal:!1,column:[{label:"分类",type:"radio",value:1,span:24,width:100,searchLabelWidth:50,row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=oss",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,rules:[{required:!0,message:"请选择分类",trigger:"blur"}]},{label:"资源编号",prop:"ossCode",span:24,width:120,search:!0,rules:[{required:!0,message:"请输入资源编号",trigger:"blur"}]},{label:"资源地址",prop:"endpoint",span:24,rules:[{required:!0,message:"请输入资源地址",trigger:"blur"}]},{label:"空间名",prop:"bucketName",span:24,width:120,rules:[{required:!0,message:"请输入空间名",trigger:"blur"}]},{label:"accessKey",prop:"accessKey",span:24,search:!0,width:200,overHidden:!0,rules:[{required:!0,message:"请输入accessKey",trigger:"blur"}]},{label:"secretKey",prop:"secretKey",span:24,width:200,overHidden:!0,rules:[{required:!0,message:"请输入secretKey",trigger:"blur"}]},{label:"appId",prop:"appId",span:24,hide:!0,display:!1},{label:"region",prop:"region",span:24,hide:!0,display:!1},{label:"是否启用",prop:"status",span:24,width:80,align:"center",addDisplay:!1,editDisplay:!1,viewDisplay:!1,dicData:[{label:"是",value:1},{label:"否",value:0}]},{label:"备注",prop:"remark",span:24,hide:!0}]},data:[],debugForm:{code:""},debugOption:{submitText:"提交",column:[{label:"资源编号",prop:"code",disabled:!0,span:24},{label:"上传背景",prop:"backgroundUrl",type:"upload",listType:"picture-img",action:"/api/blade-resource/oss/endpoint/put-file",propsHttp:{res:"data",url:"link"},span:24}]}}},watch:{"form.category":function(){var e=c["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"appId"===t.prop&&(t.display=4===e),"region"===t.prop&&(t.display=4===e)}))},"debugForm.code":function(){var e=this.findObject(this.debugOption.column,"backgroundUrl");e.action="/api/blade-resource/oss/endpoint/put-file?code=".concat(this.debugForm.code)}},computed:u(u({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.oss_add),viewBtn:this.vaildData(this.permission.oss_view),delBtn:this.vaildData(this.permission.oss_delete),editBtn:this.vaildData(this.permission.oss_edit)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleEnable:function(e){var t=this;this.$confirm("是否确定启用这条配置?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["enable"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection()})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDebug:function(e){this.box=!0,this.debugForm.code=e.ossCode,this.debugForm.backgroundUrl=""},handleSubmit:function(e,t){this.$message({type:"success",message:"获取到图片地址:[".concat(e.backgroundUrl,"]")}),t()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},"478b":function(e,t,n){},"4b67":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.wosdata_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("4653"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"论文标题",prop:"title",search:!0,rules:[{required:!0,message:"请输入论文标题",trigger:"blur"}]},{label:"wos号",prop:"wosCode",search:!0,rules:[{required:!0,message:"请输入wos号",trigger:"blur"}]},{label:"DOI号",prop:"doiCode",rules:[{required:!0,message:"请输入DOI号",trigger:"blur"}]},{label:"学科领域",prop:"subjectArea",rules:[{required:!0,message:"请输入学科领域",trigger:"blur"}]},{label:"本校作者合集",prop:"authorProduction",rules:[{required:!0,message:"请输入本校作者合集",trigger:"blur"}]},{label:"本校作者合集url",prop:"authorProductionUrl",rules:[{required:!0,message:"请输入本校作者合集url",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.wosdata_add,!1),viewBtn:this.vaildData(this.permission.wosdata_view,!1),delBtn:this.vaildData(this.permission.wosdata_delete,!1),editBtn:this.vaildData(this.permission.wosdata_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"4bfb":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.sellerinfo_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("f180"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"技术合同信息表id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同信息表id",trigger:"blur"}]},{label:"卖方名称",prop:"sellerName",rules:[{required:!0,message:"请输入卖方名称",trigger:"blur"}]},{label:"社会统一信用代码",prop:"sorganizationCode",rules:[{required:!0,message:"请输入社会统一信用代码",trigger:"blur"}]},{label:"卖方国别",prop:"sellerCountry",rules:[{required:!0,message:"请输入卖方国别",trigger:"blur"}]},{label:"通讯地址",prop:"sellerAddress",rules:[{required:!0,message:"请输入通讯地址",trigger:"blur"}]},{label:"联系电话",prop:"phone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"邮政编码",prop:"spostalCode",rules:[{required:!0,message:"请输入邮政编码",trigger:"blur"}]},{label:"法人代表",prop:"slegalRepresentative",rules:[{required:!0,message:"请输入法人代表",trigger:"blur"}]},{label:"法人代表联系电话",prop:"slegalPhone",rules:[{required:!0,message:"请输入法人代表联系电话",trigger:"blur"}]},{label:"法人邮箱",prop:"slegalEmail",rules:[{required:!0,message:"请输入法人邮箱",trigger:"blur"}]},{label:"卖方性质",prop:"sellerNature",rules:[{required:!0,message:"请输入卖方性质",trigger:"blur"}]},{label:"卖方地区",prop:"sellerRegion",rules:[{required:!0,message:"请输入卖方地区",trigger:"blur"}]},{label:"所属园区",prop:"sellerPark",rules:[{required:!0,message:"请输入所属园区",trigger:"blur"}]},{label:"是否国家级高新区内企业 0:否 1:是",prop:"isAreaenterprises",rules:[{required:!0,message:"请输入是否国家级高新区内企业 0:否 1:是",trigger:"blur"}]},{label:"机构从事的国民经济行业",prop:"sellerIndustry",rules:[{required:!0,message:"请输入机构从事的国民经济行业",trigger:"blur"}]},{label:"企业规模",prop:"senterpriseScale",rules:[{required:!0,message:"请输入企业规模",trigger:"blur"}]},{label:"财务主管",prop:"sellerTreasurer",rules:[{required:!0,message:"请输入财务主管",trigger:"blur"}]},{label:"是否转制科研院所 0:否 1:是",prop:"isConversion",rules:[{required:!0,message:"请输入是否转制科研院所 0:否 1:是",trigger:"blur"}]},{label:"是否研发机构 0:否 1:是",prop:"isDevelopmentinstitutions",rules:[{required:!0,message:"请输入是否研发机构 0:否 1:是",trigger:"blur"}]},{label:"是否上市公司 0:否 1:是",prop:"isListedcompany",rules:[{required:!0,message:"请输入是否上市公司 0:否 1:是",trigger:"blur"}]},{label:"证券代码",prop:"sstockCode",rules:[{required:!0,message:"请输入证券代码",trigger:"blur"}]},{label:"联系人",prop:"sellerContact",rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]},{label:"税务登记号",prop:"sregistrationNumber",rules:[{required:!0,message:"请输入税务登记号",trigger:"blur"}]},{label:"电子邮件",prop:"sellerEmail",rules:[{required:!0,message:"请输入电子邮件",trigger:"blur"}]},{label:"联系电话",prop:"sellerPhone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"是否科技服务机构 0:否 1:是",prop:"isScience",rules:[{required:!0,message:"请输入是否科技服务机构 0:否 1:是",trigger:"blur"}]},{label:"科技服务机构名称",prop:"sscienceName",rules:[{required:!0,message:"请输入科技服务机构名称",trigger:"blur"}]},{label:"是否技术转移机构 0:否 1:是",prop:"isTechnology",rules:[{required:!0,message:"请输入是否技术转移机构 0:否 1:是",trigger:"blur"}]},{label:"技术转移机构名称",prop:"stechnologyName",rules:[{required:!0,message:"请输入技术转移机构名称",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.sellerinfo_add,!1),viewBtn:this.vaildData(this.permission.sellerinfo_view,!1),delBtn:this.vaildData(this.permission.sellerinfo_delete,!1),editBtn:this.vaildData(this.permission.sellerinfo_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"4f5a":function(e,t,n){},"54aa":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.contractinfo_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("cc56"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"技术合同信息表id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同信息表id",trigger:"blur"}]},{label:"合同成交总金额",prop:"contractTotalAmount",rules:[{required:!0,message:"请输入合同成交总金额",trigger:"blur"}]},{label:"其中技术交易额",prop:"turnover",rules:[{required:!0,message:"请输入其中技术交易额",trigger:"blur"}]},{label:"金额支付方式",prop:"payType",rules:[{required:!0,message:"请输入金额支付方式",trigger:"blur"}]},{label:"合同签订日期",prop:"contractSignedTime",rules:[{required:!0,message:"请输入合同签订日期",trigger:"blur"}]},{label:"合同开始日期",prop:"contractStartTime",rules:[{required:!0,message:"请输入合同开始日期",trigger:"blur"}]},{label:"合同结束日期",prop:"contractEndTime",rules:[{required:!0,message:"请输入合同结束日期",trigger:"blur"}]},{label:"技术领域",prop:"technicalField",rules:[{required:!0,message:"请输入技术领域",trigger:"blur"}]},{label:"知识产权",prop:"knowledge",rules:[{required:!0,message:"请输入知识产权",trigger:"blur"}]},{label:"含专利数量",prop:"patentCount",rules:[{required:!0,message:"请输入含专利数量",trigger:"blur"}]},{label:"含发明专利数量",prop:"inventionCount",rules:[{required:!0,message:"请输入含发明专利数量",trigger:"blur"}]},{label:"含实用新型专利数量",prop:"pfumCount",rules:[{required:!0,message:"请输入含实用新型专利数量",trigger:"blur"}]},{label:"含外观设计专利数量",prop:"dpCount",rules:[{required:!0,message:"请输入含外观设计专利数量",trigger:"blur"}]},{label:"社会经济目标",prop:"socialGoals",rules:[{required:!0,message:"请输入社会经济目标",trigger:"blur"}]},{label:"技术服务的国民经济行业",prop:"nationalIndustry",rules:[{required:!0,message:"请输入技术服务的国民经济行业",trigger:"blur"}]},{label:"关联交易",prop:"trading",rules:[{required:!0,message:"请输入关联交易",trigger:"blur"}]},{label:"课题立项名称",prop:"projectName",rules:[{required:!0,message:"请输入课题立项名称",trigger:"blur"}]},{label:"课题立项编号",prop:"projectCode",rules:[{required:!0,message:"请输入课题立项编号",trigger:"blur"}]},{label:"科技成果登记部门批准登记号",prop:"registrationCode",rules:[{required:!0,message:"请输入科技成果登记部门批准登记号",trigger:"blur"}]},{label:"是否提成合同",prop:"isCommission",rules:[{required:!0,message:"请输入是否提成合同",trigger:"blur"}]},{label:"是否技术引进",prop:"isTechnology",rules:[{required:!0,message:"请输入是否技术引进",trigger:"blur"}]},{label:"知识产权归属 0:卖方 1:买方 2:共有",prop:"isIntellectual",rules:[{required:!0,message:"请输入知识产权归属 0:卖方 1:买方 2:共有",trigger:"blur"}]},{label:"发票类型 0:增值税普票 1:增值税专票",prop:"invoiceType",rules:[{required:!0,message:"请输入发票类型 0:增值税普票 1:增值税专票",trigger:"blur"}]},{label:"是否中介促成",prop:"isMediation",rules:[{required:!0,message:"请输入是否中介促成",trigger:"blur"}]},{label:"中介机构",prop:"mediationName",rules:[{required:!0,message:"请输入中介机构",trigger:"blur"}]},{label:"相关附件",prop:"accessory",rules:[{required:!0,message:"请输入相关附件",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractinfo_add,!1),viewBtn:this.vaildData(this.permission.contractinfo_view,!1),delBtn:this.vaildData(this.permission.contractinfo_delete,!1),editBtn:this.vaildData(this.permission.contractinfo_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},5589:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("表单例子")]),n("avue-form",{attrs:{option:e.option},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a={data:function(){return{form:{},option:{labelWidth:110,column:[{label:"用户名",prop:"username",row:!0},{label:"密码",prop:"password",type:"password",row:!0},{label:"再次输入密码",prop:"password",type:"newpassword",row:!0},{label:"申请日期",prop:"date",type:"date",row:!0},{label:"个性签名",prop:"textarea",type:"textarea",minRows:8,row:!0}]}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"561f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("数据展示")]),n("avue-data-pay",{attrs:{option:e.option}})],1)},i=[],a={data:function(){return{option:{}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"566a":function(e,t,n){"use strict";n("92ef")},5670:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.work_todo_handle?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleWork(t.row)}}},[e._v("处理\n      ")]):e._e(),e.permission.work_todo_detail?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDetail(t.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_todo_follow?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:u(u({},Object(o["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},this.query),{},{category:n.category?Object(c["a"])(n.category):null});this.loading=!0,Object(s["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("d169"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},5789:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[n("h3",[e._v("表格权限控制")]),n("avue-crud",{ref:"crud",attrs:{permission:e.permission,option:e.option,data:e.data},scopedSlots:e._u([{key:"expand",fn:function(t){return[e._v("\n        "+e._s(t)+"\n      ")]}}])})],1),n("basic-container",[e._v("\n    权限开关\n    "),n("el-switch",{attrs:{"active-value":!1,"inactive-value":!0,"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),n("p",[e._v("\n      具体参考"),n("a",{attrs:{href:"https://avuex.avue.top/#/doc/crud-permission"}},[e._v("https://avuex.avue.top/#/doc/crud-permission")])])],1)],1)},i=[],a={data:function(){return{text:!1,permission:{},option:{expand:!0,column:[{label:"姓名",prop:"name"},{label:"年龄",prop:"sex"}]},data:[{id:1,name:"张三",sex:12},{id:2,name:"李四",sex:20}]}},watch:{text:function(){!0===this.text?this.permission={delBtn:!1,addBtn:!1}:this.permission={delBtn:!0,addBtn:!0}}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"587b":function(e,t,n){"use strict";n("f7ab")},"58cf":function(e,t,n){"use strict";n("3ab2")},"5a80":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.unit_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("5766"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"",prop:"unitId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"dates",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"unit",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"orgcode",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"unitCategoryId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"unitCategoryName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"legalMan",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"address",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"postcode",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"stationId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"nation",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"nationId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"nationName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"legalManTel",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"legalManFax",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"legalManEmail",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"linkMan",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"linkManTel",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"linkManEmail",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"materials",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"CertificateNo",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"regDates",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isHightech",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"OwnedPark",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"Ownership",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"Intermediary",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"UnitHead",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"Treasurer",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"corpScale",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isInstitute",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isRd",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isListed",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"stockCode",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isTechtransfer",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"techtransferCategory",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"taxcode",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"remark",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"updateDates",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"flags",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isnation",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"isGJJGXQNQY",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"jsjdm",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"sfzh",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"hzzh",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"kjfwjg",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"kjfwjgView",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"kjfwjgmc",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"jszyjg",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"jszyjgmc",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"jszyjgmc",rules:[{required:!0,message:"请输入",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.unit_add,!1),viewBtn:this.vaildData(this.permission.unit_view,!1),delBtn:this.vaildData(this.permission.unit_delete,!1),editBtn:this.vaildData(this.permission.unit_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"5ad2":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("标签")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.push("/test/index")}}},[e._v("打开一个页面\n  ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.$avueRouter.closeTag("/test/index")}}},[e._v("关闭打开的页面\n  ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.$router.$avueRouter.closeTag()}}},[e._v("关闭本标签\n  ")])],1)},i=[],a={methods:{}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"5ae6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.attach_download?n("el-button",{attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:function(n){return e.handleDownload(t.row)}}},[e._v("下载\n      ")]):e._e()]}},{key:"attachSize",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.attachSize+" KB"))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.attach_upload?n("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-upload2"},on:{click:e.handleUpload}},[e._v("上 传\n      ")]):e._e(),e.permission.attach_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"附件管理","append-to-body":"",visible:e.attachBox,width:"555px"},on:{"update:visible":function(t){e.attachBox=t}}},[n("avue-form",{ref:"form",attrs:{option:e.attachOption,"upload-after":e.uploadAfter},model:{value:e.attachForm,callback:function(t){e.attachForm=t},expression:"attachForm"}})],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("b54a"),n("ac6a"),n("bd86")),o=n("6044"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},attachBox:!1,selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"附件地址",prop:"link",rules:[{required:!0,message:"请输入附件地址",trigger:"blur"}]},{label:"附件域名",prop:"domain",search:!0,rules:[{required:!0,message:"请输入附件域名",trigger:"blur"}]},{label:"附件名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入附件名称",trigger:"blur"}]},{label:"附件原名",prop:"originalName",search:!0,rules:[{required:!0,message:"请输入附件原名",trigger:"blur"}]},{label:"附件拓展名",prop:"extension",rules:[{required:!0,message:"请输入附件拓展名",trigger:"blur"}]},{label:"附件大小",prop:"attachSize",slot:!0,rules:[{required:!0,message:"请输入附件大小",trigger:"blur"}]}]},data:[],attachForm:{},attachOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"附件上传",prop:"attachFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},action:"/api/blade-resource/oss/endpoint/put-file-attach"}]}}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:!1,editBtn:!1,viewBtn:!1,delBtn:this.vaildData(this.permission.attach_delete,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handleUpload:function(){this.attachBox=!0},uploadAfter:function(e,t,n,r){window.console.log(r),this.attachBox=!1,this.refreshChange(),t()},handleDownload:function(e){window.open("".concat(e.link))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"5bab":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,page:e.page,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("bd86")),o=n("62ed"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",search:!0},{label:"服务host",prop:"serverHost",search:!0},{label:"服务ip",prop:"serverIp"},{label:"软件环境",prop:"env",width:"80"},{label:"日志级别",prop:"logLevel"},{label:"日志id",prop:"logId"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"日志数据",prop:"logData",type:"textarea",span:24,minRows:2,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_usual_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getUsualLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getUsualList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"5cfa":function(e,t,n){"use strict";n("bc1c")},"5d43":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(n){return n.stopPropagation(),e.handleHistory(t.row)}}},[e._v("审核意见\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(n){return n.stopPropagation(),e.handleContractDetail(t.row)}}},[e._v("重新调整\n      ")])]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"免税申请",visible:e.freeIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.freeIsShow=t}}},[n("avue-form",{ref:"freeForm",attrs:{option:e.freeOption},on:{submit:e.handleSubmit},model:{value:e.freeForm,callback:function(t){e.freeForm=t},expression:"freeForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.freeIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确 定")])],1)],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("28a5"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("2f62"),c=n("1e69"),l=n("7208"),u=n("c832"),d=n.n(u),p=n("cfda"),h=n("483e"),g=n("738e"),f=n("4ba7"),m=n("8ddc");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={data:function(){return{freeIsShow:!1,freeForm:{},freeRow:{},form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!1,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:220,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",hide:!0,width:100},{label:"项目名称",prop:"projectName",bind:"contractList.projectName",minWidth:160,overHidden:!0},{label:"合同登记号",bind:"contractList.contractRegistrationNumber",minWidth:160},{label:"办件编号",bind:"contractList.contractCode",overHidden:!0,minWidth:160,search:!0,rules:[]},{type:"number",precision:2,minWidth:118,label:"合同总金额（元）",prop:"totalAmount",bind:"contractExecution.totalAmount",labelTip:"合同总金额，单位（元），根据合同申请信息自动填充。",labelTipPlacement:"right",placeholder:"根据合同申请信息自动填充",disabled:!0,display:!1,rules:[{required:!0,message:"请输入合同总金额",trigger:"blur"}]},{type:"number",precision:2,label:"技术交易额(元）",bind:"contractExecution.turnover",minWidth:120,prop:"turnover",disabled:!0,display:!1,placeholder:"根据合同申请信息自动填充",labelTip:"技术交易额，单位（元），根据合同申请信息自动填充。",labelTipPlacement:"right",rules:[{required:!0,message:"请输入技术交易额",trigger:"blur"}]},{type:"number",precision:2,label:"本次实现合同金额",minWidth:120,display:!1,prop:"contractDeal",bind:"contractExecution.contractDeal",rules:[{required:!0,message:"请输入本次实现合同交易额",trigger:"blur"}]},{type:"number",precision:2,minWidth:160,label:"本次实现技术性收入(元）",prop:"technicalIncome",bind:"contractExecution.technicalIncome",display:!1,rules:[{required:!0,message:"请输入本次实现技术性收入",trigger:"blur"}]},{label:"财务负责人",prop:"financialOfficer",minWidth:100,bind:"contractExecution.financialOfficer",display:!1,rules:[{required:!0,message:"请输入财务负责人",trigger:"blur"}]},{label:"单位负责人",prop:"unitOfficer",minWidth:100,bind:"contractExecution.unitOfficer",display:!1,rules:[{required:!0,message:"请输入单位负责人",trigger:"blur"}]},{label:"申请时间",prop:"createTime",width:165}]},freeOption:f["freeOption"],data:[],flowList:[],flowListIsShow:!1,flowListOption:f["flowListOption"]}},computed:v(v({},Object(s["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;Object(m["getDictionary"])({code:"free-reason"}).then((function(t){var n=e.findObject(e.flowListOption.column,"reason");n.dicData=d()(t,"data.data",[]),e.reasonList=t.data.data}))},handleSubmit:function(){var e=this;this.$refs.freeForm.validate((function(t){t?e.updateContractexecution():e.$message.warning("请填写必填项")}))},updateContractexecution:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(p["update"])(this.freeForm);case 4:if(t=e.sent,n=t.data,200===n.code){e.next=8;break}return e.abrupt("return",this.$alert(n.msg,"提交失败",{confirmButtonText:"确定",callback:function(){}}));case 8:return r={taskId:this.freeRow.taskId,processInstanceId:this.freeRow.processInstanceId,flag:"ok",contractExecutionId:this.freeForm.id},e.next=11,Object(h["completeTask"])(r);case 11:i=e.sent,d()(i,"data.success")?this.$alert("等待审核，审核结果会发送短信到注册手机号","提交成功",{confirmButtonText:"确定",type:"warning",callback:function(){a.freeIsShow=!1,a.onLoad(a.page)}}):this.$alert(n.msg,"提交失败",{confirmButtonText:"确定",type:"warning",callback:function(){}}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),window.console.log(e.t0);case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}(),searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(l["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleContractDetail:function(e){this.freeIsShow=!0,this.freeRow=e,this.freeForm=d()(e,"contractExecution",{}),delete this.freeForm.auditTime,delete this.freeForm.auditTimeStr},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=v(v({},this.query),{},{category:"flow_5"});this.loading=!0,Object(c["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleHistory:function(e){var t=this;Object(g["historyFlowList"])(e.processInstanceId).then((function(e){var n=d()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))}},created:function(){this.initData()}},w=y,O=(n("645c"),n("2877")),j=Object(O["a"])(w,r,i,!1,null,null,null);t["default"]=j.exports},"5d8a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleAdd(t.row,t.index)}}},[e._v("新增子项\n      ")]):e._e()]}},{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.menu_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("a6dc"),s=n("2f62"),c=n("2457"),l=n("d9a3");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},query:{},loading:!0,selectionList:[],parentId:0,page:{pageSize:10,currentPage:1,total:0},option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,menuWidth:300,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicData:[],hide:!0,addDisabled:!1,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,iconList:c["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",search:!0,rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",disabled:!1,dicData:[{label:"否",value:1},{label:"是",value:2}],value:1,rules:[{required:!0,message:"请选择新窗口打开",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",row:!0,span:24,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:2,hide:!0}]},data:[]}},watch:{"form.category":function(){var e=l["a"].toInt(this.form.category);this.$refs.crud.option.column.filter((function(t){"path"===t.prop&&(t.rules[0].required=1===e),"isOpen"===t.prop&&(t.disabled=2===e)}))}},computed:d(d({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;Object(o["getMenuTree"])().then((function(t){var n=e.findObject(e.option.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.parentId=e.id;var t=this.findObject(this.option.column,"parentId");t.value=e.id,t.addDisabled=!0,this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(n){var i=n.data.data;e.id=i.id,r.$message({type:"success",message:"操作成功!"}),t(e)}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n(e)}),(function(e){window.console.log(e),r()}))},rowDel:function(e,t,n){var r=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){r.$message({type:"success",message:"操作成功!"}),n(e)})).catch((function(){r.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.data=[],e.parentId=0,e.$refs.crud.refreshTable(),e.$refs.crud.toggleSelection(),e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"})})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(o["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.parentId="";var t=this.findObject(this.option.column,"parentId");t.value="",t.addDisabled=!1,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getLazyList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var r=e.id;Object(o["getLazyList"])(r).then((function(e){n(e.data.data)}))}}},h=p,g=n("2877"),f=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},"5e0a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,page:e.page,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.code_edit?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",icon:"el-icon-document-copy",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleCopy(t.row)}}},[e._v("复制\n      ")]):e._e()]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.code_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),n("el-button",{attrs:{type:"primary",size:"small",plain:"",icon:"el-icon-refresh"},on:{click:e.handleBuild}},[e._v("代码生成\n      ")])],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("736a"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],loading:!0,query:{},page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,dialogWidth:900,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,labelWidth:120,viewBtn:!0,dialogClickModal:!1,column:[{label:"数据源",prop:"datasourceId",search:!0,span:24,type:"select",dicUrl:"/api/blade-develop/datasource/select",props:{label:"name",value:"id"},rules:[{required:!0,message:"请选择数据源",trigger:"blur"}]},{label:"模块名",prop:"codeName",search:!0,rules:[{required:!0,message:"请输入模块名",trigger:"blur"}]},{label:"服务名",prop:"serviceName",search:!0,rules:[{required:!0,message:"请输入服务名",trigger:"blur"}]},{label:"表名",prop:"tableName",rules:[{required:!0,message:"请输入表名",trigger:"blur"}]},{label:"表前缀",prop:"tablePrefix",hide:!0,rules:[{required:!0,message:"请输入表前缀",trigger:"blur"}]},{label:"主键名",prop:"pkName",hide:!0,rules:[{required:!0,message:"请输入主键名",trigger:"blur"}]},{label:"包名",prop:"packageName",overHidden:!0,rules:[{required:!0,message:"请输入包名",trigger:"blur"}]},{label:"基础业务",prop:"baseMode",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",props:{label:"dictValue",value:"dictKey"},dataType:"number",hide:!0,rules:[{required:!0,message:"请选择基础业务",trigger:"blur"}]},{label:"包装器",prop:"wrapMode",type:"radio",dicUrl:"/api/blade-system/dict/dictionary?code=yes_no",props:{label:"dictValue",value:"dictKey"},dataType:"number",hide:!0,rules:[{required:!0,message:"请选择包装器",trigger:"blur"}]},{label:"后端生成路径",prop:"apiPath",span:24,hide:!0,rules:[{required:!0,message:"请输入后端生成路径",trigger:"blur"}]},{label:"前端生成路径",prop:"webPath",span:24,hide:!0,rules:[{required:!0,message:"请输入前端生成路径",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.code_add,!1),viewBtn:this.vaildData(this.permission.code_view,!1),delBtn:this.vaildData(this.permission.code_delete,!1),editBtn:this.vaildData(this.permission.code_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleBuild:function(){var e=this;0!==this.selectionList.length?this.$confirm("是否生成选中模块的代码?",{title:"代码生成确认",confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["build"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleCopy:function(e){var t=this;Object(o["copy"])(e.id).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"复制成功!"})}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getCode"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=(n("cc24"),n("2877")),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"5f83":function(e,t,n){"use strict";n("79ae")},"60f8":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.role_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{size:"small",icon:"el-icon-setting",plain:""},on:{click:e.handleRole}},[e._v("权限设置\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"角色权限配置","append-to-body":"",visible:e.box,width:"345px"},on:{"update:visible":function(t){e.box=t}}},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"菜单权限"}},[n("el-tree",{ref:"treeMenu",attrs:{data:e.menuGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.menuTreeObj,props:e.props}})],1),n("el-tab-pane",{attrs:{label:"数据权限"}},[n("el-tree",{ref:"treeDataScope",attrs:{data:e.dataScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.dataScopeTreeObj,props:e.props}})],1),n("el-tab-pane",{attrs:{label:"接口权限"}},[n("el-tree",{ref:"treeApiScope",attrs:{data:e.apiScopeGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.apiScopeTreeObj,props:e.props}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.box=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("3528"),s=n("2f62"),c=n("1ca4");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},box:!1,props:{label:"title",value:"key"},menuGrantList:[],dataScopeGrantList:[],apiScopeGrantList:[],apiGrantList:[],menuTreeObj:[],dataScopeTreeObj:[],apiScopeTreeObj:[],selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,dialogWidth:900,dialogClickModal:!1,defaultSort:{prop:"sort",order:"descending"},column:[{label:"角色名称",prop:"roleName",search:!0,span:24,rules:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",addDisplay:!1,editDisplay:!1,viewDisplay:c["a"].tenantMode,span:24,props:{label:"tenantName",value:"tenantId"},hide:!c["a"].tenantMode,search:c["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"角色别名",prop:"roleAlias",search:!0,span:24,rules:[{required:!0,message:"请输入角色别名",trigger:"blur"}]},{label:"上级角色",prop:"parentId",dicData:[],type:"tree",hide:!0,span:24,props:{label:"title"},rules:[{required:!1,message:"请选择上级角色",trigger:"click"}]},{label:"角色排序",prop:"sort",type:"number",span:24,rules:[{required:!0,message:"请输入角色排序",trigger:"blur"}]}]},data:[]}},computed:u(u({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.role_add,!1),viewBtn:this.vaildData(this.permission.role_view,!1),delBtn:this.vaildData(this.permission.role_delete,!1),editBtn:this.vaildData(this.permission.role_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},idsArray:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e}}),methods:{initData:function(){var e=this;Object(o["getRoleTree"])().then((function(t){var n=e.findObject(e.option.column,"parentId");n.dicData=t.data.data}))},submit:function(){var e=this,t=this.$refs.treeMenu.getCheckedKeys(),n=this.$refs.treeDataScope.getCheckedKeys(),r=this.$refs.treeApiScope.getCheckedKeys();Object(o["grant"])(this.idsArray,t,n,r).then((function(){e.box=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){["add","edit"].includes(t)&&this.initData(),e()},handleRole:function(){var e=this;1===this.selectionList.length?(this.menuTreeObj=[],this.dataScopeTreeObj=[],this.apiScopeTreeObj=[],Object(o["grantTree"])().then((function(t){e.menuGrantList=t.data.data.menu,e.dataScopeGrantList=t.data.data.dataScope,e.apiScopeGrantList=t.data.data.apiScope,Object(o["getRole"])(e.ids).then((function(t){e.menuTreeObj=t.data.data.menu,e.dataScopeTreeObj=t.data.data.dataScope,e.apiScopeTreeObj=t.data.data.apiScope,e.box=!0}))}))):this.$message.warning("只能选择一条数据")},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},"645c":function(e,t,n){"use strict";n("7558")},"646e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.row;return[e.permission.api_scope_setting?n("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(r)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-drawer",{attrs:{title:"["+e.scopeMenuName+"] 接口权限配置",visible:e.drawerVisible,direction:e.direction,"append-to-body":"","before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("basic-container",[n("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("7f7f"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("a6dc"),s=n("7e26"),c=n("2f62"),l=n("2457");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeLoading:!1,scopeMenuId:0,scopeMenuName:"菜单",menu:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"/api/blade-system/menu/tree",hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:l["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限路径",prop:"scopePath",width:180,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"接口类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=api_scope_type",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:100,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},computed:d(d({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getLazyMenuList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var r=e.id;Object(o["getLazyMenuList"])(r).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var r=this;e=d(d({},e),{},{menuId:this.scopeMenuId}),Object(s["addApiScope"])(e).then((function(){r.onLoadScope(r.pageScope),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,r){var i=this;e=d(d({},e),{},{menuId:this.scopeMenuId}),Object(s["updateApiScope"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeApiScope"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeApiScope"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getMenuApiScope"])(this.formScope.id).then((function(e){n.formScope=e.data.data})),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var r=d(d({},n),{},{menuId:this.scopeMenuId});Object(s["getListApiScope"])(e.currentPage,e.pageSize,Object.assign(r,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},h=p,g=n("2877"),f=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},"672f":function(e,t,n){},6856:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.bladeprocessregistration_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("c401"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"编号",prop:"id",rules:[{required:!0,message:"请输入编号",trigger:"blur"}]},{label:"流程定义主键",prop:"processDefinitionId",rules:[{required:!0,message:"请输入流程定义主键",trigger:"blur"}]},{label:"流程实例主键",prop:"processInstanceId",rules:[{required:!0,message:"请输入流程实例主键",trigger:"blur"}]},{label:"开始时间",prop:"startTime",rules:[{required:!0,message:"请输入开始时间",trigger:"blur"}]},{label:"结束时间",prop:"endTime",rules:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},{label:"技术合同id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同id",trigger:"blur"}]},{label:"第一级审批人",prop:"taskaUser",rules:[{required:!0,message:"请输入第一级审批人",trigger:"blur"}]},{label:"第一级审批人意见",prop:"taskaOpinion",rules:[{required:!0,message:"请输入第一级审批人意见",trigger:"blur"}]},{label:"第二级审批人",prop:"taskbUser",rules:[{required:!0,message:"请输入第二级审批人",trigger:"blur"}]},{label:"第二级审批人意见",prop:"taskbOpinion",rules:[{required:!0,message:"请输入第二级审批人意见",trigger:"blur"}]},{label:"第三级审批人",prop:"taskcUser",rules:[{required:!0,message:"请输入第三级审批人",trigger:"blur"}]},{label:"第三级审批人意见",prop:"taskcOpinion",rules:[{required:!0,message:"请输入第三级审批人意见",trigger:"blur"}]},{label:"申请时间",prop:"applyTime",rules:[{required:!0,message:"请输入申请时间",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.bladeprocessregistration_add,!1),viewBtn:this.vaildData(this.permission.bladeprocessregistration_view,!1),delBtn:this.vaildData(this.permission.bladeprocessregistration_delete,!1),editBtn:this.vaildData(this.permission.bladeprocessregistration_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"686b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("5766"),s=n("2f62"),c=n("8ddc"),l=n("c832"),u=n.n(l),d=n("c663");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:d["unitOption"],data:[]}},computed:h(h({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.unit_add,!1),viewBtn:this.vaildData(this.permission.unit_view,!1),delBtn:this.vaildData(this.permission.unit_delete,!1),editBtn:this.vaildData(this.permission.unit_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData()},methods:{initData:function(){var e=this;Object(c["getChildList"])(1,1e4,"519").then((function(t){var n=e.findObject(e.option.column,"ownerShip");n.dicData=u()(t,"data.data",[])}))},handleJoin:function(e){this.$emit("select",e)},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;console.log("row :>> ",e),Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data,console.log("this.form :>> ",e.data.data,n.form)})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},f=g,m=n("2877"),b=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},"68c9":function(e,t,n){},"692e":function(e,t,n){var r={"./App.vue":"3dfd","./components/basic-block/main.vue":"c0fb","./components/basic-container/main.vue":"dc8a","./components/error-page/403.vue":"a8d0","./components/error-page/404.vue":"a5fa","./components/error-page/500.vue":"611b","./components/iframe/main.vue":"c1a1","./components/third-register/main.vue":"63e7","./page/index/index.vue":"9cc4","./page/index/layout.vue":"9277","./page/index/logo.vue":"7d3a","./page/index/search.vue":"76c2","./page/index/sidebar/index.vue":"20bf","./page/index/sidebar/sidebarItem.vue":"7505","./page/index/tags.vue":"5ddc","./page/index/top/index.vue":"195f","./page/index/top/top-color.vue":"44b2","./page/index/top/top-lang.vue":"c7cc","./page/index/top/top-lock.vue":"14cd","./page/index/top/top-logs.vue":"0f22","./page/index/top/top-menu.vue":"286c","./page/index/top/top-notice.vue":"ad51","./page/index/top/top-search.vue":"9812","./page/index/top/top-theme.vue":"107f","./page/lock/index.vue":"15c5","./page/login/authredirect.vue":"84a6","./page/login/auto-login.vue":"6e90","./page/login/codelogin.vue":"acd4","./page/login/index.vue":"5596","./page/login/test-login.vue":"c958","./page/login/thirdlogin.vue":"124f","./page/login/userlogin.vue":"7c05","./page/logs/index.vue":"08ae","./views/api/agencypoint.vue":"bed0","./views/api/agencystation.vue":"e3c0","./views/api/announcementmanagement.vue":"12ca","./views/api/basicinformation.vue":"fa6f","./views/api/basicinformationchild.vue":"f15f","./views/api/bladeprocessapply.vue":"d2e7","./views/api/bladeprocessfree.vue":"f472","./views/api/bladeprocessregistration.vue":"6856","./views/api/buyerinfo.vue":"8318","./views/api/contractexecution.vue":"7f12","./views/api/contractinfo.vue":"54aa","./views/api/contractlist.vue":"764e","./views/api/freistellungsauftrag.vue":"c611","./views/api/sellerinfo.vue":"4bfb","./views/api/unit.vue":"5a80","./views/authority/apiscope.vue":"646e","./views/authority/datascope.vue":"879d","./views/authority/role.vue":"60f8","./views/base/region.vue":"0f19","./views/code-search/index.vue":"0b72","./views/contract-check/index.vue":"0ed6","./views/contract-push-result/index.vue":"f5ac","./views/contract-push/index.vue":"8cf3","./views/contract-search/index.vue":"2a06","./views/contract-todo/contract-todo.vue":"b9b5","./views/contract-todo/free-todo.vue":"5d43","./views/contract/components/unit.vue":"207b","./views/contract/contract-info.vue":"096f","./views/contract/index.vue":"7ffa","./views/desk/notice/index.vue":"38a29","./views/desk/notice/notice-detail.vue":"3a0d","./views/flow/deploy.vue":"f072","./views/flow/follow.vue":"41c2","./views/flow/manager.vue":"2498","./views/flow/model.vue":"95d0","./views/free-check/index.vue":"25d8","./views/free-query/index.vue":"bdfa","./views/free-reject/index.vue":"fcf4","./views/free-search/index.vue":"889f","./views/free/free-list.vue":"593c","./views/free/index.vue":"60be","./views/manager/gathermenu.vue":"b782","./views/manager/incitesdata.vue":"c63d","./views/manager/incitesgather.vue":"99bd","./views/manager/indexitemsgather.vue":"1dec","./views/manager/indexitemsgatherdetails.vue":"0c09","./views/manager/wosdata.vue":"4b67","./views/manager/wosgather.vue":"8a5e","./views/monitor/log/api.vue":"2ba9","./views/monitor/log/error.vue":"7501","./views/monitor/log/usual.vue":"5bab","./views/report/reportlist.vue":"37fc","./views/resource/attach.vue":"5ae6","./views/resource/oss.vue":"464a","./views/resource/sms.vue":"2257","./views/statistics/nation-table.vue":"d92f","./views/statistics/report-table.vue":"7122","./views/system/client.vue":"9765","./views/system/dept.vue":"88b6","./views/system/dict.vue":"6bce","./views/system/dictbiz.vue":"b74c","./views/system/menu.vue":"5d8a","./views/system/param.vue":"09e0f","./views/system/post.vue":"156f","./views/system/tenant.vue":"14a7","./views/system/topmenu.vue":"e62a","./views/system/unit.vue":"721e","./views/system/user.vue":"b979","./views/system/userinfo.vue":"095a","./views/test.vue":"2762","./views/tool/code.vue":"5e0a","./views/tool/datasource.vue":"8ef7","./views/unit-user/index.vue":"ef0b","./views/unit/index.vue":"686b","./views/user-check/index.vue":"42b2","./views/util/affix.vue":"9b9b","./views/util/cache.vue":"f100","./views/util/crud-form.vue":"7eb6","./views/util/data.vue":"561f","./views/util/demo/dict-classic.vue":"0983","./views/util/demo/dict-horizontal.vue":"6486","./views/util/demo/dict-vertical.vue":"dd4b","./views/util/form-detail.vue":"a597","./views/util/form.vue":"5589","./views/util/logs.vue":"2004","./views/util/permission.vue":"5789","./views/util/store.vue":"88b0","./views/util/table.vue":"41cf","./views/util/tags.vue":"5ad2","./views/util/test.vue":"ab5c","./views/util/top.vue":"d4c8","./views/wel/components/flow.vue":"8e09","./views/wel/dashboard.vue":"4b9f","./views/wel/index.vue":"4e3c","./views/work/claim.vue":"75de","./views/work/done.vue":"cdc3","./views/work/process/apply/detail.vue":"fc18","./views/work/process/apply/form.vue":"f6b7","./views/work/process/apply/handle.vue":"21a9","./views/work/process/free/detail.vue":"7df8","./views/work/process/free/form.vue":"4885","./views/work/process/free/handle.vue":"c74f","./views/work/process/leave/detail.vue":"d26f","./views/work/process/leave/form.vue":"eaa2","./views/work/process/leave/handle.vue":"6e96","./views/work/process/register/detail.vue":"ef4a","./views/work/process/register/form.vue":"d3e6","./views/work/process/register/handle.vue":"5ff5","./views/work/send.vue":"2287","./views/work/start.vue":"d9b8","./views/work/todo.vue":"5670"};function i(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id="692e"},"6b2e":function(e,t,n){},"6bce":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:11}},[n("basic-container",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("字典列表")])]),n("div",{staticClass:"clearfix"},[n("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1),n("el-col",{attrs:{span:13}},[n("basic-container",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("["+e._s(e.dictValue)+"] 字典详情")])]),n("div",{staticClass:"clearfix"},[n("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleAdd(t.row,t.index)}}},[e._v("新增子项\n              ")]):e._e()]}},{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("7754"),s=n("cee8"),c=n("2f62");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:u(u({},Object(c["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dict_add,!1),delBtn:this.vaildData(this.permission.dict_delete,!1),editBtn:this.vaildData(this.permission.dict_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(o["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){this.$refs.crudChild.value.dictValue="",this.$refs.crudChild.value.dictKey="",this.$refs.crudChild.value.sort=0,this.$refs.crudChild.value.isSealed=0,this.$refs.crudChild.value.remark="",this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"parentId"===t.prop&&(t.value=e.id)})),this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var r=this,i=u(u({},e),{},{dictKey:-1});Object(o["add"])(i).then((function(){r.onLoadParent(r.pageParent),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),i.onLoadChild(i.pageChild),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue,this.$refs.crudChild.value.code=e.code,this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code),"parentId"===t.prop&&(t.value=e.id)})),this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoadChild(r.pageChild),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(o["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){var t=this;this.$refs.crudChild.value.parentId=this.parentId,this.$refs.crudChild.option.column.filter((function(e){"parentId"===e.prop&&(e.value=t.parentId)})),e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(o["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},7122:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-form",{attrs:{option:e.soption},on:{submit:e.submit},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,search:e.query,permission:e.permissionList},on:{"update:search":function(t){e.query=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{icon:"el-icon-download",size:"small",type:"primary",plain:""}},[e._v("导出")])],1)],2):e._e()],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("2f62"),c=n("fcb7"),l=n("c0c7"),u=n("c832"),d=n.n(u);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={data:function(){return{userInfo:null,form:{},query:{},page:{pageSize:10,currentPage:1,total:0},loading:!1,selectionList:[],soption:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:260,searchLabelWidth:130,border:!0,stripe:!0,index:!0,viewBtn:!1,submitText:"统计",editBtn:!1,menu:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!1,searchShow:!1,searchIndex:3,header:!0,searchIcon:!0,dialogClickModal:!1,column:[{type:"select",label:"申报类型",hide:!0,display:!0,span:8,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,dicMethod:"get"},{type:"tree",label:"登记站",span:8,hide:!0,display:!1,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0},{type:"tree",label:"登记处",hide:!0,span:8,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint"},{label:"提交时间",prop:"submitTime",hide:!0,type:"daterange",minWidth:150,searchRange:!0,span:8,valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"创建时间",hide:!0,prop:"pushTime",type:"daterange",searchRange:!0,searchSpan:10,search:!0,span:8,minWidth:150,valueFormat:"yyyy-MM-dd HH:mm:ss"},{type:"select",label:"统计指标",span:12,props:{label:"label",value:"value"},search:!0,value:"contractCategory",prop:"target",dicData:[{label:"合同类型构成",value:"contractCategory"},{label:"知识产权构成",value:"Knowledge"},{label:"技术领域构成",value:"TechnicalField"},{label:"技术输出方构成",value:"SellerNature"},{label:"技术吸纳（购买）方构成",value:"BuyerNature"},{label:"技术输出地区构成",value:"SellerRegin"},{label:"技术购买地区构成",value:"BuyerRegin"}]}]},option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:260,searchLabelWidth:130,border:!0,stripe:!0,index:!0,viewBtn:!1,submitText:"统计",editBtn:!1,menu:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!1,searchShow:!1,searchIndex:3,header:!0,searchIcon:!0,dialogClickModal:!1,column:[{label:"合同类型",prop:"contractType",minWidth:100,overHidden:!0,display:!1,search:!1},{label:"合同数（项）",prop:"contractCount",minWidth:100,overHidden:!0,display:!1,search:!1},{label:"成交总金额（万元）",prop:"contractTotalAmount",minWidth:100,overHidden:!0,display:!1,search:!1},{label:"技术交易额（万元）",prop:"turnover",minWidth:100,overHidden:!0,display:!1,search:!1},{label:"占全省成交总金额的比率（%）",prop:"contractRatio",minWidth:100,overHidden:!0,display:!1,search:!1},{label:"所含卖方数量",prop:"sellerCount",minWidth:100,overHidden:!0,display:!1,search:!1}]},data:[]}},components:{},computed:h(h({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),contractDelBtn:this.vaildData(this.permission.contract_search_delete,!1),editBtn:this.vaildData(this.permission.contract_search_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData(),this.getUserInfo()},methods:{initData:function(e){var t=this;Object(c["getDeptTree"])(e).then((function(e){var n=t.findObject(t.soption.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.soption.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o}))},getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,c,u=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){u.userInfo=r})),i=r.roleId,i.includes("1375342244055232513")&&(a=this.findObject(this.option.column,"contractCode"),a.hide=!0),o=["1351364540907913218","1351364671552094210"],s=o.some((function(e){return i.includes(e)})),s&&(c=["isClassified","isLarge","isOutside","rejectStatus","isFree"],c.forEach((function(e){var t=u.findObject(u.option.column,e);t.hide=!0}))),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),submit:function(e,t){this.onLoad().then((function(){t()}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,t=h({},this.query),n=t.submitTime,r=t.pushTime,n&&(t.startDate=n[0],t.endDate=n[1],t.submitTime=null),r&&(t.upstartDate=r[0],t.upendDate=r[1],t.pushTime=null),e.next=8,this.$http({url:"/api/api/statistics/report",method:"post",data:t});case 8:if(i=e.sent,a=d()(i,"data",{}),o=a.data,s=a.code,c=a.msg,200===s){e.next=12;break}return e.abrupt("return",this.$alert(c||"服务器异常","提交失败",{confirmButtonText:"确定",callback:function(){}}));case 12:this.data=o,e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log("error :>> ",e.t0);case 18:return e.prev=18,this.loading=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[0,15,18,21]])})));function t(){return e.apply(this,arguments)}return t}()}},f=g,m=(n("c0bf"),n("2877")),b=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},7208:function(e,t,n){"use strict";function r(e){return"flow_".concat(e)}function i(e,t){var n=e.filter((function(e){return e.routeKey===t}));return 0===n.length?[]:n[0].routeValue}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}))},7291:function(e,t,n){},7501:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,"before-open":e.beforeOpen,permission:e.permissionList,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("6762"),n("2fdb"),n("bd86")),o=n("62ed"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:120,dialogType:"drawer",column:[{label:"服务id",prop:"serviceId",search:!0,width:"120"},{label:"服务host",prop:"serverHost",search:!0,width:"150"},{label:"服务ip",prop:"serverIp",width:"160"},{label:"软件环境",prop:"env",width:"80"},{label:"请求方法",prop:"method",width:"80"},{label:"请求接口",prop:"requestUri"},{label:"日志时间",prop:"createTime",width:"180"},{label:"用户代理",prop:"userAgent",span:24,hide:!0},{label:"请求数据",prop:"params",type:"textarea",span:24,minRows:2,hide:!0},{label:"日志数据",prop:"stackTrace",type:"textarea",span:24,minRows:16,hide:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{viewBtn:this.vaildData(this.permission.log_error_view,!1)}}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getErrorLogs"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getErrorList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},7558:function(e,t,n){},"75de":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.work_claim_sign?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleClaim(t.row)}}},[e._v("签收\n      ")]):e._e(),e.permission.work_claim_detail?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDetail(t.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_claim_follow?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:u(u({},Object(o["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleClaim:function(e){var t=this;this.$confirm("确定签收此任务?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["claimTask"])(e.taskId)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},this.query),{},{category:n.category?Object(c["a"])(n.category):null});this.loading=!0,Object(s["claimList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("a683"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},"764e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.contractlist_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("799f"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"申报类型 0:否 1:是",prop:"declareType",rules:[{required:!0,message:"请输入申报类型 0:否 1:是",trigger:"blur"}]},{label:"项目名称",prop:"projectName",rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"项目计划来源",prop:"projectPlanFrom",rules:[{required:!0,message:"请输入项目计划来源",trigger:"blur"}]},{label:"合同类型",prop:"contractType",rules:[{required:!0,message:"请输入合同类型",trigger:"blur"}]},{label:"合同成交总金额",prop:"contractTotalAmount",rules:[{required:!0,message:"请输入合同成交总金额",trigger:"blur"}]},{label:"是否军民两用合同 0:否 1:是",prop:"isClassified",rules:[{required:!0,message:"请输入是否军民两用合同 0:否 1:是",trigger:"blur"}]},{label:"登记站",prop:"kiosk",rules:[{required:!0,message:"请输入登记站",trigger:"blur"}]},{label:"是否免税申请 0:否 1:是",prop:"isFree",rules:[{required:!0,message:"请输入是否免税申请 0:否 1:是",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"769e":function(e,t,n){},"79ae":function(e,t,n){},"7eb6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("点击新增或编辑跳转到新的页面")]),n("avue-crud",{attrs:{option:e.option,data:e.data},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.row;return[n("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(t){return e.handleForm(r.id)}}},[e._v("edit")])]}}])},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-plus"},on:{click:function(t){return e.handleForm()}}},[e._v("add")])],1)],2)],1)},i=[],a={data:function(){return{option:{addBtn:!1,editBtn:!1,column:[{label:"姓名",prop:"name"}]},data:[{id:1,name:"small"}]}},methods:{handleForm:function(e){this.$router.push({path:"/form-detail/index",query:{id:e}})}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"7f12":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.contractexecution_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("cfda"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,labelWidth:140,column:[{label:"合同总金额",prop:"totalAmount",rules:[{required:!0,message:"请输入合同总金额",trigger:"blur"}]},{label:"技术交易额",prop:"turnover",rules:[{required:!0,message:"请输入技术交易额",trigger:"blur"}]},{label:"本次实现合同交易额",prop:"contractDeal",rules:[{required:!0,message:"请输入本次实现合同交易额",trigger:"blur"}]},{label:"原材料购置费(零部件)",prop:"rawmaterialsAmount",rules:[{required:!0,message:"请输入原材料购置费(零部件)",trigger:"blur"}]},{label:"实验费用",prop:"experimentCost",rules:[{required:!0,message:"请输入实验费用",trigger:"blur"}]},{label:"差旅费",prop:"travelCost",rules:[{required:!0,message:"请输入差旅费",trigger:"blur"}]},{label:"设备购置费(样机)",prop:"equipmentAmount",rules:[{required:!0,message:"请输入设备购置费(样机)",trigger:"blur"}]},{label:"人员工资",prop:"salary",rules:[{required:!0,message:"请输入人员工资",trigger:"blur"}]},{label:"管理费",prop:"managementFee",rules:[{required:!0,message:"请输入管理费",trigger:"blur"}]},{label:"折旧费",prop:"depreciationCost",rules:[{required:!0,message:"请输入折旧费",trigger:"blur"}]},{label:"研发、设计费",prop:"designCost",rules:[{required:!0,message:"请输入研发、设计费",trigger:"blur"}]},{label:"发票号",prop:"invoiceCode",rules:[{required:!0,message:"请输入发票号",trigger:"blur"}]},{label:"外协费用",prop:"outsourcingCost",rules:[{required:!0,message:"请输入外协费用",trigger:"blur"}]},{label:"合计",prop:"combined",rules:[{required:!0,message:"请输入合计",trigger:"blur"}]},{label:"本次实现技术性收入",prop:"technicalIncome",rules:[{required:!0,message:"请输入本次实现技术性收入",trigger:"blur"}]},{label:"财务负责人",prop:"financialOfficer",rules:[{required:!0,message:"请输入财务负责人",trigger:"blur"}]},{label:"单位负责人",prop:"unitOfficer",rules:[{required:!0,message:"请输入单位负责人",trigger:"blur"}]},{label:"专家意见",prop:"expertOpinion",rules:[{required:!0,message:"请输入专家意见",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}],display:!0},{label:"技术合同信息表id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同信息表id",trigger:"blur"}],display:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractexecution_add,!1),viewBtn:this.vaildData(this.permission.contractexecution_view,!1),delBtn:this.vaildData(this.permission.contractexecution_delete,!1),editBtn:this.vaildData(this.permission.contractexecution_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},8318:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.buyerinfo_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("c90a"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"技术合同信息表id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同信息表id",trigger:"blur"}]},{label:"买方名称",prop:"buyerName",rules:[{required:!0,message:"请输入买方名称",trigger:"blur"}]},{label:"社会统一信用代码",prop:"borganizationCode",rules:[{required:!0,message:"请输入社会统一信用代码",trigger:"blur"}]},{label:"买方国别",prop:"buyerCountry",rules:[{required:!0,message:"请输入买方国别",trigger:"blur"}]},{label:"通讯地址",prop:"buyerAddress",rules:[{required:!0,message:"请输入通讯地址",trigger:"blur"}]},{label:"联系电话",prop:"phone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"邮政编码",prop:"bpostalCode",rules:[{required:!0,message:"请输入邮政编码",trigger:"blur"}]},{label:"法人代表",prop:"blegalRepresentative",rules:[{required:!0,message:"请输入法人代表",trigger:"blur"}]},{label:"法人代表联系电话",prop:"blegalPhone",rules:[{required:!0,message:"请输入法人代表联系电话",trigger:"blur"}]},{label:"法人邮箱",prop:"blegalEmail",rules:[{required:!0,message:"请输入法人邮箱",trigger:"blur"}]},{label:"买方性质",prop:"buyerNature",rules:[{required:!0,message:"请输入买方性质",trigger:"blur"}]},{label:"买方地区",prop:"buyerRegion",rules:[{required:!0,message:"请输入买方地区",trigger:"blur"}]},{label:"所属园区",prop:"buyerPark",rules:[{required:!0,message:"请输入所属园区",trigger:"blur"}]},{label:"是否国家级高新区内企业 0:否 1:是",prop:"isAreaenterprises",rules:[{required:!0,message:"请输入是否国家级高新区内企业 0:否 1:是",trigger:"blur"}]},{label:"机构从事的国民经济行业",prop:"buyerIndustry",rules:[{required:!0,message:"请输入机构从事的国民经济行业",trigger:"blur"}]},{label:"企业规模",prop:"senterpriseScale",rules:[{required:!0,message:"请输入企业规模",trigger:"blur"}]},{label:"财务主管",prop:"buyerTreasurer",rules:[{required:!0,message:"请输入财务主管",trigger:"blur"}]},{label:"是否转制科研院所 0:否 1:是",prop:"isConversion",rules:[{required:!0,message:"请输入是否转制科研院所 0:否 1:是",trigger:"blur"}]},{label:"是否研发机构 0:否 1:是",prop:"isDevelopmentinstitutions",rules:[{required:!0,message:"请输入是否研发机构 0:否 1:是",trigger:"blur"}]},{label:"是否上市公司 0:否 1:是",prop:"isListedcompany",rules:[{required:!0,message:"请输入是否上市公司 0:否 1:是",trigger:"blur"}]},{label:"证券代码",prop:"bstockCode",rules:[{required:!0,message:"请输入证券代码",trigger:"blur"}]},{label:"联系人",prop:"buyerContact",rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]},{label:"税务登记号",prop:"sregistrationNumber",rules:[{required:!0,message:"请输入税务登记号",trigger:"blur"}]},{label:"电子邮件",prop:"buyerEmail",rules:[{required:!0,message:"请输入电子邮件",trigger:"blur"}]},{label:"联系电话",prop:"buyerPhone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"是否科技服务机构 0:否 1:是",prop:"isScience",rules:[{required:!0,message:"请输入是否科技服务机构 0:否 1:是",trigger:"blur"}]},{label:"科技服务机构名称",prop:"sscienceName",rules:[{required:!0,message:"请输入科技服务机构名称",trigger:"blur"}]},{label:"是否技术转移机构 0:否 1:是",prop:"isTechnology",rules:[{required:!0,message:"请输入是否技术转移机构 0:否 1:是",trigger:"blur"}]},{label:"技术转移机构名称",prop:"btechnologyName",rules:[{required:!0,message:"请输入技术转移机构名称",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.buyerinfo_add,!1),viewBtn:this.vaildData(this.permission.buyerinfo_view,!1),delBtn:this.vaildData(this.permission.buyerinfo_delete,!1),editBtn:this.vaildData(this.permission.buyerinfo_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},8376:function(e,t,n){"use strict";n("6b2e")},"84a6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},i=[],a={name:"Authredirect",created:function(){window.close();var e=this.$route.query,t=e.state,n=e.code;window.opener.location.href="".concat(window.location.origin,"/#/login?state=").concat(t,"&code=").concat(n)}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},"879d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.row;return[e.permission.data_scope_setting?n("el-button",{staticStyle:{border:"0","background-color":"transparent !important"},attrs:{type:"text",icon:"el-icon-setting",size:"small",plain:""},on:{click:function(t){return t.stopPropagation(),e.handleDataScope(r)}}},[e._v("权限配置\n      ")]):e._e()]}},{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-drawer",{attrs:{title:"["+e.scopeMenuName+"] 数据权限配置",visible:e.drawerVisible,direction:e.direction,"append-to-body":"","before-close":e.handleDrawerClose,size:"1000px"},on:{"update:visible":function(t){e.drawerVisible=t}}},[n("basic-container",[n("avue-crud",{ref:"crudScope",attrs:{option:e.optionScope,data:e.dataScope,page:e.pageScope,"table-loading":e.scopeLoading,"before-open":e.beforeOpenScope},on:{"row-del":e.rowDelScope,"row-update":e.rowUpdateScope,"row-save":e.rowSaveScope,"search-change":e.searchChangeScope,"search-reset":e.searchResetScope,"selection-change":e.selectionChangeScope,"current-change":e.currentChangeScope,"size-change":e.sizeChangeScope,"on-load":e.onLoadScope},scopedSlots:e._u([{key:"scopeType",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.scopeTypeName))])]}}]),model:{value:e.formScope,callback:function(t){e.formScope=t},expression:"formScope"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDeleteScope}},[e._v("删 除\n          ")])],1)],2)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("7f7f"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("a6dc"),s=n("7e26"),c=n("2f62"),l=n("2457"),u=n("d9a3");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={data:function(){return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},drawerVisible:!1,direction:"rtl",scopeMenuId:0,scopeMenuCode:"",scopeMenuName:"菜单",scopeLoading:!1,menu:!0,watchMode:!0,option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,dialogWidth:"60%",tree:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!1,editBtn:!1,addBtn:!1,delBtn:!1,menuWidth:150,dialogClickModal:!1,column:[{label:"菜单名称",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"路由地址",prop:"path",rules:[{required:!0,message:"请输入路由地址",trigger:"blur"}]},{label:"上级菜单",prop:"parentId",type:"tree",dicUrl:"/api/blade-system/menu/tree",hide:!0,props:{label:"title"},rules:[{required:!1,message:"请选择上级菜单",trigger:"click"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,width:80,iconList:l["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单类型",prop:"category",type:"radio",dicData:[{label:"菜单",value:1},{label:"按钮",value:2}],hide:!0,rules:[{required:!0,message:"请选择菜单类型",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"按钮功能",prop:"action",type:"radio",dicData:[{label:"工具栏",value:0},{label:"操作栏",value:1},{label:"工具操作栏",value:2}],hide:!0,rules:[{required:!0,message:"请选择按钮功能",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",width:80,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]},{label:"新窗口",prop:"isOpen",type:"radio",dicData:[{label:"否",value:0},{label:"是",value:1}],hide:!0},{label:"菜单备注",prop:"remark",type:"textarea",span:24,minRows:6,hide:!0}]},data:[],formScope:{},selectionListScope:[],pageScope:{pageSize:10,currentPage:1,total:0},optionScope:{tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,menuWidth:200,dialogWidth:900,dialogClickModal:!1,column:[{label:"权限名称",prop:"scopeName",search:!0,value:"",rules:[{required:!0,message:"请输入数据权限名称",trigger:"blur"}]},{label:"权限编号",prop:"resourceCode",search:!0,width:100,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"权限字段",prop:"scopeColumn",width:130,rules:[{required:!0,message:"请输入数据权限编号",trigger:"blur"}]},{label:"规则类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=data_scope_type",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,width:140,prop:"scopeType",rules:[{required:!0,message:"请输入通知类型",trigger:"blur"}]},{label:"可见字段",prop:"scopeField",span:24,hide:!0,value:"*",rules:[{required:!0,message:"请输入数据权限可见的字段",trigger:"blur"}]},{label:"权限类名",prop:"scopeClass",span:24,hide:!0,rules:[{required:!0,message:"请输入MybatisMapper对应方法的完整类名路径",trigger:"blur"}]},{label:"规则值",prop:"scopeValue",span:24,minRows:5,type:"textarea",display:!0,hide:!0},{label:"备注",prop:"remark",span:24,hide:!0}]},dataScope:[]}},watch:{"formScope.scopeType":function(){this.initScope()}},computed:p(p({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.menu_add,!1),viewBtn:this.vaildData(this.permission.menu_view,!1),delBtn:this.vaildData(this.permission.menu_delete,!1),editBtn:this.vaildData(this.permission.menu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},scopeIds:function(){var e=[];return this.selectionListScope.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initScope:function(){var e=this,t=u["a"].toInt(this.formScope.scopeType),n=this.watchMode,r="-",i="暂无";1===t?(r="-",i="全部可见"):2===t?(r="create_user",i="本人可见"):3===t?(r="create_dept",i="所在机构可见"):4===t?(r="create_dept",i="所在机构可见及子级可见"):5===t&&(r="",i="自定义"),this.$refs.crudScope.option.column.filter((function(a){n&&("scopeName"===a.prop&&(e.formScope.scopeName="".concat(e.scopeMenuName," [").concat(i,"]")),"resourceCode"===a.prop&&(e.formScope.resourceCode=e.scopeMenuCode),"scopeColumn"===a.prop&&(e.formScope.scopeColumn=r)),"scopeValue"===a.prop&&(a.display=5===t)}))},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getMenu"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getLazyMenuList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear()}))},treeLoad:function(e,t,n){var r=e.id;Object(o["getLazyMenuList"])(r).then((function(e){n(e.data.data)}))},handleDataScope:function(e){this.drawerVisible=!0,this.scopeMenuId=e.id,this.scopeMenuCode=e.code,this.scopeMenuName=e.name,this.onLoadScope(this.pageScope)},handleDrawerClose:function(e){e()},rowSaveScope:function(e,t,n){var r=this;e=p(p({},e),{},{menuId:this.scopeMenuId}),Object(s["addDataScope"])(e).then((function(){r.onLoadScope(r.pageScope),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateScope:function(e,t,n,r){var i=this;e=p(p({},e),{},{menuId:this.scopeMenuId}),Object(s["updateDataScope"])(e).then((function(){i.onLoadScope(i.pageScope),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelScope:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeDataScope"])(e.id)})).then((function(){t.onLoadScope(t.pageScope),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDeleteScope:function(){var e=this;0!==this.selectionListScope.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["removeDataScope"])(e.scopeIds)})).then((function(){e.onLoadScope(e.pageScope),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudScope.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenScope:function(e,t){var n=this;["add"].includes(t)&&(this.watchMode=!0,this.initScope()),["edit","view"].includes(t)&&(this.watchMode=!1,Object(s["getMenuDataScope"])(this.formScope.id).then((function(e){n.formScope=e.data.data}))),e()},searchResetScope:function(){this.onLoadScope(this.pageScope)},searchChangeScope:function(e,t){this.onLoadScope(this.pageScope,e),t()},selectionChangeScope:function(e){this.selectionListScope=e},currentChangeScope:function(e){this.pageScope.currentPage=e},sizeChangeScope:function(e){this.pageScope.pageSize=e},onLoadScope:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.scopeLoading=!0;var r=p(p({},n),{},{menuId:this.scopeMenuId});Object(s["getListDataScope"])(e.currentPage,e.pageSize,Object.assign(r,this.query)).then((function(e){var n=e.data.data;t.pageScope.total=n.total,t.dataScope=n.records,t.selectionListScope=[],t.scopeLoading=!1}))}}},g=h,f=n("2877"),m=Object(f["a"])(g,r,i,!1,null,null,null);t["default"]=m.exports},"889f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,search:e.query,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"update:search":function(t){e.query=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"contractTotalAmountSearch",fn:function(t){var r=t.disabled,i=t.size;return[n("div",{staticClass:"contractTotalAmountSearch"},[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最小金额",disabled:r,size:i},model:{value:e.query.startContractTotalAmount,callback:function(t){e.$set(e.query,"startContractTotalAmount",t)},expression:"query.startContractTotalAmount"}}),n("span",[e._v("(<)")]),n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"最大金额",disabled:r,size:i},model:{value:e.query.endContractTotalAmount,callback:function(t){e.$set(e.query,"endContractTotalAmount",t)},expression:"query.endContractTotalAmount"}})],1)]}},{key:"contractStatusSearch",fn:function(t){var r=t.disabled,i=t.size,a=t.dic,o=t.column;return[n("div",[n("avue-select",{attrs:{multiple:"",disabled:r,size:i,placeholder:"请选择内容",type:"tree",dic:a,props:o.props},model:{value:e.query.contractStatus,callback:function(t){e.$set(e.query,"contractStatus",t)},expression:"query.contractStatus"}})],1)]}},{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("合同信息")]),n("el-button",{attrs:{icon:"el-icon-view",type:r,size:i},on:{click:function(t){return e.handleFree(a)}}},[e._v("免税记录")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(t){return t.stopPropagation(),e.handleHistory(a)}}},[e._v("审核意见\n      ")]),e.isSwAdmin?n("el-button",{attrs:{icon:"el-icon-close",type:r,size:i},on:{click:function(t){return e.handleReject(a)}}},[e._v("驳回")]):e._e()]}}],null,!1,4138877170),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):e._e(),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:e.handleContractClose}}):e._e()],1),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"驳回",visible:e.rejectIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.rejectIsShow=t}}},[n("avue-form",{ref:"rejectForm",attrs:{option:e.rejectOption},model:{value:e.rejectForm,callback:function(t){e.rejectForm=t},expression:"rejectForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.rejectIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提 交")])],1)],1)],1)},i=[],a=(n("8e6e"),n("28a5"),n("456d"),n("96cf"),n("3b8d")),o=(n("6762"),n("2fdb"),n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u),p=n("c0c7"),h=n("096f"),g=n("c832"),f=n.n(g),m=n("4ba7"),b=n("8ddc");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={data:function(){return{contractInfoIsShow:!1,contractInfoQuery:{},userInfo:null,form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:300,searchLabelWidth:130,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!1,addBtn:!1,selection:!1,searchShow:!0,searchIndex:2,searchIcon:!0,dialogClickModal:!1,column:[{label:"状态",prop:"contractStatus",searchSpan:12,type:"select",dataType:"number",minWidth:160,searchslot:!0,multiple:!0,overHidden:!0,search:!1,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"项目名称",prop:"projectName",overHidden:!0,minWidth:160,searchSpan:8,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,searchSpan:8,overHidden:!0,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",minWidth:160,searchSpan:8,overHidden:!0,search:!0,rules:[]},{label:"合同成交总金额",prop:"contractTotalAmount",bind:"contractinfo.contractTotalAmount",searchslot:!0,search:!0,minWidth:130,searchSpan:12,rules:[{required:!0,message:"请输入合同成交总金额",trigger:"blur"}]},{type:"select",label:"合同申请类型",prop:"type",dataType:"string",display:!1,search:!0,minWidth:100,value:"1",dicData:[{label:"个人合同",value:"0"},{label:"单位合同",value:"1"}]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"input",label:"登记单位",minWidth:100,overHidden:!0,span:12,display:!0,prop:"registrationUnit",required:!0,rules:[{required:!0,message:"登记单位必须填写"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,searchSpan:8,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,searchSpan:8,minWidth:100,defaultExpandedKeys:[],parent:!1,search:!0,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",search:!0,searchLabelWidth:100,searchSpan:8,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否军民两用合同",search:!0,searchLabelWidth:130,minWidth:120,span:24,display:!0,prop:"isClassified",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}],required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],prop:"isFree",hide:!0,dicData:[{label:"是",value:1},{label:"否",value:0}]},{type:"radio",label:"是否大额合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否大额合同"}],prop:"isLarge",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{type:"radio",label:"是否涉外合同",search:!0,minWidth:100,span:24,display:!0,rules:[{required:!0,message:"请选择是否涉外合同"}],prop:"isOutside",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}]},{label:"税务驳回状态",prop:"rejectStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=reject_status",rules:[{required:!0,message:"请输入驳回状态",trigger:"blur"}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"},{label:"创建时间",prop:"createTime",type:"datetime",searchSpan:10,minWidth:150,searchRange:!0,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[],flowList:[],flowListIsShow:!1,flowListOption:m["flowListOption"],rejectIsShow:!1,rejectForm:{},rejectOption:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,submitBtn:!1,emptyBtn:!1,labelWidth:80,column:[{label:"驳回原因",span:24,type:"textarea",prop:"reason",rules:[]}]}}},components:{contractInfo:h["default"]},computed:y(y({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),contractDelBtn:this.vaildData(this.permission.contract_search_delete,!1),editBtn:this.vaildData(this.permission.contract_search_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},isSwAdmin:function(){var e=this,t=["1372376795654664194"],n=t.some((function(t){return f()(e,"userInfo.roleId","").includes(t)}));return n}}),created:function(){this.initData(),this.getUserInfo()},methods:{initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o})),Object(b["getDictionary"])({code:"reason"}).then((function(e){var n=t.findObject(t.flowListOption.column,"reason");n.dicData=f()(e,"data.data",[])}))},getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i,a,o,s,c,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){l.userInfo=r})),i=r.roleId,i.includes("1375342244055232513")&&(a=this.findObject(this.option.column,"contractCode"),a.hide=!0),o=["1351364540907913218","1351364671552094210"],s=o.some((function(e){return i.includes(e)})),s&&(c=["isClassified","isLarge","isOutside","rejectStatus","isFree"],c.forEach((function(e){var t=l.findObject(l.option.column,e);t.hide=!0}))),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}(),handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListDowload:function(){var e=this;0!==this.selectionList.length?this.selectionList.forEach((function(t){e.contractDownload(t)})):this.$message.warning("请选择至少一条数据")},handleListBatchVoid:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据作废?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["batchVoid"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.contractInfoQuery={contractId:e.id,type:"admin-edit"},this.contractInfoIsShow=!0},handleView:function(e){this.contractInfoQuery={contractId:e.id,type:"detail"},this.contractInfoIsShow=!0},handleFree:function(e){this.$router.push({path:"/free/free-list",query:{contractId:e.id}})},handleReject:function(e){this.rejectForm.id=e.id,this.rejectIsShow=!0},handleSubmit:function(){this.reject()},reject:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http({method:"POST",url:"/api/api/contractlist/reject",params:this.rejectForm});case 3:t=e.sent,n=t.data,this.$message({type:"success",message:"操作成功!"}),this.rejectIsShow=!1,n&&this.onLoad(this.page),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=y(y(y({},n),this.query),{},{contractStatusList:[10,14],isFree:1}),i=this.userInfo,a=i.roleId,o=i.unitId,c=i.deptId,l=i.id;a.includes("1351364540907913218")&&(r.createUser=l,r.registrationUnitId=o||0),a.includes("1351364671552094210")&&(r.registrationUnitId=o),a.includes("1375342244055232513")&&(r.kiosk=c),a.includes("1351364770906767361")&&(r.kiosk=c),a.includes("1351364845053673474")&&(r.registrationPoint=c);var u=r.applyTime,d=r.createTime;u&&(r.startApplyTime=u[0],r.endApplyTime=u[1],r.applyTime=null),d&&(r.startTime=d[0],r.endTime=d[1],r.createTime=null),r.contractStatusList=[10,14],delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(s["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleHistory:function(e){var t=this;Object(s["historyFlowList"])({contractId:e.id}).then((function(e){var n=f()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))},handleContractClose:function(){this.contractInfoIsShow=!1,this.onLoad(this.page)}}},O=w,j=(n("1226"),n("2877")),C=Object(j["a"])(O,r,i,!1,null,null,null);t["default"]=C.exports},"88b0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("存储")]),n("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("基本读写删(持久化存储) ")]),n("div",{staticClass:"box"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setItem({name:"username",value:"avuex"})}}},[e._v("set('username', 'avuex')\n    ")]),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getItem({name:"username"})}}},[e._v("get('username')\n    ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delItem({name:"username"})}}},[e._v("remove('username')\n    ")])],1),n("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("设置session(session存储) ")]),n("div",{staticClass:"box"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.setItem({name:"username",value:"avuex",type:"session"})}}},[e._v("set('username', 'avuex')\n    ")]),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getItem({name:"username",type:"session"})}}},[e._v("get('username')\n    ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.delItem({name:"username",type:"session"})}}},[e._v("remove('username')\n    ")])],1),n("el-tag",{staticClass:"title",attrs:{size:"small"}},[e._v("获取所有可以获得的数据 ")]),n("div",{staticClass:"box"},[n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getAll()}}},[e._v("getAll(持久化存储)\n    ")]),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.getAll({type:"session"})}}},[e._v("getAll(session存储)\n    ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.clearAll()}}},[e._v("delAll(持久化存储)\n    ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.clearAll({type:"session"})}}},[e._v("delAll(session存储)\n    ")])],1)],1)},i=[],a=(n("7f7f"),n("e3c4")),o={name:"Store",methods:{setItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value,r=e.type;Object(a["e"])({name:t,content:n,type:r}),this.$message("设置数据 ".concat(t," = ").concat(n))},getItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.type,r=Object(a["c"])({name:t,type:n});this.$message("获取数据 ".concat(t," = ").concat(r))},delItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.type;Object(a["d"])({name:t,type:n}),this.$message("删除数据 ".concat(t))},clearAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a["a"])(e),this.$message("清除全部数据完成")},getAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a["b"])(e);window.console.log(t),this.$message("结果已经打印到控制台")}}},s=o,c=(n("8376"),n("2877")),l=Object(c["a"])(s,r,i,!1,null,null,null);t["default"]=l.exports},"88b6":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,"before-close":e.beforeClose},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad,"tree-load":e.treeLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")&&3!==t.row.deptCategory?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleAdd(t.row,t.index)}}},[e._v("新增子项\n      ")]):e._e()]}},{key:"deptCategory",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.deptCategoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.dept_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=(n("7514"),n("fcb7")),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){var e=this;return{form:{},selectionList:[],query:{},loading:!0,parentId:0,page:{pageSize:10,currentPage:1,total:0},option:{lazy:!0,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,tree:!0,excelBtn:!0,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,labelWidth:150,menuWidth:300,dialogClickModal:!1,column:[{label:"机构名称",prop:"deptName",search:!0,rules:[{required:!0,message:"请输入机构名称",trigger:"blur"}]},{label:"机构全称",prop:"fullName",search:!0,rules:[{required:!0,message:"请输入机构全称",trigger:"blur"}]},{label:"上级机构",prop:"parentId",dicData:[],type:"tree",hide:!0,addDisabled:!1,disabled:!1,props:{label:"title"},rules:[{required:!1,message:"请选择上级机构",trigger:"click"}]},{label:"机构类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=org_category",props:{label:"dictValue",value:"dictKey"},dataType:"number",width:120,prop:"deptCategory",slot:!0,change:function(t){var n=t.value,r=t.column,i=e.$refs.crud.DIC.deptCategory;if(i){var a=i.find((function(e){return e["dictKey"]===n}));e.form.deptCategoryName=a.dictValue,console.log("值改变",n,r,a)}},rules:[{required:!0,message:"请输入机构类型",trigger:"blur"}]},{label:"排序",prop:"sort",type:"number",align:"right",width:80,rules:[{required:!0,message:"请输入排序",trigger:"blur"}]},{type:"tree",label:"地区",dicUrl:"/api/blade-system/region/lazy-tree",props:{label:"title",value:"value"},cascaderItem:[],span:12,display:!0,prop:"region",rules:[{required:!0,message:"请选择地区"}]},{label:"技术转让大额标准",prop:"technicalTransfer",type:"number",hide:!0},{label:"技术许可大额标准",prop:"technicalLicensing",type:"number",hide:!0},{label:"技术服务大额标准",prop:"technicalService",type:"number",hide:!0},{label:"技术开发大额标准",prop:"technicalDevelopment",type:"number",hide:!0},{label:"技术咨询大额标准",prop:"technicalConsultation",type:"number",hide:!0,display:!0},{label:"备注",prop:"remark",rules:[{required:!1,message:"请输入备注",trigger:"blur"}],hide:!0}]},data:[]}},computed:l(l({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dept_add,!1),viewBtn:!0,delBtn:this.vaildData(this.permission.dept_delete,!1),editBtn:this.vaildData(this.permission.dept_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;if(this.userInfo.role_name.includes("djc")){var t=["technicalTransfer","technicalLicensing","technicalService","technicalDevelopment","technicalConsultation"];t.forEach((function(t){var n=e.findObject(e.option.column,t);n.display=!1}))}Object(o["getDeptTree"])().then((function(t){var n=e.findObject(e.option.column,"parentId");n.dicData=t.data.data,e.userInfo.role_name.includes("djc")&&setTimeout((function(){e.form.parentId=e.userInfo.dept_id,n.disabled=!0}),300)}))},handleAdd:function(e){this.parentId=e.id;var t=this.findObject(this.option.column,"parentId");t.value=e.id,t.addDisabled=!0,this.$refs.crud.rowAdd()},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(n){var i=n.data.data;e.id=i.id,e.deptCategoryName=i.deptCategoryName,e.tenantId=i.tenantId,r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.$message({type:"success",message:"操作成功!"}),n(e)}),(function(e){window.console.log(e),r()}))},rowDel:function(e,t,n){var r=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){r.$message({type:"success",message:"操作成功!"}),n(e)})).catch((function(){r.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.data=[],e.parentId=0,e.$refs.crud.refreshTable(),e.$refs.crud.toggleSelection(),e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"})})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},searchReset:function(){this.query={},this.parentId=0,this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.parentId="",this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(o["getDept"])(this.form.id).then((function(e){n.form=e.data.data})),e()},beforeClose:function(e){this.parentId="";var t=this.findObject(this.option.column,"parentId");t.value="",t.addDisabled=!1,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,this.userInfo.role_name.includes("djc")&&(this.parentId=this.userInfo.dept_id),Object(o["getLazyList"])(this.parentId,Object.assign(n,this.query)).then((function(e){t.data=e.data.data,t.loading=!1,t.selectionClear(),t.$nextTick((function(){var e=document.getElementsByClassName("el-table__expand-icon")[0];e&&e.click()}))}))},treeLoad:function(e,t,n){var r=e.id;Object(o["getLazyList"])(r).then((function(e){n(e.data.data)}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"8a5e":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.wosgather_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("5d82"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"期刊",prop:"periodicals",rules:[{required:!0,message:"请输入期刊",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入期刊",trigger:"blur"}]},{label:"检索式",prop:"retrievalType",rules:[{required:!0,message:"请输入检索式",trigger:"blur"}]},{label:"检索的url",prop:"retrievalUrl",rules:[{required:!0,message:"请输入检索的url",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入检索的url",trigger:"blur"}]},{label:"开始年份",prop:"startYear",rules:[{required:!0,message:"请输入开始年份",trigger:"blur"}]},{label:"结束年份",prop:"endYear",rules:[{required:!0,message:"请输入结束年份",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.wosgather_add,!1),viewBtn:this.vaildData(this.permission.wosgather_view,!1),delBtn:this.vaildData(this.permission.wosgather_delete,!1),editBtn:this.vaildData(this.permission.wosgather_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"8c0f":function(e,t,n){"use strict";n("7291")},"8cf3":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-edit",size:i,type:r},on:{click:function(t){return e.rowUpdate(a)}}},[e._v("编辑")])]}}],null,!1,288450522),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-button",{attrs:{icon:"el-icon-upload2",size:"small",type:"primary"},on:{click:function(t){return t.stopPropagation(),e.handleListPush(t)}}},[e._v("批量上报")])],1)],2):e._e(),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"合同详情","append-to-body":"",width:"80%",visible:e.contractInfoIsShow},on:{"update:visible":function(t){e.contractInfoIsShow=t}}},[e.contractInfoIsShow?n("contractInfo",{attrs:{query:e.contractInfoQuery},on:{close:e.handleContractClose}}):e._e()],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u),p=n("096f");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!0,searchMenuSpan:6,menuWidth:90,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!0,searchShow:!0,searchIndex:2,searchIcon:!0,dialogClickModal:!1,column:[{label:"上报状态",prop:"isNation",type:"select",minWidth:100,overHidden:!0,search:!0,dataType:"string",dicData:[{label:"已上报",value:"1"},{label:"未上报",value:"0"}],rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"项目名称",prop:"projectName",minWidth:160,searchSpan:8,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,searchSpan:8,overHidden:!0,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",minWidth:160,searchSpan:8,overHidden:!0,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,searchSpan:8,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,searchSpan:8,defaultExpandedKeys:[],parent:!1,search:!0,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",search:!0,searchLabelWidth:100,minWidth:100,span:24,searchSpan:8,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否军民两用合同",search:!0,searchLabelWidth:130,minWidth:120,span:24,display:!0,prop:"isClassified",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}],required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],hide:!0,prop:"isFree",dicData:[{label:"是",value:1},{label:"否",value:0}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[],contractInfoIsShow:!1,contractInfoQuery:{}}},components:{contractInfo:p["default"]},computed:g(g({},Object(c["b"])(["permission","userInfo"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData()},methods:{initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o}))},handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListPush:function(){0!==this.selectionList.length?this.dockingPush():this.$message.warning("请选择至少一条数据")},dockingPush:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http({url:"/api/api/contractlist/contractToNation",method:"POST",params:{ids:this.ids}});case 3:t=e.sent,n=t.data,n&&200==n.code?(this.$message.success("上报成功"),this.onLoad(this.page)):this.$alert(n.msg||"失败","提示",{confirmButtonText:"确定",type:"error",callback:function(){}}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),window.console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.contractInfoQuery={contractId:e.id,type:"admin-edit"},this.contractInfoIsShow=!0},handleView:function(e){this.contractInfoQuery={contractId:e.id,type:"detail"},this.contractInfoIsShow=!0},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=g(g(g({},n),this.query),{},{contractStatusList:[10,14],type:"1"}),i=r.applyTime,a=r.createTime;i&&(r.startApplyTime=i[0],r.endApplyTime=i[1],r.applyTime=null),a&&(r.startTime=a[0],r.endTime=a[1],r.createTime=null),Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(s["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleContractClose:function(){this.contractInfoIsShow=!1,this.onLoad(this.page)}}},m=f,b=n("2877"),v=Object(b["a"])(m,r,i,!1,null,null,null);t["default"]=v.exports},"8d2c":function(e,t,n){"use strict";n("d8d5")},"8ea7":function(e,t,n){},"8ef7":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.datasource_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("c1aa"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,dialogWidth:900,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"名称",prop:"name",width:120,rules:[{required:!0,message:"请输入数据源名称",trigger:"blur"}]},{label:"驱动类",prop:"driverClass",type:"select",dicData:[{label:"com.mysql.cj.jdbc.Driver",value:"com.mysql.cj.jdbc.Driver"},{label:"org.postgresql.Driver",value:"org.postgresql.Driver"},{label:"oracle.jdbc.OracleDriver",value:"oracle.jdbc.OracleDriver"}],width:200,rules:[{required:!0,message:"请输入驱动类",trigger:"blur"}]},{label:"用户名",prop:"username",width:120,rules:[{required:!0,message:"请输入用户名",trigger:"blur"}]},{label:"密码",prop:"password",hide:!0,rules:[{required:!0,message:"请输入密码",trigger:"blur"}]},{label:"连接地址",prop:"url",span:24,rules:[{required:!0,message:"请输入连接地址",trigger:"blur"}]},{label:"备注",prop:"remark",span:24,minRows:3,hide:!0,type:"textarea"}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.datasource_add,!1),viewBtn:this.vaildData(this.permission.datasource_view,!1),delBtn:this.vaildData(this.permission.datasource_delete,!1),editBtn:this.vaildData(this.permission.datasource_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},9277:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("keep-alive",[e.$route.meta.$keepAlive?n("router-view",{staticClass:"avue-view"}):e._e()],1),e.$route.meta.$keepAlive?e._e():n("router-view",{staticClass:"avue-view"})],1)},i=[],a=n("2877"),o={},s=Object(a["a"])(o,r,i,!1,null,null,null);t["default"]=s.exports},"92ef":function(e,t,n){},"95d0":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.flow_model_update?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleUpdate(t.row,t.index)}}},[e._v("配置\n      ")]):e._e(),e.permission.flow_model_deploy?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDeploy(t.row,t.index)}}},[e._v("部署\n      ")]):e._e(),e.permission.flow_model_download?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDownload(t.row,t.index)}}},[e._v("下载\n      ")]):e._e(),e.permission.flow_model_delete?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleSlotDelete(t.row,t.index)}}},[e._v("删除\n      ")]):e._e()]}},{key:"version",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.version))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.flow_model_create?n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus",plain:""},on:{click:e.handleCreate}},[e._v("创 建\n      ")]):e._e(),e.permission.flow_model_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"流程配置","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程设计器",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleRefresh}},[e._v("确 定")])],1)]),n("el-dialog",{attrs:{title:"流程部署","append-to-body":"",visible:e.deployBox,width:"20%"},on:{"update:visible":function(t){e.deployBox=t}}},[n("avue-form",{ref:"form",attrs:{option:e.optionDeploy},on:{submit:e.handleSubmit},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.deployBox=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary",loading:e.deployLoading},on:{click:e.handleDoDeploy}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1ca4"),c=n("371f"),l=n("7208");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={data:function(){return{form:{},optionDeploy:{menuBtn:!1,column:[{label:"流程类型",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"categoryValue",search:!0,span:24,rules:[{required:!0,message:"请选择流程类型",trigger:"blur"}]},{label:"流程模式",prop:"flowMode",type:"radio",dicData:[{label:"通用流程",value:1},{label:"定制流程",value:2}],value:1,span:24,rules:[{required:!0,message:"请选择流程模式",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",multiple:!0,dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},display:!1,span:24,rules:[{required:!0,message:"请选择所属租户",trigger:"blur"}]}]},selectionId:"",selectionList:[],query:{},loading:!0,deployLoading:!1,page:{pageSize:10,currentPage:1,total:0},deployBox:!1,flowBox:!1,flowUrl:"",option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"模型主键",prop:"id"},{label:"模型标识",prop:"modelKey",search:!0,width:150},{label:"模型名称",prop:"name",search:!0,width:150},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"创建时间",prop:"created",width:165},{label:"更新时间",prop:"lastUpdated",width:165}]},data:[]}},watch:{"form.flowMode":function(){var e=this;this.$refs.form.option.column.filter((function(t){"tenantId"===t.prop&&(t.display=2===e.form.flowMode)}))}},computed:d(d({},Object(o["b"])(["permission"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{handleSubmit:function(e,t){var n=this;this.deployLoading=!0,Object(c["deployModel"])({modelId:this.selectionId,category:Object(l["a"])(e.categoryValue),tenantIds:e.tenantId.join(",")}).then((function(e){var r=e.data;r.success?(n.$message({type:"success",message:r.msg}),t(),n.$refs.form.resetForm(),n.deployBox=!1,n.deployLoading=!1):(t(),n.deployLoading=!1,n.$message({type:"warn",message:r.msg}))}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["removeModel"])(e.ids)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection(),e.onLoad(e.page)})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleCreate:function(){this.flowUrl="".concat(s["a"].flowDesignUrl,"/index.html"),this.flowBox=!0},handleUpdate:function(e){this.flowUrl="".concat(s["a"].flowDesignUrl,"/index.html#/editor/").concat(e.id),this.flowBox=!0},handleDeploy:function(e){this.deployBox=!0,this.selectionId=e.id},handleDoDeploy:function(){this.$refs.form.submit()},handleDownload:function(e){window.open("".concat(s["a"].flowDesignUrl,"/app/rest/models/").concat(e.id,"/bpmn20"))},handleSlotDelete:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(c["removeModel"])(e.id)})).then((function(){t.$message({type:"success",message:"操作成功!"}),t.$refs.crud.toggleSelection(),t.onLoad(t.page)})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleRefresh:function(){this.flowBox=!1,this.onLoad(this.page)},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(c["modelList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},h=p,g=(n("c1d1"),n("2877")),f=Object(g["a"])(h,r,i,!1,null,null,null);t["default"]=f.exports},9765:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.client_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("e30d"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"应用id",prop:"clientId",search:!0,rules:[{required:!0,message:"请输入客户端id",trigger:"blur"}]},{label:"应用密钥",prop:"clientSecret",search:!0,rules:[{required:!0,message:"请输入客户端密钥",trigger:"blur"}]},{label:"授权类型",prop:"authorizedGrantTypes",value:"refresh_token,password,authorization_code",rules:[{required:!0,message:"请输入授权类型",trigger:"blur"}]},{label:"授权范围",prop:"scope",value:"all",rules:[{required:!0,message:"请输入授权范围",trigger:"blur"}]},{label:"令牌秒数",prop:"accessTokenValidity",type:"number",value:3600,rules:[{required:!0,message:"请输入令牌过期秒数",trigger:"blur"}]},{label:"刷新秒数",prop:"refreshTokenValidity",type:"number",value:604800,hide:!0,rules:[{required:!0,message:"请输入刷新令牌过期秒数",trigger:"blur"}]},{label:"回调地址",prop:"webServerRedirectUri",hide:!0,rules:[{required:!0,message:"请输入回调地址",trigger:"blur"}]},{label:"资源集合",prop:"resourceIds",hide:!0,rules:[{message:"请输入资源集合",trigger:"blur"}]},{label:"权限",prop:"authorities",hide:!0,rules:[{message:"请输入权限",trigger:"blur"}]},{label:"自动授权",prop:"autoapprove",hide:!0,rules:[{message:"请输入自动授权",trigger:"blur"}]},{label:"附加说明",hide:!0,prop:"additionalInformation",span:24,rules:[{message:"请输入附加说明",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.client_add),viewBtn:this.vaildData(this.permission.client_view),delBtn:this.vaildData(this.permission.client_delete),editBtn:this.vaildData(this.permission.client_edit)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"99bd":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.incitesgather_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("d830"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"实体类型",prop:"entityType",rules:[{required:!0,message:"请输入实体类型",trigger:"blur"}]},{label:"文献类型",prop:"literatureType",rules:[{required:!0,message:"请输入文献类型",trigger:"blur"}]},{label:"研究方向",prop:"researchDirection",rules:[{required:!0,message:"请输入研究方向",trigger:"blur"}]},{label:"所属机构",prop:"organization",rules:[{required:!0,message:"请输入所属机构",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"采集状态",prop:"status",rules:[{required:!0,message:"请输入采集状态",trigger:"blur"}]},{label:"数据量",prop:"dataSize",rules:[{required:!0,message:"请输入数据量",trigger:"blur"}]},{label:"开始年份",prop:"startYear",rules:[{required:!0,message:"请输入开始年份",trigger:"blur"}]},{label:"结束年份",prop:"endYear",rules:[{required:!0,message:"请输入结束年份",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.incitesgather_add,!1),viewBtn:this.vaildData(this.permission.incitesgather_view,!1),delBtn:this.vaildData(this.permission.incitesgather_delete,!1),editBtn:this.vaildData(this.permission.incitesgather_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"9ae1":function(e,t,n){},"9b9b":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"affix"},[n("avue-affix",{attrs:{id:"avue-view"}},[n("span",{staticClass:"affix-affix"},[e._v("固定在最顶部")])]),n("div",{staticClass:"affix-line"}),n("avue-affix",{attrs:{id:"avue-view","offset-top":50}},[n("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 50px 的位置")])]),n("div",{staticClass:"affix-line"}),n("avue-affix",{attrs:{id:"avue-view","offset-top":100}},[n("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 100px 的位置")])]),n("div",{staticClass:"affix-line"}),n("avue-affix",{attrs:{id:"avue-view","offset-top":150}},[n("span",{staticClass:"affix-affix"},[e._v("固定在距离顶部 150px 的位置")])]),e._m(0)],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"2000px"}},[n("div",{staticStyle:{padding:"15px 20px","font-size":"18px"}},[e._v("往下拉就会出现图钉")])])}],a={},o=a,s=(n("566a"),n("2877")),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},a597:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v(e._s(e.$route.query.id?"编辑":"新增"))]),n("avue-form",{attrs:{option:e.option},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuForm"},[n("el-button",{attrs:{icon:"el-icon-back"},on:{click:function(t){return e.handleBack()}}},[e._v("返 回")])],1)],2)],1)},i=[],a={data:function(){return{form:{},option:{labelWidth:110,column:[{label:"姓名",prop:"name"}]}}},methods:{handleBack:function(){this.$router.$avueRouter.closeTag(),this.$router.back()}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},a683:function(e,t,n){"use strict";n("3b9c")},ab5c:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("basic-container",[e._v("测试页")])],1)},i=[],a={name:"Wel",data:function(){return{}},computed:{},created:function(){},methods:{}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,"074b2bfe",null);t["default"]=c.exports},acda:function(e,t,n){"use strict";n("9ae1")},b74c:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:11}},[n("basic-container",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("业务字典列表")])]),n("div",{staticClass:"clearfix"},[n("avue-crud",{ref:"crud",attrs:{option:e.optionParent,"table-loading":e.loading,data:e.dataParent,page:e.pageParent,permission:e.permissionList,"before-open":e.beforeOpen},on:{"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"row-click":e.handleRowClick,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoadParent},scopedSlots:e._u([{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formParent,callback:function(t){e.formParent=t},expression:"formParent"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1),n("el-col",{attrs:{span:13}},[n("basic-container",[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("["+e._s(e.dictValue)+"] 业务字典详情")])]),n("div",{staticClass:"clearfix"},[n("avue-crud",{ref:"crudChild",attrs:{option:e.optionChild,"table-loading":e.loadingChild,data:e.dataChild,permission:e.permissionList,"before-open":e.beforeOpenChild,"before-close":e.beforeCloseChild},on:{"row-del":e.rowDelChild,"row-update":e.rowUpdateChild,"row-save":e.rowSaveChild,"search-change":e.searchChangeChild,"search-reset":e.searchResetChild,"selection-change":e.selectionChangeChild,"current-change":e.currentChangeChild,"size-change":e.sizeChangeChild,"refresh-change":e.refreshChangeChild,"on-load":e.onLoadChild},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline",size:"small"},on:{click:function(n){return n.stopPropagation(),e.handleAdd(t.row,t.index)}}},[e._v("新增子项\n              ")]):e._e()]}},{key:"isSealed",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(0===r.isSealed?"否":"是"))])]}}]),model:{value:e.formChild,callback:function(t){e.formChild=t},expression:"formChild"}},[n("template",{slot:"menuLeft"},[e.permission.dict_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n              ")]):e._e()],1)],2)],1)])],1)],1)],1)},i=[],a=(n("8e6e"),n("6762"),n("2fdb"),n("456d"),n("ac6a"),n("bd86")),o=n("8ddc"),s=n("d4f4"),c=n("2f62");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{dictValue:"暂无",parentId:-1,formParent:{},formChild:{},selectionList:[],query:{},loading:!0,loadingChild:!0,pageParent:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},pageChild:{pageSize:10,pageSizes:[10,30,50,100,200],currentPage:1,total:0},dataParent:[],dataChild:[],optionParent:s["optionParent"],optionChild:s["optionChild"]}},computed:u(u({},Object(c["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.dictbiz_add,!1),delBtn:this.vaildData(this.permission.dictbiz_delete,!1),editBtn:this.vaildData(this.permission.dictbiz_edit,!1),viewBtn:!1}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){this.initData()},methods:{initData:function(){var e=this;Object(o["getDictTree"])().then((function(t){var n=e.findObject(e.optionChild.column,"parentId");n.dicData=t.data.data}))},handleAdd:function(e){var t=this;Object.keys(this.formChild).forEach((function(e){["isSealed","code"].includes(e)||(t.formChild[e]=null)})),this.$refs.crudChild.value.parentId=e.id;var n=this.findObject(this.optionChild.column,"parentId");n.value=e.id,n.addDisabled=!0,this.$refs.crudChild.rowAdd()},rowSave:function(e,t,n){var r=this,i=u(u({},e),{},{dictKey:-1});Object(o["add"])(i).then((function(){r.onLoadParent(r.pageParent),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoadParent(i.pageParent),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoadParent(t.pageParent),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleRowClick:function(e){this.query={},this.parentId=e.id,this.dictValue=e.dictValue,this.$refs.crudChild.value.code=e.code,this.$refs.crudChild.value.parentId=e.id,this.$refs.crudChild.option.column.filter((function(t){"code"===t.prop&&(t.value=e.code),"parentId"===t.prop&&(t.value=e.id)})),this.onLoadChild(this.pageChild)},searchReset:function(){this.query={},this.onLoadParent(this.pageParent)},searchChange:function(e,t){this.query=e,this.pageParent.currentPage=1,this.onLoadParent(this.pageParent,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoadParent(e.pageParent),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDict"])(this.formParent.id).then((function(e){n.formParent=e.data.data})),e()},currentChange:function(e){this.pageParent.currentPage=e},sizeChange:function(e){this.pageParent.pageSize=e},refreshChange:function(){this.onLoadParent(this.pageParent,this.query)},rowSaveChild:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoadChild(r.pageChild),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdateChild:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoadChild(i.pageChild),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDelChild:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoadChild(t.pageChild),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},searchResetChild:function(){this.query={},this.onLoadChild(this.pageChild)},searchChangeChild:function(e,t){this.query=e,this.pageChild.currentPage=1,this.onLoadChild(this.pageChild,e),t()},selectionChangeChild:function(e){this.selectionList=e},selectionClearChild:function(){this.selectionList=[],this.$refs.crudChild.toggleSelection()},handleDeleteChild:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoadChild(e.pageChild),e.$message({type:"success",message:"操作成功!"}),e.$refs.crudChild.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpenChild:function(e,t){var n=this;["add","edit"].includes(t)&&this.initData(),["edit","view"].includes(t)&&Object(o["getDict"])(this.formChild.id).then((function(e){n.formChild=e.data.data})),e()},beforeCloseChild:function(e){this.$refs.crudChild.value.parentId=this.parentId;var t=this.findObject(this.optionChild.column,"parentId");t.value=this.parentId,t.addDisabled=!1,e()},currentChangeChild:function(e){this.pageChild.currentPage=e},sizeChangeChild:function(e){this.pageChild.pageSize=e},refreshChangeChild:function(){this.onLoadChild(this.pageChild,this.query)},onLoadParent:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getParentList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.pageParent.total=n.total,t.dataParent=n.records,t.loading=!1,t.selectionClear()}))},onLoadChild:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loadingChild=!0,Object(o["getChildList"])(e.currentPage,e.pageSize,this.parentId,Object.assign(n,this.query)).then((function(e){t.dataChild=e.data.data,t.loadingChild=!1,t.selectionClear()}))}}},p=d,h=n("2877"),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},b782:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.gathermenu_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("2e2c"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"父级id",prop:"parentId",rules:[{required:!0,message:"请输入父级菜单",trigger:"blur"}]},{label:"菜单名称",prop:"name",rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]},{label:"菜单别名",prop:"alias",rules:[{required:!0,message:"请输入菜单别名",trigger:"blur"}]},{label:"请求地址",prop:"path",rules:[{required:!0,message:"请输入请求地址",trigger:"blur"}]},{label:"请求方式",prop:"source",rules:[{required:!0,message:"请输入菜单资源",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.gathermenu_add,!1),viewBtn:this.vaildData(this.permission.gathermenu_view,!1),delBtn:this.vaildData(this.permission.gathermenu_delete,!1),editBtn:this.vaildData(this.permission.gathermenu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},b8dd:function(e,t,n){},b979:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:5}},[n("div",{staticClass:"box"},[n("el-scrollbar",[n("basic-container",[n("avue-tree",{attrs:{option:e.treeOption,data:e.treeData},on:{"node-click":e.nodeClick}})],1)],1)],1)]),n("el-col",{attrs:{span:19}},[n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,search:e.search,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(t){e.search=t},"row-del":e.rowDel,"row-update":e.rowUpdate,"row-save":e.rowSave,"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"tenantName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.tenantName))])]}},{key:"roleName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.roleName))])]}},{key:"deptName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.deptName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.user_delete?n("el-button",{attrs:{type:"danger",size:"small",plain:"",icon:"el-icon-delete"},on:{click:e.handleDelete}},[e._v("删 除\n          ")]):e._e(),e.permission.user_role?n("el-button",{attrs:{type:"info",size:"small",plain:"",icon:"el-icon-user"},on:{click:e.handleGrant}},[e._v("角色配置\n          ")]):e._e(),e.permission.user_reset?n("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-refresh"},on:{click:e.handleReset}},[e._v("密码重置\n          ")]):e._e(),e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"success",size:"small",plain:"",icon:"el-icon-upload2"},on:{click:e.handleImport}},[e._v("导入\n          ")]):e._e(),e.userInfo.role_name.includes("admin")?n("el-button",{attrs:{type:"warning",size:"small",plain:"",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出\n          ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"用户角色配置","append-to-body":"",visible:e.roleBox,width:"345px"},on:{"update:visible":function(t){e.roleBox=t}}},[n("el-tree",{ref:"treeRole",attrs:{data:e.roleGrantList,"show-checkbox":"","check-strictly":"","default-expand-all":"","node-key":"id","default-checked-keys":e.roleTreeObj,props:e.props}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.roleBox=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submitRole}},[e._v("确 定")])],1)],1),n("el-dialog",{attrs:{title:"用户数据导入","append-to-body":"",visible:e.excelBox,width:"555px"},on:{"update:visible":function(t){e.excelBox=t}}},[n("avue-form",{attrs:{option:e.excelOption,"upload-after":e.uploadAfter},model:{value:e.excelForm,callback:function(t){e.excelForm=t},expression:"excelForm"}},[n("template",{slot:"excelTemplate"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleTemplate}},[e._v("\n              点击下载"),n("i",{staticClass:"el-icon-download el-icon--right"})])],1)],2)],1)],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("386d"),n("28a5"),n("ac6a"),n("bd86")),o=n("c0c7"),s=n("fcb7"),c=n("3528"),l=n("2f62"),u=n("1ca4"),d=n("0a5a");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={data:function(){var e=this,t=function(e,t,n){""===t?n(new Error("请输入密码")):n()},n=function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.form.password?r(new Error("两次输入密码不一致!")):r()};return{form:{},search:{},roleBox:!1,excelBox:!1,initFlag:!0,selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},init:{roleTree:[],deptTree:[]},props:{label:"title",value:"key"},roleGrantList:[],roleTreeObj:[],treeDeptId:"",treeData:[],treeOption:{nodeKey:"id",lazy:!0,treeLoad:function(e,t){var n=0===e.level?0:e.data.id;Object(s["getDeptLazyTree"])(n).then((function(n){t(n.data.data.map((function(e){return h(h({},e),{},{leaf:!e.hasChildren})}))),0==e.level&&setTimeout((function(){var t=e.childNodes[0];t.expanded=!0,t.loadData()}))}))},addBtn:!1,menu:!1,size:"small",props:{labelText:"标题",label:"title",value:"value",children:"children"}},option:{height:"auto",calcHeight:80,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,dialogClickModal:!1,column:[{label:"登录账号",prop:"account",search:!0,display:!1},{label:"用户姓名",prop:"realName",search:!0,display:!1},{label:"所属角色",prop:"roleName",slot:!0,display:!1},{label:"所属机构",prop:"deptName",slot:!0,display:!1}],group:[{label:"基础信息",prop:"baseInfo",icon:"el-icon-user-solid",column:[{label:"登录账号",prop:"account",rules:[{required:!0,message:"请输入登录账号",trigger:"blur"}],span:u["a"].tenantMode?12:24},{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},hide:!u["a"].tenantMode,addDisplay:u["a"].tenantMode,editDisplay:u["a"].tenantMode,viewDisplay:u["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"密码",prop:"password",hide:!0,editDisplay:!1,viewDisplay:!1,rules:[{required:!0,validator:t,trigger:"blur"}]},{label:"确认密码",prop:"password2",hide:!0,editDisplay:!1,viewDisplay:!1,rules:[{required:!0,validator:n,trigger:"blur"}]}]},{label:"详细信息",prop:"detailInfo",icon:"el-icon-s-order",column:[{label:"用户昵称",prop:"name",hide:!0,rules:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]},{label:"用户姓名",prop:"realName",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:15,message:"姓名长度在2到15个字符"}]},{label:"手机号码",prop:"phone",overHidden:!0},{label:"证件号",prop:"card",overHidden:!0},{label:"电子邮箱",prop:"email",hide:!0,overHidden:!0},{label:"用户性别",prop:"sex",type:"select",dicData:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:3}],hide:!0},{label:"用户生日",type:"date",prop:"birthday",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",hide:!0},{label:"账号状态",prop:"statusName",hide:!0,display:!1}]},{label:"职责信息",prop:"dutyInfo",icon:"el-icon-s-custom",column:[{label:"所属角色",prop:"roleId",multiple:!0,type:"tree",dicData:[],props:{label:"title"},checkStrictly:!0,slot:!0,rules:[{required:!0,message:"请选择所属角色",trigger:"click"}]},{label:"所属机构",prop:"deptId",type:"tree",multiple:!0,dicData:[],props:{label:"title"},checkStrictly:!0,slot:!0,rules:[{required:!0,message:"请选择所属机构",trigger:"click"}]},{type:"select",label:"用户类型",dicUrl:"/api/blade-system/dict-biz/dictionary?code=isAdmin",props:{label:"dictValue",value:"dictKey"},span:12,display:!0,prop:"isAdmin",rules:[{required:!0,message:"请选择所属机构",trigger:"click"}]}]}]},data:[],excelForm:{},excelOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"模板上传",prop:"excelFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 .xls,.xlsx 标准格式文件",action:"/api/blade-user/import-user"},{label:"数据覆盖",prop:"isCovered",type:"switch",align:"center",width:80,dicData:[{label:"否",value:0},{label:"是",value:1}],value:0,slot:!0,rules:[{required:!0,message:"请选择是否覆盖",trigger:"blur"}]},{label:"模板下载",prop:"excelTemplate",formslot:!0,span:24}]}}},watch:{"form.tenantId":function(){""!==this.form.tenantId&&this.initFlag&&this.initData(this.form.tenantId)},"excelForm.isCovered":function(){if(""!==this.excelForm.isCovered){var e=this.findObject(this.excelOption.column,"excelFile");e.action="/api/blade-user/import-user?isCovered=".concat(this.excelForm.isCovered)}}},computed:h(h({},Object(l["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.user_add,!1),viewBtn:this.vaildData(this.permission.user_view,!1),delBtn:this.vaildData(this.permission.user_delete,!1),editBtn:this.vaildData(this.permission.user_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){u["a"].tenantMode||this.initData(u["a"].tenantId)},methods:{nodeClick:function(e){this.treeDeptId=e.id,this.page.currentPage=1,this.onLoad(this.page)},initData:function(e){var t=this;Object(c["getRoleTree"])(e).then((function(e){var n=t.findObject(t.option.group,"roleId");n.dicData=e.data.data})),Object(s["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.group,"deptId");n.dicData=e.data.data}))},submitRole:function(){var e=this,t=this.$refs.treeRole.getCheckedKeys().join(",");Object(o["grant"])(this.ids,t).then((function(){e.roleBox=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var r=this;e.deptId=e.deptId.join(","),e.roleId=e.roleId.join(","),Object(o["add"])(e).then((function(){r.initFlag=!1,r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;e.deptId=e.deptId.join(","),e.roleId=e.roleId.join(","),Object(o["update"])(e).then((function(){i.initFlag=!1,i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},searchReset:function(){this.query={},this.treeDeptId="",this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消删除"})})):this.$message.warning("请选择至少一条数据")},handleReset:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择账号密码重置为123456?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["resetPassword"])(e.ids)})).then((function(){e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleGrant:function(){var e=this;0!==this.selectionList.length?(this.roleTreeObj=[],1===this.selectionList.length&&(this.roleTreeObj=this.selectionList[0].roleId.split(",")),Object(c["getRoleTree"])().then((function(t){e.roleGrantList=t.data.data,e.roleBox=!0}))):this.$message.warning("请选择至少一条数据")},handleImport:function(){this.excelBox=!0},uploadAfter:function(e,t,n,r){window.console.log(r),this.excelBox=!1,this.refreshChange(),t()},handleExport:function(){var e=this;this.$confirm("是否导出用户数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.open("/api/blade-user/export-user?".concat(e.website.tokenHeader,"=").concat(Object(d["a"])(),"&account=").concat(e.search.account,"&realName=").concat(e.search.realName))})).catch((function(){e.$message({type:"info",message:"已取消"})}))},handleTemplate:function(){window.open("/api/blade-user/export-template?".concat(this.website.tokenHeader,"=").concat(Object(d["a"])()))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getUser"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("deptId")&&(n.form.deptId=n.form.deptId.split(",")),n.form.hasOwnProperty("roleId")&&(n.form.roleId=n.form.roleId.split(","))})),this.initFlag=!0,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query),this.treeDeptId).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},f=g,m=(n("5cfa"),n("2877")),b=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},b9b5:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data},on:{"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-view"},on:{click:function(n){return n.stopPropagation(),e.handleDetail(t.row)}}},[e._v("合同详情\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-s-check"},on:{click:function(n){return n.stopPropagation(),e.handleHistory(t.row)}}},[e._v("审核意见\n      ")]),n("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit"},on:{click:function(n){return n.stopPropagation(),e.handleContractDetail(t.row)}}},[e._v("重新调整\n      ")])]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)]),n("el-dialog",{staticClass:"contract-info-dialog",attrs:{title:"审核意见","append-to-body":"",width:"70%",visible:e.flowListIsShow},on:{"update:visible":function(t){e.flowListIsShow=t}}},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[n("avue-crud",{ref:"flowListCrud",attrs:{option:e.flowListOption,"table-loading":e.loading,data:e.flowList}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){e.flowListIsShow=!1}}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("28a5"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208"),l=n("738e"),u=n("c832"),d=n.n(u),p=n("4ba7"),h=n("8ddc");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,simplePage:!0,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!1,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:250,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",hide:!0,width:100},{label:"项目名称",prop:"projectName",bind:"contractList.projectName",minWidth:160,overHidden:!0},{label:"合同登记号",bind:"contractList.contractRegistrationNumber",minWidth:160,overHidden:!0},{label:"办件编号",prop:"contractCode",bind:"contractList.contractCode",minWidth:160,overHidden:!0,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"number",value:2,dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",size:"medium",required:!0,bind:"contractList.declareType",rules:[{required:!0,message:"请选择申报类型"}]},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/dictionary?code=ContractCategory",bind:"contractList.contractType",rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"项目计划来源",searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",bind:"contractList.projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{label:"申请时间",prop:"createTime",width:165}]},data:[],flowList:[],flowListIsShow:!1,flowListOption:p["flowListOption"]}},computed:f(f({},Object(o["b"])(["permission","flowRoutes","userInfo"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{initData:function(){var e=this;Object(h["getDictionary"])({code:"reason"}).then((function(t){var n=e.findObject(e.flowListOption.column,"reason");n.dicData=d()(t,"data.data",[]),e.reasonList=t.data.data}));var t=this.userInfo.role_id;if(t.includes("1375342244055232513")){var n=this.findObject(this.option.column,"contractCode");n.hide=!0}},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleWork:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/handle/").concat(e.taskId,"/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleCheck:function(){if(0===this.selectionList.length)return this.$message.warning("请选择至少一条数据");this.$message.warning("此功能正在开发中..."),console.log("this.selectionList :>> ",this.selectionList)},handleDetail:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.contractId,type:"detail"}})},handleContractDetail:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.contractId,type:"edit",taskId:e.taskId,processInstanceId:e.processInstanceId,name:1===e.type?"单位合同登记":"个人合同登记"}})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=f(f({},this.query),{},{category:"flow_3"});this.loading=!0,Object(s["todoList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))},handleHistory:function(e){var t=this;Object(l["historyFlowList"])(e.processInstanceId).then((function(e){var n=d()(e,"data.data");n&&(n=n.map((function(e){var t=e.comment.split("###$$$");return e.comment=t[0],e.reason=t[1],e})),t.flowList=n,t.flowListIsShow=!0)}))}},created:function(){this.initData()}},b=m,v=(n("245ab"),n("2877")),y=Object(v["a"])(b,r,i,!1,null,null,null);t["default"]=y.exports},bc1c:function(e,t,n){},bdfa:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看")]),n("el-button",{attrs:{type:r,size:i,icon:"el-icon-printer"},on:{click:function(t){return e.handleDownload(a)}}},[e._v("打印")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:200,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!1,addBtn:!1,selection:!0,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"项目名称",prop:"projectName",minWidth:160,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",overHidden:!0,prop:"contractRegistrationNumber",minWidth:160,search:!0,rules:[]},{label:"办件编号",overHidden:!0,prop:"contractCode",minWidth:160,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否军民两用合同",searchLabelWidth:100,minWidth:120,span:24,display:!0,prop:"isClassified",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}],required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],prop:"isFree",hide:!0,dicData:[{label:"是",value:1},{label:"否",value:0}]},{label:"状态",prop:"contractStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[]}},computed:h(h({},Object(c["b"])(["permission","userInfo"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData()},methods:{initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o}))},handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListDowload:function(){var e=this;0!==this.selectionList.length?this.selectionList.forEach((function(t){e.contractDownload(t)})):this.$message.warning("请选择至少一条数据")},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"edit"}})},handleView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail"}})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.loading=!0,this.query.projectName||this.query.contractRegistrationNumber||this.query.contractCode){var r=h(h(h({},n),this.query),{},{contractStatusList:[10,14],isFree:1}),i=r.applyTime,a=r.createTime;i&&(r.startApplyTime=i[0],r.endApplyTime=i[1],r.applyTime=null),a&&(r.startTime=a[0],r.endTime=a[1],r.createTime=null),r.contractStatusList=[10,14],delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(s["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}else this.loading=!1}}},f=g,m=n("2877"),b=Object(m["a"])(f,r,i,!1,null,null,null);t["default"]=b.exports},bed0:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.agencypoint_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("f0ed"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"",prop:"pointId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"pointName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"pointNo",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"linktel",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"email",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"address",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"empId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"createDates",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"flags",rules:[{required:!0,message:"请输入",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.agencypoint_add,!1),viewBtn:this.vaildData(this.permission.agencypoint_view,!1),delBtn:this.vaildData(this.permission.agencypoint_delete,!1),editBtn:this.vaildData(this.permission.agencypoint_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},c0bf:function(e,t,n){"use strict";n("e245")},c17b:function(e,t,n){},c1d1:function(e,t,n){"use strict";n("40c0")},c611:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.freistellungsauftrag_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("07d7"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"技术合同信息表id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同信息表id",trigger:"blur"}]},{label:"技术目标",prop:"technicalTarget",rules:[{required:!0,message:"请输入技术目标",trigger:"blur"}]},{label:"技术内容",prop:"technicalText",rules:[{required:!0,message:"请输入技术内容",trigger:"blur"}]},{label:"技术方法和路线",prop:"technicalMethods",rules:[{required:!0,message:"请输入技术方法和路线",trigger:"blur"}]},{label:"研发主要内容",prop:"researchContent",rules:[{required:!0,message:"请输入研发主要内容",trigger:"blur"}]},{label:"交付时间",prop:"deliveryTime",rules:[{required:!0,message:"请输入交付时间",trigger:"blur"}]},{label:"验收标准",prop:"acceptanceCriteria",rules:[{required:!0,message:"请输入验收标准",trigger:"blur"}]},{label:"甲方的工作内容",prop:"partyaWork",rules:[{required:!0,message:"请输入甲方的工作内容",trigger:"blur"}]},{label:"甲方进度",prop:"partyaProgress",rules:[{required:!0,message:"请输入甲方进度",trigger:"blur"}]},{label:"甲方期限",prop:"partyaEndtime",rules:[{required:!0,message:"请输入甲方期限",trigger:"blur"}]},{label:"甲方地点",prop:"partyaAddress",rules:[{required:!0,message:"请输入甲方地点",trigger:"blur"}]},{label:"甲方保密内容",prop:"partyaHiddentext",rules:[{required:!0,message:"请输入甲方保密内容",trigger:"blur"}]},{label:"交付成果形式与数量",prop:"deliverables",rules:[{required:!0,message:"请输入交付成果形式与数量",trigger:"blur"}]},{label:"交付时间与地点",prop:"timeAndAddress",rules:[{required:!0,message:"请输入交付时间与地点",trigger:"blur"}]},{label:"乙方的工作内容",prop:"partybWork",rules:[{required:!0,message:"请输入乙方的工作内容",trigger:"blur"}]},{label:"乙方进度",prop:"partybProgress",rules:[{required:!0,message:"请输入乙方进度",trigger:"blur"}]},{label:"乙方期限",prop:"partybEndtime",rules:[{required:!0,message:"请输入乙方期限",trigger:"blur"}]},{label:"乙方保密内容",prop:"partybHiddentext",rules:[{required:!0,message:"请输入乙方保密内容",trigger:"blur"}]},{label:"乙方地点",prop:"partybAddress",rules:[{required:!0,message:"请输入乙方地点",trigger:"blur"}]},{label:"丙方的工作内容",prop:"partycWork",rules:[{required:!0,message:"请输入丙方的工作内容",trigger:"blur"}]},{label:"丙方进度",prop:"partycProgress",rules:[{required:!0,message:"请输入丙方进度",trigger:"blur"}]},{label:"丙方期限",prop:"partycEndtime",rules:[{required:!0,message:"请输入丙方期限",trigger:"blur"}]},{label:"丙方地点",prop:"partycAddress",rules:[{required:!0,message:"请输入丙方地点",trigger:"blur"}]},{label:"丙方保密内容",prop:"partycHiddentext",rules:[{required:!0,message:"请输入丙方保密内容",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.freistellungsauftrag_add,!1),viewBtn:this.vaildData(this.permission.freistellungsauftrag_view,!1),delBtn:this.vaildData(this.permission.freistellungsauftrag_delete,!1),editBtn:this.vaildData(this.permission.freistellungsauftrag_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},c63d:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.incitesdata_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("316a"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"名称",prop:"name",rules:[{required:!0,message:"请输入名称",trigger:"blur"}]},{label:"排名",prop:"ranking",rules:[{required:!0,message:"请输入排名",trigger:"blur"}]},{label:"机构",prop:"organization",rules:[{required:!0,message:"请输入机构",trigger:"blur"}]},{label:"wosDocument",prop:"wosDocument",rules:[{required:!0,message:"请输入wosDocument",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.incitesdata_add,!1),viewBtn:this.vaildData(this.permission.incitesdata_view,!1),delBtn:this.vaildData(this.permission.incitesdata_delete,!1),editBtn:this.vaildData(this.permission.incitesdata_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},cc24:function(e,t,n){"use strict";n("478b")},cdc3:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.work_done_detail?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleDetail(t.row)}}},[e._v("详情\n      ")]):e._e(),e.permission.work_done_follow?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("跟踪\n      ")]):e._e()]}},{key:"processDefinitionVersion",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.processDefinitionVersion))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,dialogWidth:900,menuWidth:150,dialogClickModal:!1,column:[{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,hide:!0,width:100},{label:"流程名称",prop:"processDefinitionName",search:!0},{label:"当前步骤",prop:"taskName"},{label:"流程版本",prop:"processDefinitionVersion",slot:!0,width:80},{label:"申请时间",prop:"createTime",width:165}]},data:[]}},computed:u(u({},Object(o["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleDetail:function(e){this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/detail/").concat(e.processInstanceId,"/").concat(e.businessId)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/diagram-view?processInstanceId=".concat(e.processInstanceId),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},this.query),{},{category:n.category?Object(c["a"])(n.category):null});this.loading=!0,Object(s["doneList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("069c"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},d169:function(e,t,n){"use strict";n("672f")},d2e7:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.bladeprocessapply_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("4f2b"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"编号",prop:"id",rules:[{required:!0,message:"请输入编号",trigger:"blur"}]},{label:"流程定义主键",prop:"processDefinitionId",rules:[{required:!0,message:"请输入流程定义主键",trigger:"blur"}]},{label:"流程实例主键",prop:"processInstanceId",rules:[{required:!0,message:"请输入流程实例主键",trigger:"blur"}]},{label:"开始时间",prop:"startTime",rules:[{required:!0,message:"请输入开始时间",trigger:"blur"}]},{label:"结束时间",prop:"endTime",rules:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},{label:"第一级审批人",prop:"taskUser",rules:[{required:!0,message:"请输入第一级审批人",trigger:"blur"}]},{label:"申请时间",prop:"applyTime",rules:[{required:!0,message:"请输入申请时间",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.bladeprocessapply_add,!1),viewBtn:this.vaildData(this.permission.bladeprocessapply_view,!1),delBtn:this.vaildData(this.permission.bladeprocessapply_delete,!1),editBtn:this.vaildData(this.permission.bladeprocessapply_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},d337:function(e,t,n){"use strict";n("0413")},d4c8:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),n("avue-back-top",{attrs:{id:"avue-view"}}),n("avue-back-top",{attrs:{id:"avue-view",height:100,bottom:200}},[n("div",{staticClass:"top"},[e._v("返回顶端")])])],1)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{height:"2000px","background-color":"#fff"}},[n("div",{staticStyle:{padding:"15px 20px","font-size":"18px"}},[e._v("\n      往下拉就会出现返回菜单\n    ")])])}],a={},o=a,s=(n("8c0f"),n("2877")),c=Object(s["a"])(o,r,i,!1,null,"17505036",null);t["default"]=c.exports},d8d5:function(e,t,n){},d92f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},[e._v("nation-table")])},i=[],a={name:"",components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},o=a,s=(n("587b"),n("2877")),c=Object(s["a"])(o,r,i,!1,null,"c3497a5a",null);t["default"]=c.exports},d9b8:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page},on:{"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permission.work_start_flow?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleStart(t.row)}}},[e._v("发起\n      ")]):e._e(),e.permission.work_start_image?n("el-button",{staticClass:"none-border",attrs:{type:"text",size:"small",plain:""},on:{click:function(n){return n.stopPropagation(),e.handleImage(t.row,t.index)}}},[e._v("流程图\n      ")]):e._e()]}},{key:"tenantId",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(""===r.tenantId?"通用":r.tenantId))])]}},{key:"version",fn:function(t){var r=t.row;return[n("el-tag",[e._v("v"+e._s(r.version))])]}},{key:"suspensionState",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(1===r.suspensionState?"激活":"挂起"))])]}},{key:"category",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.categoryName))])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[n("el-radio-group",{attrs:{size:"small"},model:{value:e.mode,callback:function(t){e.mode=t},expression:"mode"}},[n("el-radio-button",{attrs:{label:"1"}},[e._v("通用流程")]),n("el-radio-button",{attrs:{label:"2"}},[e._v("定制流程")])],1)],1)],2),n("el-dialog",{attrs:{title:"流程图","append-to-body":"",visible:e.flowBox,fullscreen:!0},on:{"update:visible":function(t){e.flowBox=t}}},[n("iframe",{attrs:{src:e.flowUrl,width:"100%",height:"700",title:"流程图",frameBorder:"no",border:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",allowTransparency:"yes"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.flowBox=!1}}},[e._v("关 闭")])],1)])],1)},i=[],a=(n("8e6e"),n("456d"),n("ac6a"),n("bd86")),o=n("2f62"),s=n("1e69"),c=n("7208");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},mode:"1",selectionId:"",selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},flowBox:!1,flowUrl:"",workBox:!1,option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,editBtn:!1,addBtn:!1,viewBtn:!1,delBtn:!1,menuWidth:150,dialogWidth:900,dialogClickModal:!1,column:[{label:"租户编号",prop:"tenantId",slot:!0,width:120},{label:"流程分类",type:"select",row:!0,dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},dataType:"number",slot:!0,prop:"category",search:!0,width:100},{label:"流程标识",prop:"key"},{label:"流程名称",prop:"name",search:!0},{label:"流程版本",prop:"version",slot:!0,width:80},{label:"状态",prop:"suspensionState",slot:!0,width:80},{label:"部署时间",prop:"deploymentTime",width:165}]},data:[]}},watch:{mode:function(){this.onLoad(this.page)}},computed:u(u({},Object(o["b"])(["permission","flowRoutes"])),{},{ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},handleStart:function(e){if(e&&"new_contract_registration"===e.key)return this.$router.push({path:"/contract/add"});this.$router.push({path:"/work/process/".concat(Object(c["b"])(this.flowRoutes,e.category),"/form/").concat(e.id)})},handleImage:function(e){this.flowUrl="/api/blade-flow/process/resource-view?processDefinitionId=".concat(e.id),this.flowBox=!0},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=u(u({},this.query),{},{category:n.category?Object(c["a"])(n.category):null,mode:this.mode});this.loading=!0,Object(s["startList"])(e.currentPage,e.pageSize,Object.assign(n,r)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("e43f"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},de8c:function(e,t,n){},e245:function(e,t,n){},e3c0:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.agencystation_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("f6ef"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"",prop:"stationId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"stationName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"stationNo",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"areaName",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"linktel",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"email",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"address",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"createEmpId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"createDates",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"flags",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"pointId",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"whid",rules:[{required:!0,message:"请输入",trigger:"blur"}]},{label:"",prop:"regionCode",rules:[{required:!0,message:"请输入",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.agencystation_add,!1),viewBtn:this.vaildData(this.permission.agencystation_view,!1),delBtn:this.vaildData(this.permission.agencystation_delete,!1),editBtn:this.vaildData(this.permission.agencystation_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},e43f:function(e,t,n){"use strict";n("8ea7")},e62a:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"source",fn:function(e){var t=e.row;return[n("div",{staticStyle:{"text-align":"center"}},[n("i",{class:t.source})])]}},{key:"sort",fn:function(t){var r=t.row;return[n("el-input-number",{attrs:{min:1,max:100},on:{change:function(t){return e.sortChange(r)}},model:{value:r.sort,callback:function(t){e.$set(r,"sort",t)},expression:"row.sort"}})]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.topmenu_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e(),e.permission.topmenu_setting?n("el-button",{attrs:{size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleMenuSetting}},[e._v("菜单配置\n      ")]):e._e()],1)],2),n("el-dialog",{attrs:{title:"下级菜单配置","append-to-body":"",visible:e.box,width:"345px"},on:{"update:visible":function(t){e.box=t}}},[n("el-tree",{ref:"treeMenu",attrs:{data:e.menuGrantList,"show-checkbox":"","node-key":"id","default-checked-keys":e.menuTreeObj,props:e.props}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.box=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("5a17"),s=n("2f62"),c=n("2457");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){return{form:{},box:!1,query:{},loading:!0,props:{label:"title",value:"key"},page:{pageSize:10,currentPage:1,total:0},selectionList:[],menuGrantList:[],menuTreeObj:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,viewBtn:!0,selection:!0,dialogWidth:900,dialogClickModal:!1,column:[{label:"菜单名",prop:"name",search:!0,rules:[{required:!0,message:"请输入菜单名",trigger:"blur"}]},{label:"菜单图标",prop:"source",type:"icon",slot:!0,iconList:c["a"],rules:[{required:!0,message:"请输入菜单图标",trigger:"click"}]},{label:"菜单编号",prop:"code",search:!0,rules:[{required:!0,message:"请输入菜单编号",trigger:"blur"}]},{label:"菜单排序",prop:"sort",type:"number",slot:!0,rules:[{required:!0,message:"请输入菜单排序",trigger:"blur"}]}]},data:[]}},computed:u(u({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.topmenu_add,!1),viewBtn:this.vaildData(this.permission.topmenu_view,!1),delBtn:this.vaildData(this.permission.topmenu_delete,!1),editBtn:this.vaildData(this.permission.topmenu_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")},idsArray:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e}}),methods:{submit:function(){var e=this,t=this.$refs.treeMenu.getCheckedKeys();Object(o["grant"])(this.idsArray,t).then((function(){e.box=!1,e.$message({type:"success",message:"操作成功!"}),e.onLoad(e.page)}))},rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){window.console.log(e),n()}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){window.console.log(e),r()}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})).catch((function(){e.$message({type:"info",message:"已取消"})})):this.$message.warning("请选择至少一条数据")},handleMenuSetting:function(){var e=this;1===this.selectionList.length?(this.menuTreeObj=[],Object(o["grantTree"])().then((function(t){e.menuGrantList=t.data.data.menu,Object(o["getTopTree"])(e.ids).then((function(t){e.menuTreeObj=t.data.data.menu,e.box=!0}))}))):this.$message.warning("只能选择一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},sortChange:function(e){var t=this;Object(o["update"])(e).then((function(){t.onLoad(t.page)}),(function(e){window.console.log(e)}))},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},p=d,h=(n("1efb"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},eaac:function(e,t,n){"use strict";n("0d4d")},ef0b:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,search:e.search,"table-loading":e.loading,data:e.data,permission:e.permissionList,"before-open":e.beforeOpen,page:e.page},on:{"update:search":function(t){e.search=t},"update:page":function(t){e.page=t},"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"tenantName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.tenantName))])]}},{key:"roleName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.roleName))])]}},{key:"deptName",fn:function(t){var r=t.row;return[n("el-tag",[e._v(e._s(r.deptName))])]}},{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-delete",size:i,type:r},on:{click:function(t){return e.handleRemove(a)}}},[e._v("移除")])]}}]),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("28a5"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("c0c7"),s=n("2f62"),c=n("1ca4");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={data:function(){var e=this,t=function(e,t,n){""===t?n(new Error("请输入密码")):n()},n=function(t,n,r){""===n?r(new Error("请再次输入密码")):n!==e.form.password?r(new Error("两次输入密码不一致!")):r()};return{form:{},search:{},roleBox:!1,excelBox:!1,initFlag:!0,selectionList:[],query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},init:{roleTree:[],deptTree:[]},props:{label:"title",value:"key"},roleGrantList:[],roleTreeObj:[],treeDeptId:"",treeData:[],option:{height:"auto",calcHeight:80,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,stripe:!0,index:!0,selection:!0,viewBtn:!0,dialogClickModal:!1,column:[{label:"登录账号",prop:"account",search:!0,display:!1},{label:"用户姓名",prop:"realName",search:!0,display:!1},{label:"所属角色",prop:"roleName",slot:!0,display:!1},{label:"所属机构",prop:"deptName",slot:!0,display:!1}],group:[{label:"基础信息",prop:"baseInfo",icon:"el-icon-user-solid",column:[{label:"登录账号",prop:"account",rules:[{required:!0,message:"请输入登录账号",trigger:"blur"}],span:c["a"].tenantMode?12:24},{label:"所属租户",prop:"tenantId",type:"tree",dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},hide:!c["a"].tenantMode,addDisplay:c["a"].tenantMode,editDisplay:c["a"].tenantMode,viewDisplay:c["a"].tenantMode,rules:[{required:!0,message:"请输入所属租户",trigger:"click"}]},{label:"密码",prop:"password",hide:!0,editDisplay:!1,viewDisplay:!1,rules:[{required:!0,validator:t,trigger:"blur"}]},{label:"确认密码",prop:"password2",hide:!0,editDisplay:!1,viewDisplay:!1,rules:[{required:!0,validator:n,trigger:"blur"}]}]},{label:"详细信息",prop:"detailInfo",icon:"el-icon-s-order",column:[{label:"用户昵称",prop:"name",hide:!0,rules:[{required:!0,message:"请输入用户昵称",trigger:"blur"}]},{label:"用户姓名",prop:"realName",rules:[{required:!0,message:"请输入用户姓名",trigger:"blur"},{min:2,max:15,message:"姓名长度在2到15个字符"}]},{label:"手机号码",prop:"phone",overHidden:!0},{label:"证件号",prop:"card",overHidden:!0},{label:"电子邮箱",prop:"email",hide:!0,overHidden:!0},{label:"用户性别",prop:"sex",type:"select",dicData:[{label:"男",value:1},{label:"女",value:2},{label:"未知",value:3}],hide:!0},{label:"用户生日",type:"date",prop:"birthday",format:"yyyy-MM-dd hh:mm:ss",valueFormat:"yyyy-MM-dd hh:mm:ss",hide:!0},{label:"账号状态",prop:"statusName",hide:!0,display:!1}]},{label:"职责信息",prop:"dutyInfo",icon:"el-icon-s-custom",column:[{label:"所属角色",prop:"roleId",multiple:!0,type:"tree",dicData:[],props:{label:"title"},checkStrictly:!0,slot:!0,rules:[{required:!0,message:"请选择所属角色",trigger:"click"}]},{label:"所属机构",prop:"deptId",type:"tree",multiple:!0,dicData:[],props:{label:"title"},checkStrictly:!0,slot:!0,rules:[{required:!0,message:"请选择所属机构",trigger:"click"}]},{type:"select",label:"用户类型",dicUrl:"/api/blade-system/dict-biz/dictionary?code=isAdmin",props:{label:"dictValue",value:"dictKey"},span:12,display:!0,prop:"isAdmin",rules:[{required:!0,message:"请选择所属机构",trigger:"click"}]}]}]},data:[],excelForm:{},excelOption:{submitBtn:!1,emptyBtn:!1,column:[{label:"模板上传",prop:"excelFile",type:"upload",drag:!0,loadText:"模板上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 .xls,.xlsx 标准格式文件",action:"/api/blade-user/import-user"},{label:"数据覆盖",prop:"isCovered",type:"switch",align:"center",width:80,dicData:[{label:"否",value:0},{label:"是",value:1}],value:0,slot:!0,rules:[{required:!0,message:"请选择是否覆盖",trigger:"blur"}]},{label:"模板下载",prop:"excelTemplate",formslot:!0,span:24}]}}},watch:{"form.tenantId":function(){""!==this.form.tenantId&&this.initFlag&&this.initData(this.form.tenantId)},"excelForm.isCovered":function(){if(""!==this.excelForm.isCovered){var e=this.findObject(this.excelOption.column,"excelFile");e.action="/api/blade-user/import-user?isCovered=".concat(this.excelForm.isCovered)}}},computed:u(u({},Object(s["b"])(["userInfo","permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.user_add,!1),viewBtn:this.vaildData(this.permission.user_view,!1),delBtn:this.vaildData(this.permission.user_delete,!1),editBtn:this.vaildData(this.permission.user_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),mounted:function(){},methods:{handleRemove:function(e){var t=this;console.log("row :>> ",e),this.$confirm("移除后，此人将无法以单位名义申请技术合同登记",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return e.unitId="",Object(o["update"])(e).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}),(function(e){window.console.log(e)}))})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},nodeClick:function(e){this.treeDeptId=e.id,this.page.currentPage=1,this.onLoad(this.page)},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},searchReset:function(){this.query={},this.treeDeptId="",this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getUser"])(this.form.id).then((function(e){n.form=e.data.data,n.form.hasOwnProperty("deptId")&&(n.form.deptId=n.form.deptId.split(",")),n.form.hasOwnProperty("roleId")&&(n.form.roleId=n.form.roleId.split(","))})),this.initFlag=!0,e()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getUserInfo"])().then((function(r){var i=r.data.data;console.log("user :>> ",i),console.log("this.userInfo :>> ",t.userInfo),n.unitId=i.unitId,n.roleId="1351364540907913218",Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,t.query),t.treeDeptId).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}))}}},p=d,h=(n("d337"),n("2877")),g=Object(h["a"])(p,r,i,!1,null,null,null);t["default"]=g.exports},f072:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-form",{ref:"form",attrs:{option:e.option,"upload-before":e.uploadBefore,"upload-after":e.uploadAfter},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=n("371f"),o=n("7208"),s={data:function(){return{form:{flowCategory:"",tenantId:"",flowFile:[],file:{}},option:{labelWidth:120,menuBtn:!1,column:[{label:"流程类型",prop:"flowCategory",type:"select",dicUrl:"/api/blade-system/dict/dictionary?code=flow",props:{label:"dictValue",value:"dictKey"},row:!0,span:12,dataType:"number",rules:[{required:!0,message:"请选择流程类型",trigger:"blur"}]},{label:"流程模式",prop:"flowMode",type:"radio",dicData:[{label:"通用流程",value:1},{label:"定制流程",value:2}],value:1,row:!0,span:12,rules:[{required:!0,message:"请选择流程模式",trigger:"blur"}]},{label:"所属租户",prop:"tenantId",type:"tree",multiple:!0,dicUrl:"/api/blade-system/tenant/select",props:{label:"tenantName",value:"tenantId"},display:!1,row:!0,span:12,rules:[{required:!0,message:"请选择所属租户",trigger:"blur"}]},{label:"附件上传",prop:"flowFile",type:"upload",loadText:"附件上传中，请稍等",span:24,propsHttp:{res:"data"},tip:"请上传 bpmn20.xml 标准格式文件",action:"/api/blade-flow/manager/check-upload"}]}}},watch:{"form.flowMode":function(){var e=this;this.$refs.form.option.column.filter((function(t){"tenantId"===t.prop&&(t.display=2===e.form.flowMode)}))}},methods:{uploadBefore:function(e,t){this.$message.success("部署开始"),this.file=e,t()},uploadAfter:function(e,t,n){var r=this;return this.form.flowCategory?2!==this.form.flowMode||this.form.tenantId?e.success?void Object(a["deployUpload"])(Object(o["a"])(this.form.flowCategory),this.form.tenantId?this.form.tenantId.join(","):"",[this.file]).then((function(e){var i=e.data;i.success?t():(r.$message.error(i.msg),n())})):(this.$message.warning("请上传 bpmn20.xml 标准格式文件"),n(),!1):(this.$message.warning("清先选择对应租户"),n(),!1):(this.$message.warning("清先选择流程类型"),n(),!1)}}},c=s,l=n("2877"),u=Object(l["a"])(c,r,i,!1,null,null,null);t["default"]=u.exports},f100:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("h3",[e._v("这个页面会被 keep-alive")]),n("el-tag",[e._v("在下面的输入框输入任意字符后，切换到其它页面，再回到此页时输入框文字保留，证明被缓存")]),n("br"),n("br"),n("el-tag",[e._v("同时滚动下拉，返回时还会保持滚动条所在的位置")]),n("br"),n("br"),n("el-input",{attrs:{placeholder:"input here"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("div",{staticStyle:{height:"1000px"}})],1)},i=[],a={data:function(){return{value:""}}},o=a,s=n("2877"),c=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=c.exports},f15f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.basicinformationchild_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("81ea"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"账户基本信息id",prop:"basicInformationId",rules:[{required:!0,message:"请输入账户基本信息id",trigger:"blur"}]},{label:"单位名称",prop:"unitName",rules:[{required:!0,message:"请输入单位名称",trigger:"blur"}]},{label:"社会统一信用代码",prop:"organizationCode",rules:[{required:!0,message:"请输入社会统一信用代码",trigger:"blur"}]},{label:"单位国别",prop:"unitCountry",rules:[{required:!0,message:"请输入单位国别",trigger:"blur"}]},{label:"通讯地址",prop:"address",rules:[{required:!0,message:"请输入通讯地址",trigger:"blur"}]},{label:"联系电话",prop:"phone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"邮政编码",prop:"postalCode",rules:[{required:!0,message:"请输入邮政编码",trigger:"blur"}]},{label:"法人代表",prop:"legalRepresentative",rules:[{required:!0,message:"请输入法人代表",trigger:"blur"}]},{label:"法人代表联系电话",prop:"legalPhone",rules:[{required:!0,message:"请输入法人代表联系电话",trigger:"blur"}]},{label:"法人邮箱",prop:"legalEmail",rules:[{required:!0,message:"请输入法人邮箱",trigger:"blur"}]},{label:"单位性质",prop:"unitNature",rules:[{required:!0,message:"请输入单位性质",trigger:"blur"}]},{label:"所属地区",prop:"region",rules:[{required:!0,message:"请输入所属地区",trigger:"blur"}]},{label:"所属园区",prop:"park",rules:[{required:!0,message:"请输入所属园区",trigger:"blur"}]},{label:"是否国家级高新区内企业 0:否 1:是",prop:"isAreaenterprises",rules:[{required:!0,message:"请输入是否国家级高新区内企业 0:否 1:是",trigger:"blur"}]},{label:"机构从事的国民经济行业",prop:"industry",rules:[{required:!0,message:"请输入机构从事的国民经济行业",trigger:"blur"}]},{label:"企业规模",prop:"enterpriseScale",rules:[{required:!0,message:"请输入企业规模",trigger:"blur"}]},{label:"财务主管",prop:"treasurer",rules:[{required:!0,message:"请输入财务主管",trigger:"blur"}]},{label:"是否转制科研院所 0:否 1:是",prop:"isConversion",rules:[{required:!0,message:"请输入是否转制科研院所 0:否 1:是",trigger:"blur"}]},{label:"是否研发机构 0:否 1:是",prop:"isDevelopmentinstitutions",rules:[{required:!0,message:"请输入是否研发机构 0:否 1:是",trigger:"blur"}]},{label:"是否上市公司 0:否 1:是",prop:"isListedcompany",rules:[{required:!0,message:"请输入是否上市公司 0:否 1:是",trigger:"blur"}]},{label:"证券代码",prop:"stockCode",rules:[{required:!0,message:"请输入证券代码",trigger:"blur"}]},{label:"联系人",prop:"contact",rules:[{required:!0,message:"请输入联系人",trigger:"blur"}]},{label:"税务登记号",prop:"registrationNumber",rules:[{required:!0,message:"请输入税务登记号",trigger:"blur"}]},{label:"电子邮件",prop:"email",rules:[{required:!0,message:"请输入电子邮件",trigger:"blur"}]},{label:"联系电话",prop:"contactPhone",rules:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},{label:"是否科技服务机构 0:否 1:是",prop:"isScience",rules:[{required:!0,message:"请输入是否科技服务机构 0:否 1:是",trigger:"blur"}]},{label:"科技服务机构名称",prop:"scienceName",rules:[{required:!0,message:"请输入科技服务机构名称",trigger:"blur"}]},{label:"是否技术转移机构 0:否 1:是",prop:"isTechnology",rules:[{required:!0,message:"请输入是否技术转移机构 0:否 1:是",trigger:"blur"}]},{label:"技术转移机构名称",prop:"technologyName",rules:[{required:!0,message:"请输入技术转移机构名称",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.basicinformationchild_add,!1),viewBtn:this.vaildData(this.permission.basicinformationchild_view,!1),delBtn:this.vaildData(this.permission.basicinformationchild_delete,!1),editBtn:this.vaildData(this.permission.basicinformationchild_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},f472:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.bladeprocessfree_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("f969"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"编号",prop:"id",rules:[{required:!0,message:"请输入编号",trigger:"blur"}]},{label:"流程定义主键",prop:"processDefinitionId",rules:[{required:!0,message:"请输入流程定义主键",trigger:"blur"}]},{label:"流程实例主键",prop:"processInstanceId",rules:[{required:!0,message:"请输入流程实例主键",trigger:"blur"}]},{label:"开始时间",prop:"startTime",rules:[{required:!0,message:"请输入开始时间",trigger:"blur"}]},{label:"结束时间",prop:"endTime",rules:[{required:!0,message:"请输入结束时间",trigger:"blur"}]},{label:"技术合同id",prop:"contractId",rules:[{required:!0,message:"请输入技术合同id",trigger:"blur"}]},{label:"第一级审批人",prop:"taskbUser",rules:[{required:!0,message:"请输入第一级审批人",trigger:"blur"}]},{label:"第一级审批人意见",prop:"taskbOpinion",rules:[{required:!0,message:"请输入第一级审批人意见",trigger:"blur"}]},{label:"第二级审批人",prop:"taskcUser",rules:[{required:!0,message:"请输入第二级审批人",trigger:"blur"}]},{label:"第二级审批人意见",prop:"taskcOpinion",rules:[{required:!0,message:"请输入第二级审批人意见",trigger:"blur"}]},{label:"武汉审批人",prop:"taskWHUser",rules:[{required:!0,message:"请输入武汉审批人",trigger:"blur"}]},{label:"武汉审批人意见",prop:"taskWHOpinion",rules:[{required:!0,message:"请输入武汉审批人意见",trigger:"blur"}]},{label:"武汉审批人理由",prop:"taskWHReason",rules:[{required:!0,message:"请输入武汉审批人理由",trigger:"blur"}]},{label:"申请时间",prop:"applyTime",rules:[{required:!0,message:"请输入申请时间",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.bladeprocessfree_add,!1),viewBtn:this.vaildData(this.permission.bladeprocessfree_view,!1),delBtn:this.vaildData(this.permission.bladeprocessfree_delete,!1),editBtn:this.vaildData(this.permission.bladeprocessfree_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},f5ac:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("799f"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",tip:!0,searchMenuSpan:6,menu:!1,menuWidth:0,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!0,addBtn:!1,selection:!0,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"合同登记号",prop:"contractno",minWidth:160,overHidden:!0,search:!0,rules:[]},{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"上报状态",prop:"uploadflag",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=uploadflag",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"上报结果",prop:"uploadinfo",minWidth:160,overHidden:!0,search:!0,rules:[]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission","userInfo"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){},methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"edit"}})},handleView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail"}})},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=l(l(l({},n),this.query),{},{contractStatusList:[10,14]}),i=r.applyTime,a=r.createTime;i&&(r.startApplyTime=i[0],r.endApplyTime=i[1],r.applyTime=null),a&&(r.startTime=a[0],r.endTime=a[1],r.createTime=null),r.contractStatusList=r.contractStatus,delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(o["toNationResultPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},f6d7:function(e,t,n){},f7ab:function(e,t,n){},fa6f:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("template",{slot:"menuLeft"},[e.permission.basicinformation_delete?n("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",plain:""},on:{click:e.handleDelete}},[e._v("删 除\n      ")]):e._e()],1)],2)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("ac6a"),n("bd86")),o=n("1275"),s=n("2f62");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={data:function(){return{form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,column:[{label:"主键",prop:"id",rules:[{required:!0,message:"请输入主键",trigger:"blur"}]},{label:"姓名",prop:"name",rules:[{required:!0,message:"请输入姓名",trigger:"blur"}]},{label:"手机号",prop:"phone",rules:[{required:!0,message:"请输入手机号",trigger:"blur"}]},{label:"证件号",prop:"certificate",rules:[{required:!0,message:"请输入证件号",trigger:"blur"}]},{label:"行政区划名称",prop:"areaName",rules:[{required:!0,message:"请输入行政区划名称",trigger:"blur"}]},{label:"行政区划代码",prop:"areaCode",rules:[{required:!0,message:"请输入行政区划代码",trigger:"blur"}]},{label:"所属单位名称",prop:"unitName",rules:[{required:!0,message:"请输入所属单位名称",trigger:"blur"}]},{label:"创建人",prop:"createUser",rules:[{required:!0,message:"请输入创建人",trigger:"blur"}]},{label:"创建部门",prop:"createDept",rules:[{required:!0,message:"请输入创建部门",trigger:"blur"}]},{label:"创建时间",prop:"createTime",rules:[{required:!0,message:"请输入创建时间",trigger:"blur"}]},{label:"修改人",prop:"updateUser",rules:[{required:!0,message:"请输入修改人",trigger:"blur"}]},{label:"修改时间",prop:"updateTime",rules:[{required:!0,message:"请输入修改时间",trigger:"blur"}]},{label:"状态",prop:"status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"是否已删除",prop:"isDeleted",rules:[{required:!0,message:"请输入是否已删除",trigger:"blur"}]}]},data:[]}},computed:l(l({},Object(s["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.basicinformation_add,!1),viewBtn:this.vaildData(this.permission.basicinformation_view,!1),delBtn:this.vaildData(this.permission.basicinformation_delete,!1),editBtn:this.vaildData(this.permission.basicinformation_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),methods:{rowSave:function(e,t,n){var r=this;Object(o["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e,t,n,r){var i=this;Object(o["update"])(e).then((function(){i.onLoad(i.page),i.$message({type:"success",message:"操作成功!"}),n()}),(function(e){r(),console.log(e)}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(o["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(o["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0,Object(o["getList"])(e.currentPage,e.pageSize,Object.assign(n,this.query)).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},d=u,p=n("2877"),h=Object(p["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},fcf4:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("basic-container",[e.userInfo?n("avue-crud",{ref:"crud",attrs:{option:e.option,"table-loading":e.loading,data:e.data,page:e.page,permission:e.permissionList,"before-open":e.beforeOpen},on:{"update:page":function(t){e.page=t},"row-update":e.rowUpdate,"row-save":e.rowSave,"row-del":e.rowDel,"search-change":e.searchChange,"search-reset":e.searchReset,"selection-change":e.selectionChange,"current-change":e.currentChange,"size-change":e.sizeChange,"refresh-change":e.refreshChange,"on-load":e.onLoad},scopedSlots:e._u([{key:"menu",fn:function(t){var r=t.type,i=t.size,a=t.row;return[n("el-button",{attrs:{icon:"el-icon-view",size:i,type:r},on:{click:function(t){return e.handleView(a)}}},[e._v("查看合同信息")]),n("el-button",{attrs:{icon:"el-icon-view",type:r,size:i},on:{click:function(t){return e.handleFree(a)}}},[e._v("查看免税记录")]),n("el-button",{attrs:{icon:"el-icon-s-flag",type:r,size:i},on:{click:function(t){return e.handleSubmit(a)}}},[e._v("取消驳回状态")])]}}],null,!1,985003335),model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}):e._e(),n("el-dialog",{directives:[{name:"dialogdrag",rawName:"v-dialogdrag"}],staticClass:"avue-dialog",attrs:{title:"驳回",visible:e.rejectIsShow,width:"60%","append-to-body":""},on:{"update:visible":function(t){e.rejectIsShow=t}}},[n("avue-form",{ref:"rejectForm",attrs:{option:e.rejectOption},model:{value:e.rejectForm,callback:function(t){e.rejectForm=t},expression:"rejectForm"}}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.rejectIsShow=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("提 交")])],1)],1)],1)},i=[],a=(n("8e6e"),n("456d"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),o=(n("ac6a"),n("bd86")),s=n("799f"),c=n("2f62"),l=n("fcb7"),u=n("21a6"),d=n.n(u),p=n("c0c7");function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={data:function(){return{userInfo:null,rejectIsShow:!1,rejectForm:{},rejectOption:{height:"auto",calcHeight:30,tip:!1,searchShow:!0,searchMenuSpan:6,border:!0,index:!0,viewBtn:!0,selection:!0,dialogClickModal:!1,submitBtn:!1,emptyBtn:!1,labelWidth:80,column:[{label:"驳回原因",span:24,type:"textarea",prop:"reason",rules:[]}]},form:{},query:{},loading:!0,page:{pageSize:10,currentPage:1,total:0},selectionList:[],option:{height:"auto",calcHeight:30,tip:!1,searchMenuSpan:6,menuWidth:340,searchLabelWidth:100,border:!0,stripe:!0,index:!0,viewBtn:!1,editBtn:!1,delBtn:!1,excelBtn:!1,addBtn:!1,selection:!1,searchShow:!0,searchIndex:3,searchIcon:!0,dialogClickModal:!1,column:[{label:"税务驳回状态",prop:"rejectStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=reject_status",rules:[{required:!0,message:"请输入驳回状态",trigger:"blur"}]},{label:"驳回原因",prop:"rejectReason",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入驳回原因",trigger:"blur"}]},{label:"项目名称",prop:"projectName",minWidth:160,overHidden:!0,search:!0,rules:[{required:!0,message:"请输入项目名称",trigger:"blur"}]},{label:"合同登记号",prop:"contractRegistrationNumber",minWidth:160,overHidden:!0,search:!0,rules:[]},{label:"办件编号",prop:"contractCode",overHidden:!0,minWidth:160,search:!0,rules:[]},{type:"radio",label:"申报类型",span:24,display:!0,search:!0,props:{label:"dictValue",value:"dictKey"},prop:"declareType",dataType:"string",value:"1",dicUrl:"/api/blade-system/dict-biz/dictionary?code=declare_type",dicFlag:!0,border:!1,button:!1,size:"medium",disabled:!1,required:!0,rules:[{required:!0,message:"请选择申报类型"}],dicMethod:"get"},{type:"radio",label:"合同类型",search:!0,span:24,display:!0,props:{label:"dictValue",value:"dictKey"},prop:"contractType",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=10&parentId=518",required:!0,rules:[{required:!0,message:"请选择合同类型"}]},{type:"tree",label:"登记站",span:24,display:!0,overHidden:!0,minWidth:100,parent:!1,props:{label:"title",value:"value"},prop:"kiosk",dicData:[],defaultExpandedKeys:["1123598813738675201"],search:!0,rules:[{required:!0,message:"请选择登记站"}]},{type:"tree",label:"登记处",span:12,overHidden:!0,minWidth:100,defaultExpandedKeys:[],parent:!1,search:!0,props:{label:"title",value:"value"},dicData:[],prop:"registrationPoint",rules:[{required:!0,message:"请选择登记处"}]},{type:"tree",label:"项目计划来源",searchLabelWidth:100,minWidth:100,span:24,display:!0,parent:!1,props:{label:"dictValue",value:"dictKey"},prop:"projectPlanFrom",dicUrl:"/api/blade-system/dict-biz/child-list?current=1&size=100&parentId=520",required:!0,overHidden:!0,rules:[{required:!0,message:"请选择项目计划来源"}]},{type:"radio",label:"是否军民两用合同",searchLabelWidth:100,minWidth:120,span:24,display:!0,prop:"isClassified",dicData:[{label:"是",value:"1"},{label:"否",value:"0"}],required:!0,rules:[{required:!0,message:"请选择是否为军民两用合同"}]},{type:"radio",label:"是否申请免税",minWidth:100,span:24,display:!0,labelTip:"计划外的技术开发、技术转让、技术许可合同才可以申请免税",labelTipPlacement:"right",rules:[{required:!0,message:"请选择是否申请免税"}],prop:"isFree",hide:!0,dicData:[{label:"是",value:1},{label:"否",value:0}]},{label:"状态",prop:"contractStatus",type:"select",dataType:"string",minWidth:100,overHidden:!0,search:!0,props:{label:"dictValue",value:"dictKey"},dicUrl:"/api/blade-system/dict-biz/dictionary?code=contract_status",rules:[{required:!0,message:"请输入状态",trigger:"blur"}]},{label:"提交时间",prop:"applyTime",type:"datetime",minWidth:150,searchRange:!0,searchSpan:10,search:!0,valueFormat:"yyyy-MM-dd HH:mm:ss"}]},data:[]}},computed:g(g({},Object(c["b"])(["permission"])),{},{permissionList:function(){return{addBtn:this.vaildData(this.permission.contractlist_add,!1),viewBtn:this.vaildData(this.permission.contractlist_view,!1),delBtn:this.vaildData(this.permission.contractlist_delete,!1),editBtn:this.vaildData(this.permission.contractlist_edit,!1)}},ids:function(){var e=[];return this.selectionList.forEach((function(t){e.push(t.id)})),e.join(",")}}),created:function(){this.initData(),this.getUserInfo()},methods:{getUserInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(p["getUserInfo"])();case 3:t=e.sent,n=t.data,r=n.data,this.$nextTick((function(){i.userInfo=r})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.warn("error :>> ",e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),initData:function(e){var t=this;Object(l["getDeptTree"])(e).then((function(e){var n=t.findObject(t.option.column,"kiosk"),r=e.data.data,i=r[0].children;i=i.filter((function(e){return"1364024711664652289"!==e.id&&e.hasChildren})),r[0].children=i,n.dicData=r;var a=t.findObject(t.option.column,"registrationPoint"),o=t.deepClone(r),s=o[0].children;s.forEach((function(e){return e.children=[]})),a.dicData=o}))},handleAdd:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e}})},handleDownload:function(e){this.contractDownload(e)},contractDownload:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[t.id],e.prev=1,e.next=4,this.$http({url:"/api/api/downloadPDF/exportPdf",method:"POST",data:n,responseType:"blob"});case 4:r=e.sent,i=r.data,d()(i,t.projectName+".pdf"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),window.console.log(e.t0);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),handleListDowload:function(){var e=this;0!==this.selectionList.length?this.selectionList.forEach((function(t){e.contractDownload(t)})):this.$message.warning("请选择至少一条数据")},handleCopy:function(){if(0!==this.selectionList.length)if(1===this.selectionList.length){var e=this.selectionList[0].id;this.$router.push({path:"/contract/contract-info",query:{contractType:0,copyId:e}})}else this.$message.warning("只能选择一条条数据");else this.$message.warning("请选择至少一条数据")},handleAddClassified:function(e){this.$router.push({path:"/contract/contract-info",query:{contractType:e,isClassified:1}})},rowSave:function(e,t,n){var r=this;Object(s["add"])(e).then((function(){r.onLoad(r.page),r.$message({type:"success",message:"操作成功!"}),t()}),(function(e){n(),window.console.log(e)}))},rowUpdate:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"edit"}})},handleView:function(e){this.$router.push({path:"/contract/contract-info",query:{contractId:e.id,type:"detail"}})},handleFree:function(e){this.$router.push({path:"/free/free-list",query:{contractId:e.id}})},handleReject:function(e){this.rejectForm.id=e.id,this.rejectIsShow=!0},handleSubmit:function(e){var t=this;e.rejectStatus=0,this.$confirm("确定修改税务状态为正常吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["update"])(e)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){}))},rowDel:function(e){var t=this;this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.id)})).then((function(){t.onLoad(t.page),t.$message({type:"success",message:"操作成功!"})})).catch((function(){}))},handleDelete:function(){var e=this;0!==this.selectionList.length?this.$confirm("确定将选择数据删除?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return Object(s["remove"])(e.ids)})).then((function(){e.onLoad(e.page),e.$message({type:"success",message:"操作成功!"}),e.$refs.crud.toggleSelection()})):this.$message.warning("请选择至少一条数据")},beforeOpen:function(e,t){var n=this;["edit","view"].includes(t)&&Object(s["getDetail"])(this.form.id).then((function(e){n.form=e.data.data})),e()},searchReset:function(){this.query={},this.onLoad(this.page)},searchChange:function(e,t){this.query=e,this.page.currentPage=1,this.onLoad(this.page,e),t()},selectionChange:function(e){this.selectionList=e},selectionClear:function(){this.selectionList=[],this.$refs.crud.toggleSelection()},currentChange:function(e){this.page.currentPage=e},sizeChange:function(e){this.page.pageSize=e},refreshChange:function(){this.onLoad(this.page,this.query)},onLoad:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.loading=!0;var r=g(g(g({},n),this.query),{},{contractStatusList:[10,14],isFree:1,rejectStatus:1}),i=this.userInfo,a=i.roleId,o=i.unitId,c=i.deptId,l=i.id;a.includes("1351364540907913218")&&(r.createUser=l,r.registrationUnitId=o||0),a.includes("1351364671552094210")&&(r.registrationUnitId=o),a.includes("1375342244055232513")&&(r.kiosk=c),a.includes("1351364770906767361")&&(r.kiosk=c),a.includes("1351364845053673474")&&(r.registrationPoint=c);var u=r.applyTime,d=r.createTime;u&&(r.startApplyTime=u[0],r.endApplyTime=u[1],r.applyTime=null),d&&(r.startTime=d[0],r.endTime=d[1],r.createTime=null),r.contractStatusList=[10,14],delete r.contractStatus,Object.keys(r).forEach((function(e){(t.validatenull(r[e])||e.includes("$"))&&delete r[e]})),Object(s["getListPage"])(e.currentPage,e.pageSize,r).then((function(e){var n=e.data.data;t.page.total=n.total,t.data=n.records,t.loading=!1,t.selectionClear()}))}}},m=f,b=n("2877"),v=Object(b["a"])(m,r,i,!1,null,null,null);t["default"]=v.exports}}]);